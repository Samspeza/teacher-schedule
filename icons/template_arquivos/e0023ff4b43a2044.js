(self["webpackChunk_canva_web"] = self["webpackChunk_canva_web"] || []).push([[1831],{

/***/ 809943:
function(_, __, __webpack_require__) {__webpack_require__.n_x = __webpack_require__.n;const __web_req__ = __webpack_require__;__web_req__(813110);__web_req__(59401);__web_req__(659506);self._5880d4398c473aa67256e87589eaef11 = self._5880d4398c473aa67256e87589eaef11 || {};(function(__c) {var Nq;var Hq;var tp;var rp;var sp;var jq;var No;var Vo;var kp;var Eo;var Qo;var Cq;var Io;var To;var Go;var go=__c.go;var Zo;var Yo;var xq;var wq;var Wo;var Uo;var rq;var da=__c.da;var Oo;var Co;var Wp;var aq;var $p;var bq;var Yp;var Zp;var cq;var Fo;var Jo;var Up;var Xp;var hb=__c.hb;var Vp;var mo;var lo;var ko;var Tp;var Mp;var Vg=__c.Vg;var Ep;var Dp;var Cp;var Bp;var Ap;var yp;var ma=__c.ma;var dp;var cp;var $o;var Ro;var Bo;var Ao;var Lo;var Mo;var Ko;var Do;var la=__c.la;var m=__c.m;
var r=__c.r;var jo;var ja=__c.ja;
var Ihb,io,Jhb,Khb,Lhb,no,Ohb,Qhb,oo,po,Thb,Rhb,Shb,Vhb,qo,Zhb,$hb,aib,bib,cib,dib,eib,fib,ro,so,to,gib,hib,uo,kib,zo,oib,qib,rib,pib,tib,uib,vib,wib,xib,yib,Jib,Oib,Sib,Tib,Uib,Zib,$ib,ajb,bjb,cjb,fjb,gjb,ijb,jjb,ljb,njb,ojb,ap,qjb,sjb,tjb,wjb,xjb,gp,yjb,zjb,Ajb,jp,Cjb,Djb,Ejb,Gjb,Hjb,Ijb,Jjb,Ljb,Mjb,up,Xjb,vp,wp,Zjb,$jb,xp,ckb,ekb,dkb,fkb,gkb,ikb,kkb,bkb,lkb,nkb,mkb,okb,qkb,rkb,Fp,skb,vkb,tkb,ukb,Hp,ykb,Akb,xkb,zkb,Bkb,Ckb,wkb,Dkb,Ekb,Jp,Gkb,Hkb,Ikb,Kp,Jkb,Kkb,Lkb,Mkb,Qkb,Pp,Op,Rkb,Qp,Skb,Tkb,Ukb,
Vkb,Wkb,Xkb,Ykb,$kb,Rp,alb,clb,Sp,dlb;Ihb=function(a,b){ja(b.length>0);switch(b.length){case 1:return b[0];case 2:return a.compose(b[0],b[1]);case 3:return a.compose(a.compose(b[0],b[1]),b[2]);case 4:return a.compose(a.compose(b[0],b[1]),a.compose(b[2],b[3]));default:const c=b.slice();for(b=b.length;b>1;){let d=0;for(let e=0;e<b;e+=2)c[d++]=e+1<b?a.compose(c[e],c[e+1]):c[e];b=d}return c[0]}};io=function(a,b,c){ja(a.zi(b,c),"{} != {}",b,c)};Jhb=function(a,b){return new jo(b(a.Fu),b(a.cv),a.Yva,a.yCa)};
ko=__c.ko=function(a,b){return new jo(a,b,!1,!1)};lo=__c.lo=function(a){return new jo(void 0,a,!0,!1)};mo=__c.mo=function(a,b){a.Yva||(a.Yva=b.Yva);a.yCa||(a.yCa=b.yCa);return b};Khb=function(a,b=!0){a.Yva||(a.Yva=b)};Lhb=function(a,b=!0){a.yCa||(a.yCa=b)};no=function(a){return a===1?Mhb:{type:0,length:a}};Ohb=function(a){return a===1?Nhb:{type:1,length:a}};Qhb=function(a){return a===1?Phb:{type:2,length:a}};oo=function(a,b){return{type:3,state:a,shift:b}};po=function(a,b){return{type:4,delta:a,shift:b}};
Thb=function(a){switch(a.type){case 0:return`R(${a.length})`;case 1:return`X(${a.length})`;case 2:return`T(${a.length})`;case 3:return`I(${Rhb(a.state)})${Shb(a.shift)}`;case 4:return`U(${Rhb(a.delta)})${Shb(a.shift)}`;default:throw new r(a);}};Rhb=function(a){return a!=null?a:"\u22a5"};Shb=function(a){return a!=null?`[${a.ei},${a.Fm}]`:""};
Vhb=function(a,b){return b&&a.MOa?new Uhb(a.ops.map(c=>c.type===3&&c.shift?oo(c.state,{ei:c.shift.ei+b,Fm:c.shift.Fm+b}):c.type===4&&c.shift?po(c.delta,{ei:c.shift.ei+b,Fm:c.shift.Fm+b}):c),a.pre,a.post,a.MOa):a};qo=function(a,b){const c=m(a.Hm);if(c.type===0)return a.LD(0,1),Whb;if(c.type===1)return a.LD(1,1),Xhb;if(c.type===2)return a.LD(2,1),Yhb;if(c.type!==b)throw Error();a.Hm=a.ops[a.i++];return c};Zhb=function(a){return a.every(()=>!1)};
$hb=function(a,b){ja(b.length>0);const c=a.length;b.forEach((d,e)=>a.list[c+e]=d);a.length+=b.length};aib=function(a){ja(a.wya<a.input.length,"{} >= {}",a.wya,a.input.length);return a.input[a.wya++]};bib=function(a,b){b=a.wya+b;ja(b<=a.input.length);const c=a.input.slice(a.wya,b);a.wya=b;return c};cib=function(a,b){a.$jb||(a.$jb=new Set);ja(!a.$jb.has(b),"duplicate modification: {}",b);a.$jb.add(b)};dib=function(a,b,c){cib(a,b);(a.Kyc||(a.Kyc=new Map)).set(b,c)};
eib=function(a,b,c){cib(a,b);(a.Jyc||(a.Jyc=new Map)).set(b,c)};fib=function(a,b){let {ei:c,Fm:d}=b;var e=a.Kyc;a=a.Jyc;if(e){const f=e.get(c);f!=null&&(c=f,e.delete(c))}a&&(e=a.get(d),e!=null&&(d=e,a.delete(d)));return c!==b.ei||d!==b.Fm?{ei:c,Fm:d}:b};ro=function(a,b,c){cib(a,b);c!=null&&(a.n6a||(a.n6a=new Map)).set(b,c)};so=function(a,b,c){(a.oQa||(a.oQa=new Map)).set(b,c)};to=function(a,b,c){(a.DPa||(a.DPa=new Map)).set(c,b)};gib=function({ei:a,Fm:b}){return{ei:b,Fm:a}};
hib=function(a,b){return a?!!b&&a.ei===b.ei&&a.Fm===b.Fm:!b};__c.iib=function(a){return a.filter(()=>!0)};uo=function(a,b){ja(Object.getPrototypeOf(a)===Object.prototype);const c={};for(const d in a)c[d]=b(a[d],d);return c};kib=function(a,b){return a===yo?b:b===yo?a:new jib(a,b)};zo=function(a,b){return b===yo?yo:new a(b)};oib=function(a){a:{a={items:zo(lib,a),dk:yo};for(b in a)if(a[b]!==yo){var b=new mib(a);break a}b=yo}return kib(nib,b)};
qib=function(a,b){la(a.JL!=null,"mutable not connected");try{a.n0(b),a.domain.isIdentity(b)||a.a2b&&a.a2b.reportChanged()}catch(c){throw a.error(c),c;}pib(a,b)};rib=function(a,b){if(a.clients){for(const c of a.clients.keys())try{c.error(b)}catch(d){}a.clients=void 0}};pib=function(a,b){la(a.JL!=null);if(a.clients){var c=!1;for(const d of a.clients.keys())try{d.next(b)}catch(e){try{d.error(`could not publish to incoming: ${e}`)}catch(f){}a.clients.delete(d);c=!0}c&&!a.clients.size&&(a.clients=void 0)}};
Ao=__c.Ao=function(a,b){a.Wfc||(a.Wfc={next:c=>{a.JL&&(a.a2b&&a.a2b.reportChanged(),pib(a,c),a.JL.next(c))},error:c=>{a.error(c)}});return new sib(a.Wfc,b)};Bo=__c.Bo=function(a,b,c){b=a.nA(b);a=a.connect(b,c);return{mutable:b,Ox:a}};Co=__c.Co=function(a,b,c,d){a.destroy(d,b);c.complete()};tib=function(a,b){let c=a.rows[b];c==null&&(c=a.rows[b]=a.Gkd++);return c};uib=function(a,b){let c=a.cols[b];c==null&&(c=a.cols[b]=a.Ekd++);return c};
vib=function(a,b,c,d=()=>!0){a.cols.spliceWithArray(b,0,Array(c));for(let e=0;e<a.rows.length;e++){const f=a.get(e,b-1);if(f!=null&&d(f))for(let g=b;g<b+c;g++)a.set(e,g,f)}};wib=function(a,b,c,d=()=>!0){a.rows.spliceWithArray(b,0,Array(c));for(let e=0;e<a.cols.length;e++){const f=a.get(b-1,e);if(f!=null&&d(f))for(let g=b;g<b+c;g++)a.set(g,e,f)}};xib=function(a,b){ja(a.NP(b),"invalid value: {}",b);return b};
yib=function(a,b,c){if(!a.tx(b,c))throw Error(`Invalid argument: ${a.stringify(b)} != ${a.stringify(c)}`);};Do=__c.Do=function(a){return new zib(a)};Eo=__c.Eo=function(...a){return a.length===1?new Aib(a[0]):new Bib(new Set(a))};Fo=__c.Fo=function(a,b){return new Cib(a,b,zo(lib,a.serializer))};__c.Fib=function(a,b){return new Dib(a,b,zo(Eib,b.serializer))};Go=__c.Go=function(a,b){return new Gib(a,b)};__c.Ho=function(a,b){return new Hib(a,b)};Io=__c.Io=function(a){return new Iib(a)};
Jib=function(a,b){ja(Number.isSafeInteger(a)&&Number.isSafeInteger(b)&&a<=b);return Do(c=>Number.isSafeInteger(c)&&a<=c&&c<=b)};Jo=__c.Jo=function(a,b){ja(Number.isFinite(a)&&Number.isFinite(b)&&a<=b);return Do(c=>Number.isFinite(c)&&a<=c&&c<=b)};Lo=__c.Lo=function(a){return a instanceof Ko?new Kib(a,zo(Lib,a.serializer)):new Mib(a,zo(Lib,a.w$b),zo(Lib,a.wta))};Oib=function(a){return new Nib(a)};Mo=__c.Mo=function(a){return new Pib(a,a.serializer)};No=__c.No=function(a){return new Qib(a,a.wta)};
Oo=__c.Oo=function(a){return Mo(Lo(a))};Sib=function(a,b,c){return c==null||a.component.isIdentity(c)?Rib:new Map([[b,c]])};Tib=function(a,b){return a.size?b.size?new Set([...a.keys(),...b.keys()]):a.keys():b.keys()};Uib=function(a,b,c){const d=Ao(a,g=>a.domain.update(b,g)),{mutable:e,Ox:f}=Bo(a.type,c,d);return{CZc:{to:f,from:d},value:e}};__c.Po=function(...a){[,a]=a.length===1?[void 0,a[0]]:a;return new Vib(a,zo(Eib,a.wta))};Qo=__c.Qo=function(a){return new Wib(a,a.serializer)};
__c.So=function({get:a,set:b,equals:c}){return new Xib(Ro(a,{set:b,equals:c}))};Zib=function(a,b,c){return Yib.of({...a,...b,...c})};$ib=function(...a){const b=new Set;for(const c of a)for(const d in c)ja(!b.has(d),'duplicate key: "{}"',d),b.add(d)};ajb=function(a,b){return Ao(a,c=>({[b]:c}))};bjb=function(a,b){return Ao(a,c=>({[b]:c}))};
cjb=function(a,b){if(!a)return b;if(!b)return a;const c=a.create,d=b.create;return{Sb:{...a.Sb,...b.Sb},attributes:{...a.attributes,...b.attributes},create:e=>{const {Sb:f,attributes:g}=c(e),{Sb:h,attributes:k}=d({...e,...f,...g});return{Sb:{...f,...h},attributes:{...g,...k}}}}};To=__c.To=function(a){return djb.Fi(a)};Uo=__c.Uo=function(a){return a.domain.Pg()};Vo=__c.Vo=function(a){return new __c.ejb(a,oib(a.wta))};Wo=__c.Wo=function(){throw Error("list not modifiable");};
__c.Xo=function(a,b){return a?b?(...c)=>{a(...c);b(...c)}:a:b};fjb=function(a,b){a=a.length;ja(0<=b&&b<a,"{} \u2209 [0, {})",b,a)};gjb=function(a,b){a=a.length;ja(0<b&&b<a,"{} \u2209 (0, {})",b,a)};__c.hjb=function(a,b){return a?b?{jb:__c.Xo(a.jb,b.jb),item:__c.Xo(a.item,b.item),dk:__c.Xo(a.dk,b.dk)}:a:b};ijb=function(a,b){a=a.Gca;ja(0<b&&b<a,"{} \u2209 (0, {})",0,a)};jjb=function(a,b){a=a.t3;ja(0<b&&b<a,"{} \u2209 (0, {})",0,a)};
Yo=__c.Yo=function(a,b,c){switch(b.type){case 0:case 1:switch(c.type){case 0:case 1:return a.change(b.state,c.state);case 2:return a.RY(b.state);default:throw new r(c);}case 2:switch(c.type){case 0:case 1:return a.i6a(c.state);case 2:return a.Lsa(b.state);default:throw new r(c);}default:throw new r(b);}};Zo=__c.Zo=function(a){const b=m(a.Hm);a.Hm=a.ops[a.i++];return b};__c.kjb=function(a,b){const c=m(a.Hm),d=c.Gca;ja(0<b&&b<=d);if(b<d){const [e,f]=c.RTb(b);a.Hm=f;return e}a.Hm=a.ops[a.i++];return c};
ljb=function(a,b){const c=m(a.Hm),d=c.t3;ja(0<b&&b<=d);if(b<d){const [e,f]=c.QTb(b);a.Hm=f;return e}a.Hm=a.ops[a.i++];return c};njb=function(a,b,c){switch(c.type){case 0:return b;case 1:return ja(b.type===1),new $o(a.component.apply(b.state,c.delta));case 3:return __c.mjb(a,b,c.oldState),c.newState;default:throw new r(c);}};
ojb=function(a,b,c){switch(c.type){case 0:return b;case 1:return ja(b.type===1),new $o(a.component.Vl(b.state,c.delta));case 3:return __c.mjb(a,b,c.newState),c.oldState;default:throw new r(c);}};ap=function(a,b,c){switch(b.type){case 0:return c.type===0&&b.state===c.state;case 1:return c.type===1&&a.component.zi(b.state,c.state);case 2:return c.type===2&&b.state===c.state;default:throw new r(b);}};__c.mjb=function(a,b,c){ja(ap(a,b,c),"{} != {}",b,c)};
__c.pjb=function(a,b){const c=__c.bp.Pg(),d=a.cursor(0,{...cp,dk:g=>c.retain(g)}),e={...cp,jb:g=>c.retain(g.length)},f={...cp,jb:g=>c.RY(g)};b.forEach({retain:g=>d.ho(g,e),delete:g=>d.ho(g,f),insert:g=>c.insert(g)});return c.build()};
qjb=function(a,b){const c=new dp,d=a.cursor();a=h=>{throw Error(String(h));};const e={...cp,jb:h=>c.retain(h.length)},f={...cp,jb:a},g={...cp,jb:()=>0,dk:a};b.forEach({retain:h=>d.VS(h,e),update:h=>{throw new r(h);},insert:h=>h.type!==2&&c.insert(h.state),change:(h,k)=>{h.type===2?(d.VS(h.length,f),k.type!==2&&c.insert(k.state)):(d.VS(h.length,g),k.type===2?c.delete(h.length):(ja(h.state===k.state,"non-reflexive change: {} != {}",h,k),c.retain(h.length)))}});return c.build()};__c.ep=function(a){return Object.keys(a)};
__c.fp=function(a,b,c){for(const [d,e]of Object.entries(a))c(d,e,b[d])};__c.rjb=function(a,b){return a.length?b.length?[...(new Set([...a,...b]))]:a:b};sjb=function(a,b){return{type:0,rG:a,bI:b}};tjb=function(a){return{type:1,length:a}};__c.ujb=function(a,b){return a&&b?a.so===b.so&&a.sn===b.sn:!a&&!b};__c.vjb=function(a,b){Object.entries(a).forEach(([c,d])=>d!=null&&b(d,c))};
wjb=function(a,b){const c=__c.ep(a),d=__c.ep(b);if(a===b||!c.length&&!d.length)return!0;if(c.length!==d.length)return!1;const e=__c.rjb(c,d);return c.length===e.length&&d.length===e.length&&e.every(f=>__c.ujb(a[f].r,b[f].r))};xjb=function(a,b={}){return{type:0,length:a,changes:b}};gp=function(a,b){return a?!!b&&a.from===b.from&&a.to===b.to:!b};
yjb=function(a,b){let c=0,d=0;for(const e of a.ega)switch(a=e.length,e.type){case 0:b.retain&&b.retain(a,c,d);c+=a;d+=a;break;case 1:b.insert&&b.insert(a,c,d);d+=a;break;default:throw new r(e.type);}};zjb=function(a,b,c){let {from:d,to:e}=a;d+=d>b?c:0;e+=e>b?c:0;return a.from!==d||a.to!==e?new ip(d,e):a};Ajb=function(a,b,c){for(const [d,e]of a){const f=zjb(e,b,c);f!==e&&a.set(d,f)}};
jp=function(a,b,c,d){for(const [e,f]of a){const g=f.Hca,h=f.Bca,k=g&&(b!=null?zjb(g,b,d):g),l=h&&(c!=null?zjb(h,c,d):h);k===g&&l===h||a.set(e,new Bjb(k,l))}};Cjb=function(a,b){return a.size?b.size?new Set([...a.keys(),...b.keys()]):a.keys():b.keys()};Djb=function(a,b){ma(a,b);return a};Ejb=function(a,b){return{key:a.bWa(b),value:b}};kp=__c.kp=function(a,b,c){return new Fjb(a,b,c)};Gjb=function(a,b){return a===b||a.size===b.size&&Array.from(a.keys()).every(c=>a.get(c)===b.get(c))};
Hjb=function(a,b){if(!a.size)return b;if(!b.size)return a;const c=new Map;for(const [e,f]of a){var d=b.get(e)||0;(d=f+d)&&c.set(e,d)}for(const [e,f]of b)a.has(e)||c.set(e,f);return c};Ijb=function(a,b){const c=new Map;for(const [d,e]of a)b(e)&&c.set(d,e);return c};Jjb=function(a){return new RegExp(`^${a}${"B"}${"[0-9b-df-hj-np-tv-zB-DF-HJ-NP-TV-Z]{14}"}$`)};__c.Kjb=function(a){ma(a.normalize(a.defaultValue),a.defaultValue)};__c.lp=function(a,b){return b!=null?a.decode(b):void 0};
__c.mp=function(a,b){return b!=null?a.encode(b):void 0};Ljb=function(a){a=a.split("/");return a.length===2?a[0]:void 0};Mjb=function(a){if(a.startsWith(`${__c.np}/`)){const [,b,c]=a.split("/");return[b,c]}};__c.Njb=function(a,b){if(b=Mjb(b)){const [c,d]=b;if(a.bed(c))return[c,d]}};__c.op=function(a,b,c,d){c=a.tqa(c);for(const e of Object.keys(b))a.KC(e)&&c(e)&&d(b[e],e)};__c.pp=function(a,b,c){const d={};a.copy(b,c,d);return d};
__c.Ojb=function(a,b,c){return a.attributes[c].aed?b[c]:b[c]!==a.attributes[c].defaultValue?b[c]:void 0};__c.Pjb=function(a,b,c){const d={};__c.op(a,b,"all",(e,f)=>d[f]=c(e,f));return d};__c.qp=function(a,b){const c={};for(const [d,e]of Object.entries(b))try{ja(a.KC(d)),c[d]=e!=null?a.attributes[d].normalize(e):void 0}catch(f){throw f;}return c};__c.Rjb=function(a){return new Qjb("block",a)};rp=__c.rp=function(a,b){return new Sjb(a,b)};sp=__c.sp=function(a,b,c){return new Tjb(a,b,c)};
tp=__c.tp=function(a,b){return new Ujb(a,b,b[0])};__c.Wjb=function(a){const b=(d,e)=>{if(typeof e==="string")return d[e]?d[e]:(d=Ljb(e))&&a.mWa[d]?a.mWa[d]:(e=Mjb(e))&&a.hw[e[0]]},c=new Proxy(a.static,{get:b,has:(d,e)=>b(d,e)!=null,ownKeys:d=>Object.keys(d)});return new __c.Vjb(c,new Set(Object.keys(a.static)),new Set(Object.keys(a.mWa)),new Set(Object.keys(a.hw)))};up=function(a){return{type:0,length:a}};Xjb=function(a){return{type:1,length:a}};vp=function(a,b){return a.LD(1,b).length};
wp=function(a,b){var c=Array.from(b).sort((f,g)=>f-g);if(!c.length)return Yjb;ja(c[0]>=0);b=new Map;a=a.Cd(c[c.length-1],0);let d=0,e=0;for(const f of c){for(c=a.head;d<f;){la(c!=null);switch(c.type){case 0:c=a.lA(Math.min(f-d,c.length));d+=c;e+=c;break;case 1:e+=vp(a,c.length);break;default:throw new r(c);}c=a.head}c&&c.type===1&&(e+=vp(a,c.length));if(d!==f)throw Error();b.set(d,e)}return b};
Zjb=function(a,b){var c=Array.from(b).sort((f,g)=>f-g);if(!c.length)return Yjb;ja(c[0]>=0);b=new Map;a=a.Cd(0,c[c.length-1]);let d=0,e=0;for(const f of c){for(c=a.head;e<f;){la(c!=null);switch(c.type){case 0:c=a.lA(Math.min(f-e,c.length));d+=c;e+=c;break;case 1:e+=vp(a,Math.min(f-e,c.length));break;default:throw new r(c);}c=a.head}if(e!==f)throw Error();b.set(e,d)}return b};$jb=function(a){return JSON.stringify(a,(b,c)=>c!=null?c:null)};xp=function(a){return new akb(a.gCd)};
ckb=function(a,b,c,d){var e=Math.max(a.Sq,b.Sq),f=Math.max(a.YA,b.YA);a=a.Cd(void 0,e,f);b=b.Cd(void 0,e,f);e=a.head;for(f=b.head;e||f;){if(e&&e.type===0||f&&f.type===0){const n=a.Ux(),p=b.Ux(),q=c.Ux();e=n;f=p;for(var g=q,h=d,k=e.head,l=f.head;k||l;){if(k&&k.type===0||l&&l.type===0){k=e.ww();l=f.ww();for(const u of bkb(k,l))g.um(u,h(u,e.attrs[u],f.attrs[u]))}else if(k&&l)k=Math.min(k.length,l.length),e.Go(k),f.Go(k),g.qC(k);else throw Error(`length mismatch: ${k} x ${l}`);k=e.head;l=f.head}n.finish();
p.finish();q.finish()}else if(e&&f)e=Math.min(e.length,f.length),yp(a,e),yp(b,e),c.rows(e);else throw Error(`length mismatch: ${e} x ${f}`);e=a.head;f=b.head}a.finish();b.finish()};ekb=function(a,b,c,d){return zp.isIdentity(c)&&zp.isIdentity(d)||b.items.isEmpty()?b:dkb("apply",a.gCd,b,c,d)};
dkb=function(a,b,c,d,e){const f=new Ap,[g,h]=a==="apply"?[c.items.Cd(e.pre),e.Cd(c.items.length,0)]:[c.items.Cd(e.post),e.Cd(0,c.items.length)];e=g.head;var k=h.head;for(c=0;e||k;){if(k&&k.type===1)vp(h,k.length),a==="apply"?f.Lc(k.length):g.Go(k.length);else if(e&&e.type===0){e=g.ww();const [n,p]=a==="apply"?[e.Cd(d.pre),d.Cd(e.length,0)]:[e.Cd(d.post),d.Cd(0,e.length)];e=a;k=new Ap;var l=n.head;let q=p.head;for(;l||q;){if(q&&q.type===1)vp(p,q.length),e==="apply"?k.Lc(q.length):n.Go(q.length);else if(l)l.type===
0?k.grad(n.ww()):q?(l=Math.min(l.length,q.length),n.Go(l),p.lA(l),k.Lc(l)):(n.Go(l.length),k.Lc(l.length));else throw Error(`length mismatch: ${l} vs ${q}`);l=n.head;q=p.head}e=k.build();e.isEmpty()||(f.grad(e),c=Math.max(c,e.length));n.finish();p.finish()}else if(e&&k)e=Math.min(k.length,e.length),g.Go(e),h.lA(e),f.Lc(e);else throw Error("length mismatch");e=g.head;k=h.head}g.finish();h.finish();a=f.build();return Bp.of(b,a,c,a.length)};fkb=function(a){return{type:1,length:a}};
yp=__c.yp=function(a,b){la(a.FX==null);return a.lWa.Go(b)};gkb=function(a,b,c,d){return c===d?!0:c&&d?a(b,c.rc,d.rc)&&a(b,c.r,d.r):!1};__c.hkb=function(a,b,c,d){if(!d)return c;ja(a(b,c,d.rc),"{} != {}",c,d.rc);return d.r};ikb=function(a,b,c,d){return gkb(a,b,c,d)?void 0:{t:c,b:d}};
__c.jkb=function(a,b,c){const d={};if(b&&c)for(const f of bkb(b,c)){var e=ikb(a,f,b[f],c[f]);e&&(d[f]=e)}else if(b)for(e of Cp(b))(c=ikb(a,e,b[e]))&&(d[e]=c);else if(c)for(const f of Cp(c))(b=ikb(a,f,void 0,c[f]))&&(d[f]=b);return Dp(d)?void 0:d};kkb=function(a,b,c){return bkb(b,c).every(d=>{var e=b&&b[d],f=c&&c[d];return e===f?!0:e&&f?gkb(a,d,e.t,f.t)&&gkb(a,d,e.b,f.b):!1})};Cp=__c.Cp=function(a){return Object.keys(a)};
bkb=function(a,b){return a&&b?[...(new Set([...Cp(a),...Cp(b)]))]:a?Cp(a):b?Cp(b):[]};Dp=__c.Dp=function(a){return Cp(a).length===0};lkb=function(a,b,c,d){const e=__c.qp(a.wh,__c.pp(a.wh,b,d)),f=__c.Pjb(a.wh,e,(h,k)=>__c.Ojb(a.wh,e,k)),g={};__c.op(a.wh,f,b,(h,k)=>{g[k]={o:c&&c[k],n:f[k]}});return g};nkb=function(a,b){b.forEach(a.wh.KC,(c,d,e)=>{const f=a.grid.get(c,d),g=f?{...f}:{};mkb(e,(h,k)=>{h!=null&&(la(a.wh.TDa(k,f&&f[k],h.o)),g[k]=h.n)});a.write(c,d,g)})};
mkb=function(a,b){for(const c of Object.keys(a))b(a[c],c)};okb=function(a,b){return a&&b?[...(new Set([...Object.keys(a),...Object.keys(b)]))]:a?Object.keys(a):b?Object.keys(b):[]};Ep=__c.Ep=function(a,b,c,d){la(0<=a);la(0<=b);la(a<=c);la(b<=d);return{left:a,top:b,right:c,bottom:d}};__c.pkb=function(a,b){return{span:a,state:b}};qkb=function(a){const b=a.rows[a.y];if(b!=null)for(;b.cells[a.x]==null&&a.x<b.cells.length;)a.x++};rkb=function(a){for(;a.rows[a.y]==null&&a.y<a.rows.length;)a.y++};
Fp=function(a,b){return a.right===b.right&&a.bottom===b.bottom};
skb=function(a,b,c,d){if(zp.isIdentity(c)&&zp.isIdentity(d))return b;const e=new Set,f=new Set;b.forEach((l,n,p)=>{e.add(l);f.add(n);switch(p.type){case 1:p.bounds&&e.add(p.bounds.o.right);p.bounds&&f.add(p.bounds.o.bottom);p.bounds&&e.add(p.bounds.n.right);p.bounds&&f.add(p.bounds.n.bottom);break;case 0:p.o&&e.add(p.o.right);p.o&&f.add(p.o.bottom);p.n&&e.add(p.n.right);p.n&&f.add(p.n.bottom);break;default:throw new r(p);}});const g=wp(c,e),h=wp(d,f),k=new Gp;b.forEach((l,n,p)=>{switch(p.type){case 1:k.add(m(g.get(l)),
m(h.get(n)),a.update(p.bounds&&{o:{right:m(g.get(p.bounds.o.right)),bottom:m(h.get(p.bounds.o.bottom))},n:{right:m(g.get(p.bounds.n.right)),bottom:m(h.get(p.bounds.n.bottom))}},p.delta));break;case 0:k.add(m(g.get(l)),m(h.get(n)),a.replace(p.o&&{right:m(g.get(p.o.right)),bottom:m(h.get(p.o.bottom)),state:p.o.state},p.n&&{right:m(g.get(p.n.right)),bottom:m(h.get(p.n.bottom)),state:p.n.state}));break;default:throw new r(p);}});return k.build()};
vkb=function(a,b,c){const d=new Gp;tkb(b.Cd(),c.Cd(),(e,f,g,h)=>{b==null&&c==null||d.add(e,f,ukb(a,g,h))});return d.build()};tkb=function(a,b,c){var d=a.head;let e=b.head;for(;d||e;){d=d==null?1:e==null?-1:d===e||d.y===e.y&&d.x===e.x?0:d.y<e.y||d.y===e.y&&d.x<e.x?-1:1;if(d<0){const {x:f,y:g,value:h}=a.Hu();c(f,g,h,void 0)}else if(d>0){const {x:f,y:g,value:h}=b.Hu();c(f,g,void 0,h)}else{const {x:f,y:g,value:h}=a.Hu();({value:d}=b.Hu());c(f,g,h,d)}d=a.head;e=b.head}a.finish();b.finish()};
ukb=function(a,b,c){if(b==null)return c;if(c==null)return b;switch(b.type){case 0:a:switch(c.type){case 1:la(b.n!=null);c.bounds&&la(Fp(b.n,c.bounds.o));a=a.replace(b.o,{...(c.bounds?c.bounds.n:b.n),state:c.delta?a.component.apply(b.n.state,c.delta):b.n.state});break a;case 0:la(Hp(a,b.n,c.o));a=a.replace(b.o,c.n);break a;default:throw new r(c);}return a;case 1:a:switch(c.type){case 1:b.bounds&&c.bounds&&la(Fp(b.bounds.n,c.bounds.o));const d=b.bounds&&c.bounds?{o:b.bounds.o,n:c.bounds.n}:b.bounds||
c.bounds;b=b.delta&&c.delta?a.component.compose(b.delta,c.delta):b.delta||c.delta;a=a.update(d,b);break a;case 0:la(c.o!=null);b.bounds&&la(Fp(b.bounds.n,c.o));a=a.replace({...(b.bounds?b.bounds.o:c.o),state:b.delta?a.component.Vl(c.o.state,b.delta):c.o.state},c.n);break a;default:throw new r(c);}return a;default:throw new r(b);}};Hp=function(a,b,c){return b===c?!0:b&&c?Fp(b,c)&&a.component.zi(b.state,c.state):!1};
ykb=function(a,b,c,d,e,f){const g=d.type===0?d.n:d.bounds&&d.bounds.n,h=g?g.bottom:c;for(let n=Math.max(c,f.yi);n<=h;n++)wkb(f,n*2),f.Ux(),f.o8b((p,q)=>{e.append(Ep(p,q,p,q))}),f.veb();f.yi<=h&&wkb(f,(h+1)*2);if(g==null)return{uab:b}=xkb(e,{left:b,top:c,right:b,bottom:c}),b?a.replace(void 0,void 0):void 0;const {uab:k,MQb:l}=xkb(e,{left:b,top:c,right:g.right,bottom:g.bottom});if(k){if(l)return a.update({o:{right:g.right,bottom:g.bottom},n:l},void 0);la(d.type===0);return a.replace(d.n,void 0)}};
Akb=function(a,b){zkb(a,b.left,b.top);a.append(b)};xkb=function(a,b){zkb(a,b.left,b.top);if(a.readBuffer(b.left,b.top))return{uab:!0,MQb:void 0};let c=b.left,d=b.top;for(var e=b.left+1;e<=b.right;e++){if(a.readBuffer(e,b.top))return{uab:!0,MQb:{right:c,bottom:d}};c=e}for(e=b.top+1;e<=b.bottom;e++){for(let f=b.left;f<=c;f++)if(a.readBuffer(f,e))return{uab:!0,MQb:{right:c,bottom:d}};d=e}return{uab:!1,MQb:void 0}};
zkb=function(a,b,c){c>a.dfa&&(a.buffer.splice(0,c-a.dfa),a.dfa=c,a.Bua=0);b>a.Bua&&a.buffer[0]&&(a.buffer[0].splice(0,b-a.Bua),a.Bua=b)};Bkb=function(a,b,c){c-=a.dfa;a=c===0?b-a.Bua:b;la(c>=0&&a>=0);return{OGd:a,SGd:c}};Ckb=function(a){const b=zp.Pg();a=a.Cd();let c=a.head;for(;c;){switch(c.type){case 0:b.retain(c.length*2);a.lA(c.length);break;case 1:b.expand(c.length*2);vp(a,c.length);break;default:throw new r(c);}c=a.head}return b.build()};
wkb=function(a,b){for(la(b>=a.ima);b>a.ima;){var c=a.Cd.head;la(c!=null);c.type===0?(a.Ux(),a.veb()):(c=Math.min(c.length,b-a.ima),yp(a.Cd,c),a.ima+=c)}};Dkb=function(a,b){const c=new Gp,d=new Set;for(let e=b.top;e<=b.bottom;e++)for(let f=b.left;f<=b.right;f++){const g=a.grid.get(e,f);g==null||d.has(g)||(d.add(g),c.add(g.span.left,g.span.top,a.domain.replace({right:g.span.right,bottom:g.span.bottom,state:a.type.fc(g.value)},void 0)))}return a.domain.He({cells:c.build()})};
Ekb=function(a,b){return c=>{const {left:d,top:e}=b.dod.get();return a.domain.He({cells:(new Gp).add(d,e,a.domain.update(void 0,c)).build()})}};Jp=function(a,b,c,d){a.Ek.set(b,new Ip(c,d));return a};Gkb=function(a,b,c,d){a.Ek.set(b,new Fkb(c,d));return a};Hkb=function(a,b){return a.size?b.size?new Set([...a.keys(),...b.keys()]):a.keys():b.keys()};
Ikb=function(a,b){if(zp.isIdentity(b))return a;const c=new Set;for(const e of a.values())switch(e.type){case 0:e.oldValue!=null&&c.add(e.oldValue);e.newValue!=null&&c.add(e.newValue);break;case 1:c.add(e.oldValue);c.add(e.newValue);break;default:throw new r(e);}const d=wp(b,c);return Vg(a,e=>{switch(e.type){case 0:return new Ip(e.oldValue!=null?m(d.get(e.oldValue)):void 0,e.newValue!=null?m(d.get(e.newValue)):void 0);case 1:return new Fkb(m(d.get(e.oldValue)),m(d.get(e.newValue)));default:throw new r(e);
}})};Kp=function(a){return{start:`${"a/"}${a}`,end:`${"b/"}${a}`}};Jkb=function(a){la(a.startsWith("a/")||a.startsWith("b/"));return a.substring(2)};Kkb=function(a){const b=new Map;for(const [c,d]of a)a=Kp(c),b.set(a.start,d.start),b.set(a.end,d.end);return b};Lkb=function(a){const b=new Map;a=new Map(a);for(const c of a.keys()){const d=Jkb(c),e=Kp(d),f=m(a.get(e.start)),g=m(a.get(e.end));a.delete(e.start);a.delete(e.end);b.set(d,Lp.from({start:f,end:g}))}if(a.size)throw Error();return b};
Mkb=function(a){const b=Mp.Pg();for(const [d,e]of a.Xe)switch(e.type){case "replace":var c=Kp(d);Jp(b,c.start,e.oldValue?e.oldValue.start:void 0,e.newValue?e.newValue.start:void 0);Jp(b,c.end,e.oldValue?e.oldValue.end:void 0,e.newValue?e.newValue.end:void 0);break;case "update":c=Kp(d);e.start&&Gkb(b,c.start,e.start.oldValue,e.start.newValue);e.end&&Gkb(b,c.end,e.end.oldValue,e.end.newValue);break;default:throw new r(e);}return Mp.He(a.axis,b.build().Ek)};
Qkb=function(a){const b=new Map,c=new Map(a.Ek);for(const [f,g]of c){const h=Jkb(f),k=Kp(h);switch(g.type){case 0:var d=m(c.get(k.start)),e=m(c.get(k.end));la(d.type===g.type);la(e.type===g.type);la(d.oldValue!=null===(e.oldValue!=null));la(d.newValue!=null===(e.newValue!=null));c.delete(k.start);c.delete(k.end);b.set(h,new Nkb(d.oldValue!=null&&e.oldValue!=null?Lp.from([d.oldValue,e.oldValue]):void 0,d.newValue!=null&&e.newValue!=null?Lp.from([d.newValue,e.newValue]):void 0));break;case 1:d=c.get(k.start);
e=c.get(k.end);d&&la(d.type===g.type);e&&la(e.type===g.type);c.delete(k.start);c.delete(k.end);b.set(h,new Okb(d?Np.from(d):void 0,e?Np.from(e):void 0));break;default:throw new r(g);}}if(c.size)throw Error();return Pkb.create(a.axis,b)};Pp=function(a,b,c){const {x:d,y:e,...f}=a;ja(zp.xk(d,Op(b)));ja(zp.xk(e,Op(c)));return f};
Op=function(a){const b=zp.Pg();a.ops.forEach(c=>{switch(c.type){case 0:b.retain(c.length);break;case 1:b.expand(c.length);break;case 2:b.retain(c.length);break;case 3:b.expand(1);break;case 4:b.retain(1);break;default:throw new r(c);}});return b.build()};Rkb=function(a,b){let c=a.items[b];c==null&&(c=a.items[b]={});return c};Qp=function(a,b){if(b!=null)return m(a.xed.get(b))};Skb=function(a,b){let c;for(let d=b.top;d<=b.bottom&&!(c=a.yya(d));d++);return c};
Tkb=function(a,b){let c;for(let d=b.left;d<=b.right&&!(c=a.xya(d));d++);return c};Ukb=function(a,b){let c;for(let d=b.bottom;d>=b.top&&!(c=a.yya(d));d--);return c};Vkb=function(a,b){let c;for(let d=b.right;d>=b.left&&!(c=a.xya(d));d--);return c};Wkb=function(a,b){const c=a.j1(b.Mg),d=a.e4(b.Sg),e=a.j1(b.yk||b.Mg);a=a.e4(b.Al||b.Sg);ja(c!=null&&d!=null&&e!=null&&a!=null);ja(d<=a&&c<=e);return{left:c,top:d,right:e,bottom:a}};Xkb=function(...a){return b=>{for(const c of a){const d=c(b);if(d)return d}}};
Ykb=function(a){return b=>{const c=[];if(b==="")return{s:b,value:c};for(;;){const d=a(b);if(!d||d.s===b)return{s:b,value:c};c.push(...d.value);b=d.s}}};
$kb=function(a){const b=a.pR,c=__c.So({get:()=>b.cols.reduce((n,p)=>n+p.width,0),set:n=>{la(n>0);n/=c.value;for(const p of b.cols)p.width*=n}}),d=__c.So({get:()=>b.rows.reduce((n,p)=>n+p.height,0),set:n=>{la(n>0);n/=d.value;for(const p of b.rows)p.height*=n,p.minHeight=p.height}}),e=Ro(()=>{const n=new Map;for(const p of b.cols)n.set(p.id,p);return n}),f=Ro(()=>{const n=new Map;for(const p of b.rows)n.set(p.id,p);return n}),g=Zkb(n=>b.rows.has(n)?(n=b.rows.ik(n))?g(n)+1:0:-1),h=Zkb(n=>b.cols.has(n)?
(n=b.cols.ik(n))?h(n)+1:0:-1),k=Zkb(n=>(n=b.cols.ik(n))?k(n)+n.width:0),l=Zkb(n=>(n=a.pR.rows.ik(n))?l(n)+n.height:0);return{attributes:{width:c,height:d},Sb:{layout:b,rows:b.rows,cols:b.cols,yob:n=>f.get().get(n),qab:n=>e.get().get(n),K3a:n=>b.rows.lgc(n),LUa:n=>b.cols.lgc(n),d4:g,i1:h,Kc:k,Nc:l}}};Rp=__webpack_require__(519427);alb=Rp._isComputingDerivation;__c.blb=Rp.comparer;Ro=__c.Ro=Rp.computed;clb=Rp.createAtom;Sp=Rp.observable;dlb=Rp.ObservableMap;__c.elb=__webpack_require__(481922).C;__c.flb=__webpack_require__(119930).xQ;__c.glb=__webpack_require__(497827).h;__c.hlb=__webpack_require__(318386).U;var ilb,Zkb;ilb=__webpack_require__(635872);__c.jlb=ilb.Om;Zkb=ilb.kq;var mlb,nlb,plb,rlb;__c.klb=/^$|^(https?|ftp|tel|sms|mailto|shortcuts):(\/\/|[^/])[^ ]+(\/|$)|^[^: ]+(\/|$)|^[\w.]+:\d+(\/|$)/;__c.llb=/^#[0-9a-f]{6}$/;mlb=/^#[0-9a-f]{6}$|^transparent$/;nlb=/^#[0-9a-f]{6}$|^inherit$/;__c.olb=/^[0-9]+(\.[0-9]+)?$/;plb=/^[0-9]+(\.[0-9]+)?px$|^inherit$/;__c.qlb=/^-?[0-9]+(\.[0-9]+)?%$/;rlb=/^(([1-9]|10)( ([1-9]|10)){0,9})?$|^inherit$/;var slb,tlb;Tp=__c.Tp=class{static equals(a,b){return a?!!b&&a.equals(b):!b}map(a,b,c,d){return new slb(this,a,b,c,d)}};
slb=class extends Tp{isIdentity(a){return this.component.isIdentity(this.X4(a))}compose(a,b){return this.eMa(this.component.compose(this.X4(a),this.X4(b)))}transform(a,b){a=this.component.transform(this.X4(a),this.X4(b));return Jhb(a,c=>this.eMa(c))}Jl(a){return this.eMa(this.component.Jl(this.X4(a)))}xk(a,b){return a===b||this.component.xk(this.X4(a),this.X4(b))}identity(a){return this.eMa(this.component.identity(this.ola(a)))}apply(a,b){const c=this.ola(a);b=this.component.apply(c,this.X4(b));return c===
b?a:this.ojb(b)}Vl(a,b){const c=this.ola(a);b=this.component.Vl(c,this.X4(b));return c===b?a:this.ojb(b)}zi(a,b){return a===b||this.component.zi(this.ola(a),this.ola(b))}equals(a){return this===a}constructor(a,b,c,d,e){super();this.component=a;this.eMa=b;this.X4=c;this.ojb=d;this.ola=e}};jo=__c.jo=class{static vs(){return new tlb}constructor(a,b,c,d){this.Fu=a;this.cv=b;this.Yva=c;this.yCa=d}};tlb=class{build(a,b){return new jo(a,b,this.Yva,this.yCa)}constructor(){this.yCa=this.Yva=!1}};var ulb=class extends Tp{isIdentity(){return!0}compose(){}transform(){return ko()}Jl(){}xk(){return!0}identity(){}apply(a){return a}Vl(a){return a}zi(a,b){return this.tx(a,b)}equals(a){return this===a}constructor(a){super();this.tx=a}};var Nib=class{toString(){return`U(${this.delta})`}constructor(a){this.delta=a;this.type=0}},vlb=class{toString(){return`R(${this.oldState}, ${this.newState})`}constructor(a,b){this.oldState=a;this.newState=b;this.type=1}},wlb=class extends Tp{update(a){return this.component.isIdentity(a)?void 0:new Nib(a)}replace(a,b){return new vlb(a,b)}isIdentity(a){return a==null||a.type===0&&this.component.isIdentity(a.delta)}compose(a,b){if(a==null)return b;if(b==null)return a;switch(a.type){case 0:switch(b.type){case 0:return this.update(this.component.compose(a.delta,
b.delta));case 1:return this.replace(this.component.Vl(b.oldState,a.delta),b.newState);default:throw new r(b);}case 1:switch(b.type){case 0:return this.replace(a.oldState,this.component.apply(a.newState,b.delta));case 1:return io(this.component,a.newState,b.oldState),this.replace(a.oldState,b.newState);default:throw new r(b);}default:throw new r(a);}}transform(a,b){if(a==null||b==null)return ko(b,a);switch(a.type){case 0:switch(b.type){case 0:return Jhb(this.component.transform(a.delta,b.delta),c=>
this.update(c));case 1:return a=this.component.apply(b.oldState,a.delta),new jo(this.replace(a,b.newState),void 0,!1,!0);default:throw new r(b);}case 1:switch(b.type){case 0:return b=this.component.apply(a.oldState,b.delta),lo(this.replace(b,a.newState));case 1:return io(this.component,a.oldState,b.oldState),lo(this.replace(b.newState,a.newState));default:throw new r(b);}default:throw new r(a);}}Jl(a){if(a==null)return a;switch(a.type){case 0:return this.update(this.component.Jl(a.delta));case 1:return this.replace(a.newState,
a.oldState);default:throw new r(a);}}xk(a,b){return a===b?!0:a==null||b==null?a===b:a.type===0&&b.type===0?this.component.xk(a.delta,b.delta):a.type===1&&b.type===1?this.component.zi(a.oldState,b.oldState)&&this.component.zi(a.newState,b.newState):!1}identity(){}apply(a,b){if(b==null)return a;switch(b.type){case 0:return this.component.apply(a,b.delta);case 1:return io(this.component,a,b.oldState),b.newState;default:throw new r(b);}}Vl(a,b){if(b==null)return a;switch(b.type){case 0:return this.component.Vl(a,
b.delta);case 1:return io(this.component,a,b.newState),b.oldState;default:throw new r(b);}}zi(a,b){return this.component.zi(a,b)}equals(a){return this===a||a instanceof wlb&&this.component.equals(a.component)}constructor(a){super();this.component=a}};var xlb=class extends Tp{isIdentity(a){return a==null||this.component.isIdentity(a)}compose(a,b){ja(a==null===(b==null));return a!=null&&b!=null?this.component.compose(a,b):void 0}transform(a,b){ja(a==null===(b==null));return a!=null&&b!=null?this.component.transform(a,b):ko(b,a)}Jl(a){return a!=null?this.component.Jl(a):void 0}xk(a,b){return a!=null&&b!=null&&this.component.xk(a,b)||a==null&&b==null}identity(a){return a!=null?this.component.identity(a):void 0}apply(a,b){ja(a==null===(b==null));return a!=
null&&b!=null?this.component.apply(a,b):void 0}Vl(a,b){ja(a==null===(b==null));return a!=null&&b!=null?this.component.Vl(a,b):void 0}zi(a,b){return a===b||a!=null&&b!=null&&this.component.zi(a,b)}equals(a){return this===a||a instanceof xlb&&this.component.equals(a.component)}constructor(a){super();this.component=a;ja(!(a instanceof xlb))}};var Mhb={type:0,length:1},Nhb={type:1,length:1},Phb={type:2,length:1},Xhb=oo(),Whb=po(),Yhb=po(new vlb),Uhb=class{toString(){return this.ops.map(Thb).join("")}constructor(a,b,c,d){this.ops=a;this.pre=b;this.post=c;this.MOa=d}},ylb=new Uhb([],0,0,0),zlb=class{E9(a){if(this.mode!==a){switch(this.mode){case void 0:break;case 0:this.ops.push(no(this.acc));this.pre+=this.acc;this.post+=this.acc;this.acc=0;break;case 1:this.ops.push(Ohb(this.acc));this.post+=this.acc;this.acc=0;break;case 2:this.ops.push(Qhb(this.acc));
this.pre+=this.acc;this.post+=this.acc;this.acc=0;break;case 3:case 4:break;default:throw new r(this.mode);}this.mode=a}}accumulate(a,b=1){ja(b>=0,"{} < 0",b);b&&(this.E9(a),this.acc+=b);return this}uQb({ei:a,Fm:b}){const c=this.ops.length,d=this.P8||(this.P8=new Map),e=this.MBa||(this.MBa=new Map);ja(!d.has(a),"duplicate record: {}",a);ja(!e.has(b),"duplicate recall: {}",b);d.set(a,c);e.set(b,c)}append(a,b){switch(a.type){case 0:return this.retain(a.length);case 1:return this.expand(a.length);case 2:return this.Lsa(a.length);
case 3:var c=a.shift;if(!b&&(b=a.state,c&&c.ei===c.Fm&&(c=void 0,a=oo(b)),b==null&&c==null))return this.expand();this.E9(a.type);c&&this.uQb(c);this.ops.push(a);this.post++;return this;case 4:c=a.shift;if(!b)if(b=a.delta,c&&c.ei===c.Fm&&(c=void 0,a=po(b)),b==null){if(c==null)return this.retain()}else if(b.type===1&&b.oldState==null&&b.newState==null&&c==null)return this.Lsa();this.E9(a.type);c&&this.uQb(c);this.ops.push(a);this.pre++;this.post++;return this;default:throw new r(a);}}retain(a){return a==
null||typeof a==="number"?this.accumulate(0,a):this.append(po(void 0,a))}expand(a){return a==null||typeof a==="number"?this.accumulate(1,a):this.append(oo(void 0,a))}Lsa(a){return a==null||typeof a==="number"?this.accumulate(2,a):this.append(po(this.component.replace(void 0,void 0),a))}insert(a,b){return this.append(oo(a,b))}update(a,b){return this.append(po(a!=null?this.component.update(a):void 0,b))}i6a(a){return this.append(po(this.component.replace(void 0,a)))}RY(a){return this.append(po(this.component.replace(a,
void 0)))}change(a,b,c){return this.append(po(this.component.replace(a,b),c))}build(a){this.mode!==0&&this.E9();if(a&&a.eMc())return a.Wec(this.ops);if(!this.P8&&!this.MBa)return new Uhb(this.ops,this.pre,this.post,0);a=this.ops;const b=m(this.P8);var c=[...b.keys()];if(c.some((g,h)=>g!==h)){const g=new Map;c.forEach((h,k)=>g.set(h,k));for(const h of b.values())switch(c=a[h],c.type){case 3:var d=c.shift,e=g.get(d.ei),f=g.get(d.Fm);if(e!==d.ei||f!==d.Fm)a[h]=oo(c.state,{ei:e,Fm:f});break;case 4:d=
c.shift;e=g.get(d.ei);f=g.get(d.Fm);if(e!==d.ei||f!==d.Fm)a[h]=po(c.delta,{ei:e,Fm:f});break;case 0:case 1:case 2:throw Error(`INSERT | UPDATE expected: ${Thb(c)}`);default:throw new r(c);}}return new Uhb(a,this.pre,this.post,b.size)}constructor(a){this.component=a;this.ops=[];this.acc=this.post=this.pre=0;this.MBa=this.P8=this.mode=void 0}},Alb=class{static create(a,b,c){ja(b>=0,"{} < 0",b);ja(c>=0,"{} < 0",c);a=(b=Math.max(0,b-a.pre,c-a.post))?[...a.ops,no(b)]:a.ops;return new Alb(a)}get head(){return this.Hm}LD(a,
b=1){const c=m(this.Hm);if(c.type!==a)throw Error();const d=c.length;ja(0<b&&b<=d,"{} \u2209 (0, {}]",b,d);if(b<d)switch(a){case 0:return this.Hm=no(d-b),no(b);case 1:return this.Hm=Ohb(d-b),Ohb(b);case 2:return this.Hm=Qhb(d-b),Qhb(b);default:throw new r(a);}else return this.Hm=this.ops[this.i++],c}constructor(a){this.ops=a;this.i=0;this.Hm=a[this.i++]}},Blb=class{uQb(a,{ei:b,Fm:c}){const d=this.P8||(this.P8=new Map),e=this.MBa||(this.MBa=new Map);la(!d.has(b),"already recorded: {}",b);la(!e.has(c),
"already recalled: {}",c);d.set(b,a);e.set(c,this.length)}append(a,b){b?this.uQb(a,b):a!=null&&(this.list[this.length]=a);this.length++;return this}expand(a=1){ja(a>=0,"{} < 0",a);this.length+=a;return this}build(){const a=this.list;if(this.P8||this.MBa){const c=m(this.P8);var b=m(this.MBa);ma(c.size,b.size);for(const [d,e]of b)la(c.has(d),"recall has no record: {}",d),b=c.get(d),b!=null&&(a[e]=b)}this.U5c!=null&&ma(this.length,this.U5c);return a}constructor(a){this.U5c=a;this.list=[];this.length=
0;this.MBa=this.P8=void 0}},Clb=class{static create(a,b){a.length<b&&(a=a.slice(),a.length=b);return new Clb(a)}finish(){ma(this.wya,this.input.length)}constructor(a){this.input=a;this.wya=0}},Dlb=class{eMc(){return!!this.$jb}Wec(a){const b=new zlb(this.component);for(const c of a)switch(c.type){case 3:b.append(this.b7c(c));break;case 4:b.append(this.c7c(c));break;case 0:case 1:case 2:b.append(c);break;default:throw new r(c);}return b.build()}constructor(a){this.component=a;this.Jyc=this.Kyc=this.$jb=
void 0}},Elb=class extends Dlb{b7c(a){if(!a.shift)return a;const b=a.state,c=a.shift;var d=this.n6a&&this.n6a.get(c.ei);d=this.component.apply(b,d);const e=fib(this,c);return d!==b||e!==c?oo(d,e):a}c7c(a){if(!a.shift)return a;const b=a.delta,c=a.shift;var d=this.n6a&&this.n6a.get(c.ei);d=this.component.compose(b,d);const e=fib(this,c);return d!==b||e!==c?po(d,e):a}constructor(...a){super(...a);this.n6a=void 0}},Flb=class extends Dlb{eMc(){return super.eMc()||!!this.DPa||!!this.oQa}b7c(a){if(!a.shift)return a;
const b=a.shift,c=fib(this,b);if(c!==b)throw Error(`${JSON.stringify(c)} != ${JSON.stringify(b)}`);return a}c7c(a){const b=a.delta,c=a.shift;var d=this.DPa;if(d){var e=d.get(a);if(e==null)e=a.delta;else{d.delete(a);d=m(this.oQa);var f=d.get(e);d.delete(e);e=f}}else e=a.delta;d=c&&fib(this,c);return e!==b||d!==c?po(e,d):a}Wec(a){a=super.Wec(a);if(this.DPa&&this.DPa.size)throw Error(`unconsumed setSurrogates: ${[...this.DPa.values()]}`);if(this.oQa&&this.oQa.size)throw Error(`unconsumed subSurrogates: ${[...this.oQa.keys()]}`);
return a}constructor(...a){super(...a);this.oQa=this.DPa=void 0}},Glb=class extends Tp{Pg(){return new zlb(this.component)}isIdentity(a){return!a.ops.length||a.ops.every(b=>{switch(b.type){case 0:return!0;case 4:return!b.shift&&this.component.isIdentity(b.delta);case 2:case 1:case 3:return!1}throw new r(b);})}compose(a,b){if(!a.ops.length)return b;if(!b.ops.length)return a;const c=this.component,d=this.Pg(),e=new Elb(c),f=Alb.create(a,0,b.pre),g=Alb.create(Vhb(b,a.MOa),a.post,0);for(var h=f.head,
k=g.head;h||k;){if(k)if(k.type===1)d.append(g.LD(k.type,k.length));else if(k.type===3)d.append(qo(g,k.type));else if(h)if(h.type===1)switch(k.type){case 2:case 0:var l=Math.min(h.length,k.length);f.LD(h.type,l);g.LD(k.type,l);d.append(Ohb(l));break;case 4:l=qo(f,h.type);k=qo(g,k.type);h=k.shift;d.append(oo(c.apply(l.state,k.delta),h));break;default:throw new r(k);}else if(h.type===3){l=qo(f,h.type);k=qo(g,k.type);h=l.shift;var n=k.shift;h==null?d.append(oo(c.apply(l.state,k.delta),n)):n==null?(d.append(l),
ro(e,h.Fm,k.delta)):(d.append(oo(l.state,{ei:h.ei,Fm:n.Fm})),ro(e,h.Fm,k.delta),eib(e,n.ei,h.Fm))}else h.type===4||k.type===4?(k=qo(f,4),l=qo(g,4),h=k.shift,n=l.shift,h==null?d.append(po(c.compose(k.delta,l.delta),n)):n==null?(d.append(k),ro(e,h.Fm,l.delta)):(d.append(po(k.delta,{ei:h.ei,Fm:n.Fm})),ro(e,h.Fm,l.delta),eib(e,n.ei,h.Fm))):(l=Math.min(h.length,k.length),h=f.LD(h.type,l),k=g.LD(k.type,l),d.append(h.type===2||k.type===2?Qhb(l):no(l)));else throw Error(`length mismatch: ${a} ; ${b}`);else throw Error(`length mismatch: ${a} ; ${b}`);
h=f.head;k=g.head}return d.build(e)}transform(a,b){if(!a.ops.length||!b.ops.length)return ko(b,a);const c=this.component,d=Alb.create(a,b.pre,0),e=Alb.create(Vhb(b,a.MOa),a.pre,0),f=this.Pg(),g=this.Pg(),h=jo.vs(),k=new Flb(c),l=new Flb(c);for(var n=d.head,p=e.head;n||p;){if(n&&n.type===3)if(p=qo(d,n.type),p.shift){var q=p.shift;n=po();g.append(n,"nocollapse");f.append(p);to(k,q.Fm,n);so(k,q.ei)}else g.append(Mhb),f.append(p);else if(n&&n.type===1)p=d.LD(n.type,n.length),g.append(no(p.length)),f.append(p);
else if(p&&p.type===3)if(p=qo(e,p.type),p.shift){n=p.shift;q=n.ei;n=n.Fm;var u=-q-1,w=po(void 0,{ei:-n-1,Fm:n});g.append(p);f.append(w);to(l,n,w);so(l,q);dib(l,u,q)}else g.append(p),f.append(Mhb);else if(p&&p.type===1)q=e.LD(p.type,p.length),g.append(q),f.append(no(p.length));else if(n&&p)if(n.type===4||p.type===4){q=qo(d,n.type);n=qo(e,p.type);const {Fu:x,cv:z}=mo(h,c.transform(q.delta,n.delta));p=q.shift;n=n.shift;if(p)if(n){q=n.ei;n=n.Fm;u=p.ei;p=p.Fm;w=-q-1;const B=po(void 0,{ei:-n-1,Fm:n}),C=
po(void 0,{ei:q,Fm:n});g.append(C);f.append(B);to(k,p,C);to(l,n,B);so(k,u,x);so(l,q,z);dib(l,w,u);eib(l,q,p)}else q=p.ei,n=p.Fm,u=po(),g.append(u,"nocollapse"),f.append(po(z,p)),to(k,n,u),so(k,q,x);else n?(p=n.ei,q=n.Fm,u=-p-1,w=po(void 0,{ei:-q-1,Fm:q}),g.append(po(x,n)),f.append(w),to(l,q,w),so(l,p,z),dib(l,u,p)):(g.append(po(x)),f.append(po(z)))}else q=Math.min(n.length,p.length),n=d.LD(n.type,q),p=e.LD(p.type,q),n.type===2&&p.type===2?g.append(no(p.length)):g.append(p),f.append(n);else throw Error(`length mismatch (${a} x ${b})`);
n=d.head;p=e.head}return h.build(g.build(k),f.build(l))}Jl(a){if(!a.ops.length)return a;const b=this.Pg(),c=new Elb(this.component);for(const d of a.ops)switch(d.type){case 0:case 1:case 2:b.retain(d.length);break;case 4:a=this.component.Jl(d.delta);const e=d.shift&&gib(d.shift);e?(b.retain(e),ro(c,e.Fm,a)):b.append(po(a));break;case 3:a=d.shift&&gib(d.shift);d.state!=null?a?(b.retain(a),ro(c,a.Fm,this.component.replace(d.state,void 0))):b.RY(d.state):b.retain(a);break;default:throw new r(d);}return b.build(c)}xk(a,
b){if(a===b)return!0;if(a.pre!==b.pre||a.post!==b.post||a.ops.length!==b.ops.length)return!1;for(let c=0;c<a.ops.length;c++)if(!this.muc(a.ops[c],b.ops[c]))return!1;return!0}muc(a,b){switch(a.type){case 0:case 1:case 2:return a.type===b.type&&a.length!==b.length;case 3:return a.type===b.type&&this.component.zi(a.state,b.state)&&hib(a.shift,b.shift);case 4:return a.type===b.type&&this.component.xk(a.delta,b.delta)&&hib(a.shift,b.shift);default:throw new r(a);}}Yg(a){return new Blb(a)}identity(){return ylb}apply(a,
b){if(!b.ops.length)return a;const c=Clb.create(a,b.pre),d=new Blb(Math.max(a.length,b.pre)+(b.post-b.pre));a=b.pre<a.length?[...b.ops,no(a.length-b.pre)]:b.ops;for(const e of a)switch(e.type){case 0:$hb(d,bib(c,e.length));break;case 1:d.expand(e.length);break;case 2:la(Zhb(bib(c,e.length)));d.expand(e.length);break;case 3:d.append(e.state,e.shift);break;case 4:d.append(this.component.apply(aib(c),e.delta),e.shift);break;default:throw new r(e);}c.finish();return d.build()}Vl(a,b){if(!b.ops.length)return a;
const {unshift:c,Aaf:d}=this.unshift(b);b=d;a=this.apply(a,c);const e=Clb.create(a,b.post),f=new Blb(Math.max(a.length,b.post)+(b.pre-b.post));a=b.post<a.length?[...b.ops,no(a.length-b.post)]:b.ops;for(const g of a)switch(g.type){case 0:$hb(f,bib(e,g.length));break;case 1:la(Zhb(bib(e,g.length)));break;case 2:la(Zhb(bib(e,g.length)));f.expand(g.length);break;case 3:io(this.component,g.state,aib(e));break;case 4:f.append(this.component.Vl(aib(e),g.delta));break;default:throw new r(g);}e.finish();return f.build()}unshift(a){const b=
this.Pg(),c=this.Pg();for(const d of a.ops)switch(d.type){case 0:b.append(d);c.append(d);break;case 1:case 2:b.append(no(d.length));c.append(d);break;case 4:d.shift?(b.retain(gib(d.shift)),c.append(po(d.delta))):(b.retain(),c.append(d));break;case 3:d.shift?(b.retain(gib(d.shift)),c.append(oo(d.state))):(b.retain(),c.append(d));break;default:throw new r(d);}return{unshift:b.build(),Aaf:c.build()}}zi(a,b){if(a===b)return!0;if(a.length!==b.length)return!1;const c=Object.keys(a),d=Object.keys(b);if(c.length!==
d.length)return!1;for(let e=0;e<c.length;e++)if(c[e]!==d[e]||!this.component.zi(a[c[e]],b[d[e]]))return!1;return!0}equals(a){return this===a||a instanceof Glb&&this.component.equals(a.component)}constructor(a){super();this.component=new wlb(new xlb(a))}};var yo,jib,Hlb,lib,nib,Eib,mib,Lib;yo=Object.freeze({serialize:a=>a,deserialize:a=>a});Up=__c.Up=Object.freeze({serialize(){throw Error("serialization not implemented");},deserialize(){throw Error("serialization not implemented");}});jib=class{serialize(a){return this.b.serialize(this.a.serialize(a))}deserialize(a){return this.a.deserialize(this.b.deserialize(a))}constructor(a,b){this.a=a;this.b=b}};
Hlb=class{get serializer(){this.XQc==null&&(this.XQc=this.Ore());return this.XQc}serialize(a){return this.serializer.serialize(a)}deserialize(a){return this.serializer.deserialize(a)}constructor(a){this.Ore=a}};lib=class{serialize(a){return a.map(b=>this.serializer.serialize(b))}deserialize(a){return a.map(b=>this.serializer.deserialize(b))}constructor(a){this.serializer=a}};
nib=Object.freeze({serialize(a){let b=0,c=0;const d=__c.iib(a),e=[];a.forEach((f,g)=>{if(f=g-c)b&&(e.push(b),b=0),e.push(-f);b++;c=g+1});return{items:d,dk:e}},deserialize({items:a,dk:b}){const c=[];let d=0;for(const e of b)e<0?d+=-e:e>0&&(a.slice(0,e).forEach(f=>c[d++]=f),a=a.slice(e));a.length&&a.forEach(e=>c[d++]=e);return c}});Eib=class{serialize(a){return Vg(a,b=>this.serializer.serialize(b))}deserialize(a){return Vg(a,b=>this.serializer.deserialize(b))}constructor(a){this.serializer=a}};
mib=class{serialize(a){return uo(this.fields,(b,c)=>b.serialize(a[c]))}deserialize(a){return uo(this.fields,(b,c)=>b.deserialize(a[c]))}constructor(a){this.fields=a}};Lib=class{serialize(a){return a!=null?this.serializer.serialize(a):void 0}deserialize(a){return a!=null?this.serializer.deserialize(a):void 0}constructor(a){this.serializer=a}};Object.freeze({serialize:a=>a,deserialize:a=>new Nib(a.delta)});Object.freeze({serialize:a=>a,deserialize:a=>new vlb(a.oldState,a.newState)});
Object.freeze({serialize:a=>({ops:a}),deserialize:a=>a.ops});var Ilb,sib,Jlb,Klb;Ilb={next:()=>{},error:()=>{}};sib=class{next(a){this.closed||this.o.next(this.f(a))}error(a){this.closed||(this.closed=!0,this.o.error(a))}constructor(a,b){this.o=a;this.f=b;this.closed=!1}};Jlb=class{create(a,b=__c.elb,c=Ilb){a=this.nA(a);b.subscribe(this.connect(a,c));return a}};
Vp=__c.Vp=class extends Jlb{map(a,b,c,d,e,f){return new Klb(this,a,b,c,d,e,f,kib({serialize:b,deserialize:a},this.w$b),kib({serialize:d,deserialize:c},this.wta))}constructor(a,b){super();this.w$b=a;this.wta=b}};
Klb=class extends Vp{nA(a){return this.bFe(this.component.nA(this.ola(a)))}connect(a,b){const c=this.component.connect(this.kWb(a),{next:d=>b.next(this.eMa(d)),error:d=>b.error(d)});return{next:d=>c.next(this.X4(d)),complete:()=>c.complete()}}fc(a){return this.ojb(this.component.fc(this.kWb(a)))}destroy(a,b){return this.component.destroy(this.kWb(a),this.ola(b))}ij(a,b){return this.component.ij(this.kWb(a),this.ola(b))}constructor(a,b,c,d,e,f,g,h,k){super(h,k);this.component=a;this.eMa=b;this.X4=
c;this.ojb=d;this.ola=e;this.bFe=f;this.kWb=g;this.domain=this.component.domain.map(this.eMa,this.X4,this.ojb,this.ola)}};Wp=__c.Wp=class{connect(a){la(this.JL==null);this.JL=a;return{next:b=>{this.JL&&qib(this,b)},complete:()=>this.complete()}}fc(){return this.TU()}complete(){this.JL&&(this.JL=void 0,rib(this,"mutable disconnected"))}error(a){this.JL&&(this.JL.error(a),this.JL=void 0,rib(this,"mutable failure"))}Er(a){var b;qib(this,a);this.domain.isIdentity(a)||(b=this.JL)===null||b===void 0||b.next(a)}constructor(){this.clients=this.Wfc=this.JL=void 0}};var Llb;Xp=__c.Xp=class{get(){this.nY.reportObserved();return this.value}set(a){__c.blb.identity(this.value,a)||(this.value=a,this.nY.reportChanged())}constructor(a){this.value=a;this.nY=clb("")}};
Llb=class{static F(a){hb(a,{Szc:Ro,D7b:Ro})}get Sq(){return this.cols.length}get YA(){return this.rows.length}get Szc(){const a=new Map;this.rows.forEach((b,c)=>a.set(b,c));return a}get D7b(){const a=new Map;this.cols.forEach((b,c)=>a.set(b,c));return a}get(a,b){a=this.rows[a];b=this.cols[b];if(a!=null&&b!=null){var c=this.values.get(this.e0(a,b));c==null&&alb()&&(c=new Xp,this.values.set(this.e0(a,b),c));return c&&c.get()}}set(a,b,c){let d=this.rows[a];d==null&&(d=this.rows[a]=this.Gkd++);a=this.cols[b];
a==null&&(a=this.cols[b]=this.Ekd++);(b=this.values.get(this.e0(d,a)))?b.set(c):this.values.set(this.e0(d,a),new Xp(c))}delete(a,b){a=this.rows[a];b=this.cols[b];if(a!=null&&b!=null){var c=this.values.get(this.e0(a,b));c&&c.set(void 0);this.values.delete(this.e0(a,b))}}forEach(a){for(const c of this.rows)for(const d of this.cols){var b=this.values.get(this.e0(c,d));b!=null&&(b=b.get(),b!=null&&a(b,c,d))}}e0(a,b){return`${a}:${b}`}constructor(){this.Gkd=(Llb.F(this),0);this.Ekd=0;this.rows=Sp.array([],
{deep:!1});this.cols=Sp.array([],{deep:!1});this.values=new Map}};var Mlb,Aib,Bib,zib,Cib,Dib,Nlb,Gib,Hib,Kib,Iib,Qlb,Slb,Tlb,Ulb;Ko=__c.Ko=class{constructor(a){this.serializer=a}};Mlb=class extends Ko{tx(a,b){return a===b}stringify(a){return JSON.stringify(a)}};Aib=class extends Mlb{NP(a){return a===this.value}constructor(a){super(yo);this.value=a}};Bib=class extends Mlb{NP(a){return this.values.has(a)}constructor(a){super(yo);this.values=a}};zib=class extends Mlb{constructor(a){super(yo);this.NP=a}};
Cib=class extends Ko{NP(a){return a.every(b=>this.type.NP(b))&&(!this.F8a||this.F8a(a))}tx(a,b){return a.length===b.length&&a.every((c,d)=>d in b&&this.type.tx(c,b[d]))&&a.reduce(c=>c+1,0)===b.reduce(c=>c+1,0)}stringify(a){return a.length?"[ "+a.map(b=>this.type.stringify(b)).join(", ")+" ]":"[]"}constructor(a,b,c){super(c);this.type=a;this.F8a=b}};
Dib=class extends Ko{NP(a){return[...a].every(this.Gze)}tx(a,b){if(a.size!==b.size)return!1;for(const [c,d]of a)if(a=b.get(c),a==null||!this.valueType.tx(d,a))return!1;return!0}stringify(a){return a.size?`{ ${[...a].map(([b,c])=>`${this.keyType.stringify(b)} => ${this.valueType.stringify(c)}`).join(", ")} }`:"{}"}constructor(a,b,c){super(c);this.keyType=a;this.valueType=b;this.Gze=([d,e])=>Nlb.every(f=>!d.includes(f))&&this.keyType.NP(d)&&this.valueType.NP(e)}};Nlb=["$",".","\x00"];
Gib=class extends Ko{NP(a){return this.keys.every(b=>this.fields[b].NP(a[b]))&&(!this.F8a||this.F8a(a))}tx(a,b){return this.keys.every(c=>this.fields[c].tx(a[c],b[c]))}stringify(a){return this.keys.length?"{ "+this.keys.map(b=>`${b}: ${this.fields[b].stringify(a[b])}`).join(", ")+" }":"{}"}constructor(a,b){super(Up);this.fields=a;this.F8a=b;this.keys=Object.keys(this.fields)}};
Hib=class extends Ko{NP(a){return this.KM[this.sBb(a)].NP(a)}tx(a,b){const c=this.sBb(a),d=this.sBb(b);return c===d&&this.KM[c].tx(a,b)}stringify(a){return this.KM[this.sBb(a)].stringify(a)}constructor(a,b){super(Up);this.KM=a;this.sBb=b}};Kib=class extends Ko{NP(a){return a==null||this.type.NP(a)}tx(a,b){return a!=null?b!=null&&this.type.tx(a,b):b==null}stringify(a){return a!=null?this.type.stringify(a):"undefined"}constructor(a,b){super(b);this.type=a}};
Iib=class extends Mlb{NP(a){return typeof a==="string"&&this.eWe.test(a)}constructor(a){super(yo);this.eWe=a}};Yp=__c.Yp=Do(a=>typeof a==="boolean");Zp=__c.Zp=Do(a=>typeof a==="string");__c.Olb=Do(a=>a.length===1);__c.Plb=Jib(-2147483648,2147483647);Qlb=Do(a=>Number.isSafeInteger(a));$p=__c.$p=Jib(0,2147483647);__c.Rlb=Jib(1,2147483647);aq=__c.aq=Jib(0,Number.MAX_SAFE_INTEGER);bq=__c.bq=Do(a=>Number.isFinite(a));cq=__c.cq=Jo(0,Number.MAX_VALUE);Slb=Do(a=>Number.isFinite(a)&&0<a&&a<=Number.MAX_VALUE);
Tlb=Fo(cq);Ulb=Fo(Zp);var Vlb,Mib;Vlb={next:a=>ja(a==null),complete:()=>{}};
Mib=class extends Vp{nA(a){return a!=null?this.type.nA(a):void 0}connect(a,b){if(a==null)return Vlb;const c=this.type.connect(a,b);return{next:d=>c.next(m(d)),complete:()=>c.complete()}}fc(a){return a!=null?this.type.fc(a):void 0}destroy(a,b){if(a!=null&&b!=null)this.type.destroy(a,b);else if(a!=null||b!=null)throw Error(`${this.fc(a)} != ${b}`);}ij(a,b){return a!=null?b!=null&&this.type.ij(a,b):b==null}constructor(a,b,c){super(b,c);this.type=a;this.domain=new xlb(this.type.domain)}};__c.gq=Lo(Zp);
__c.Wlb=Lo(Yp);Lo(__c.Plb);Lo(Qlb);__c.hq=Lo(bq);__c.Xlb=Lo($p);__c.Ylb=Lo(aq);__c.Zlb=Lo(cq);var $lb,Pib,amb,Qib,bmb;$lb=class extends Wp{n0(a){if(a!=null)switch(a.type){case 1:ja(this.zFd.tx(this._value.get(),a.oldState));this._value.set(a.newState);break;case 0:ja(a.delta==null);break;default:throw new r(a);}}get value(){return this._value.get()}set value(a){xib(this.zFd,a);const b=this._value.get();this.Er(this.domain.replace(b,a))}TU(){return this.value}constructor(a,b,c){super();this.zFd=a;this.domain=b;this._value=new Xp(c)}};
Pib=class extends Vp{nA(a){a=xib(this.type,a);return new $lb(this.type,this.domain,a)}connect(a,b){return a.connect(b)}fc(a){return a.fc()}destroy(a,b){yib(this.type,a.value,b)}ij(a,b){this.type.tx(a.value,b)||(a.value=b);return!0}constructor(a,b){super(Up,b);this.type=a;this.domain=new wlb(new ulb((c,d)=>this.type.tx(c,d)))}};
amb=class extends Wp{instantiate(a){const b=Ao(this,Oib),{mutable:c,Ox:d}=Bo(this.type,a,b);this.lwb.set(c);this.dRa=d;this.Seb=b}destroy(a){Co(this.type,a,this.dRa,this.lwb.get())}n0(a){if(a!=null)switch(a.type){case 0:this.dRa.next(a.delta);break;case 1:this.destroy(a.oldState);this.instantiate(a.newState);break;default:throw Error();}}TU(){return this.type.fc(this.ref)}get ref(){return this.lwb.get()}set(a){this.Er(new vlb(this.type.fc(this.lwb.get()),a))}constructor(a,b,c){super();this.type=a;
this.domain=b;a=Ao(this,Oib);const {mutable:d,Ox:e}=Bo(this.type,c,a);this.lwb=new Xp(d);this.dRa=e;this.Seb=a}};Qib=class extends Vp{nA(a){return new amb(this.type,this.domain,a)}connect(a,b){return a.connect(b)}fc(a){return a.fc()}destroy(a,b){this.type.destroy(a.ref,b)}ij(a,b){this.type.ij(a.ref,b)||a.set(b);return!0}constructor(a,b){super(Up,b);this.type=a;this.domain=new wlb(this.type.domain)}};__c.iq=Mo(Zp);jq=__c.jq=Mo(Yp);__c.kq=Mo(bq);__c.lq=Mo($p);__c.mq=Mo(cq);bmb=Mo(Slb);__c.cmb=Mo(Tlb);
__c.nq=Mo(Ulb);__c.oq=Oo(Zp);__c.dmb=Oo(Yp);__c.pq=Oo(bq);__c.emb=Oo($p);__c.qq=Oo(cq);var Rib=new Map,fmb=class extends Tp{create(a,b){return Sib(this,a,this.component.replace(void 0,b))}update(a,b){return Sib(this,a,this.component.update(b))}replace(a,b,c){return Sib(this,a,this.component.replace(b,c))}delete(a,b){return Sib(this,a,this.component.replace(b,void 0))}identity(){return Rib}isIdentity(a){return!a.size||Array.from(a.values()).every(b=>this.component.isIdentity(b))}Jl(a){if(!a.size)return a;const b=new Map;for(const [c,d]of a)a=this.component.Jl(d),a!=null&&b.set(c,a);
return b}compose(a,b){if(!a.size)return b;if(!b.size)return a;const c=new Map;for(const d of Tib(a,b)){const e=this.component.compose(a.get(d),b.get(d));e!=null&&c.set(d,e)}return c}transform(a,b){if(!a.size||!b.size)return ko(b,a);const c=new Map,d=new Map,e=jo.vs();for(const f of Tib(a,b)){const g=mo(e,this.component.transform(a.get(f),b.get(f)));g.cv!=null&&c.set(f,g.cv);g.Fu!=null&&d.set(f,g.Fu)}return e.build(d,c)}apply(a,b){if(!b.size)return a;const c=new Map(a);b.forEach((d,e)=>{d=this.component.apply(a.get(e),
d);d!=null?c.set(e,d):c.delete(e)});return c}Vl(a,b){if(!b.size)return a;const c=new Map(a);b.forEach((d,e)=>{d=this.component.Vl(a.get(e),d);d!=null?c.set(e,d):c.delete(e)});return c}zi(a,b){return a===b||a.size===b.size&&Array.from(Tib(a,b)).every(c=>{const d=a.get(c);c=b.get(c);return d!=null&&c!=null&&this.component.zi(d,c)})}xk(a,b){return a===b||a.size===b.size&&Array.from(Tib(a,b)).every(c=>{const d=a.get(c);c=b.get(c);return d!=null&&c!=null&&this.component.xk(d,c)})}equals(a){return this===
a||a instanceof fmb&&this.component.equals(a)}constructor(a){super();this.component=new wlb(new xlb(a))}};__c.gmb=class extends Wp{static F(a){hb(a,{refs:Sp.shallow})}get size(){return this.refs.size}set(a,b){var c=this.refs.get(a);c=c!=null?this.domain.replace(a,this.type.fc(c),b):this.domain.create(a,b);this.Er(c);c=this.get(a);if(c==null)throw Error(`Unable to set key "${a}" to value "${b}"`);return c}get(a){return this.refs.get(a)}has(a){return this.refs.has(a)}delete(a){const b=this.refs.get(a);b!=null&&(a=this.domain.delete(a,this.type.fc(b)),this.Er(a))}forEach(a){this.refs.forEach(a)}map(a){return[...this.refs].map(([b,
c])=>a(c,b))}every(a){return[...this.refs.entries()].every(([b,c])=>a(c,b))}entries(){return this.refs.entries()}keys(){return this.refs.keys()}values(){return this.refs.values()}[Symbol.iterator](){return this.refs[Symbol.iterator]()}TU(){return Vg(this.refs,a=>this.type.fc(a))}destroy(a){ja(this.refs.size===a.size);this.forEach((b,c)=>{const d=m(a.get(c));c=m(this.iHa.get(c));Co(this.type,d,c.to,b)})}ij(a){for(const [b,c]of this.refs)if(a.has(b)){const d=a.get(b);this.type.ij(c,d)||this.set(b,d)}else this.delete(b);
for(const [b,c]of a)this.refs.has(b)||this.set(b,c);return!0}n0(a){a.forEach((b,c)=>{if(b!=null)switch(b.type){case 0:b.delta!=null&&m(this.iHa.get(c)).to.next(b.delta);break;case 1:b.oldState!=null?(this.G$b(c,b.oldState),this.refs.delete(c),this.iHa.delete(c)):(ja(!this.refs.has(c)),ja(!this.iHa.has(c)));if(b.newState!=null){const {CZc:d,value:e}=Uib(this,c,b.newState);this.refs.set(c,e);this.iHa.set(c,d)}break;default:throw new r(b);}})}G$b(a,b){const c=m(this.refs.get(a));a=m(this.iHa.get(a));
Co(this.type,b,a.to,c)}constructor(a,b,c){super();this.type=a;this.domain=b;this.refs=(__c.gmb.F(this),new Map);this.iHa=new Map;c.forEach((d,e)=>{const {CZc:f,value:g}=Uib(this,e,d);this.refs.set(e,g);this.iHa.set(e,f)})}};__c.gmb.prototype.YF=da(100);
var Vib=class extends Vp{nA(a){return new __c.gmb(this.type,this.domain,a)}Dn(a){return a}connect(a,b){return this.Dn(a).connect(b)}fc(a){return this.Dn(a).fc()}destroy(a,b){return this.Dn(a).destroy(b)}ij(a,b){return this.Dn(a).ij(b)}constructor(a,b){super(Up,b);this.type=a;this.domain=new fmb(this.type.domain)}};var hmb={next:()=>{},complete:()=>{}},Wib=class extends Vp{nA(a){return xib(this.type,a)}connect(){return hmb}fc(a){return a}destroy(a,b){yib(this.type,a,b)}ij(a,b){return this.type.tx(a,b)}constructor(a,b){super(yo,b);this.type=a;this.domain=new ulb((c,d)=>this.type.tx(c,d))}};var Yib=class extends Tp{static of(a){return new Yib(a)}update(a,b){const c={};m(this.components[a]).isIdentity(b)||(c[a]=b);return c}identity(){return this.id}isIdentity(a){return a===this.id||Object.entries(a).every(([b,c])=>c==null||this.components[b].isIdentity(c))}Jl(a){const b={};var c=Object.keys(a);if(!c.length)return a;for(const e of c){var d=a[e];d!=null&&(c=this.components[e],d=c.Jl(d),c.isIdentity(d)||(b[e]=d))}return b}compose(a,b){const c={};var d=Object.keys(a),e=Object.keys(b);if(!d.length)return b;
if(!e.length)return a;for(const f of new Set([...d,...e])){e=a[f];const g=b[f];e!=null&&g!=null?(d=this.components[f],e=d.compose(e,g),d.isIdentity(e)||(c[f]=e)):e!=null?c[f]=e:g!=null&&(c[f]=g)}return c}transform(a,b){const c={},d={};var e=Object.keys(a),f=Object.keys(b);if(!e.length||!f.length)return ko(b,a);const g=jo.vs();for(const h of new Set([...e,...f])){f=a[h];const k=b[h];f!=null&&k!=null?(e=this.components[h],f=mo(g,e.transform(f,k)),e.isIdentity(f.cv)||(c[h]=f.cv),e.isIdentity(f.Fu)||
(d[h]=f.Fu)):f!=null?c[h]=f:k!=null&&(d[h]=k)}return g.build(d,c)}apply(a,b){var c=Object.keys(b);if(!c.length)return a;const d=Object.assign({},a);for(const e of c)c=b[e],c!=null&&(d[e]=this.components[e].apply(a[e],c));return d}Vl(a,b){var c=Object.keys(b);if(!c.length)return a;const d=Object.assign({},a);for(const e of c)c=b[e],c!=null&&(d[e]=this.components[e].Vl(a[e],c));return d}zi(a,b){return a===b||Object.keys(this.components).every(c=>this.components[c].zi(a[c],b[c]))}xk(a,b){if(a===b)return!0;
const c=Object.keys(a),d=Object.keys(b);return!c.length&&!d.length||__c.ho([...c,...d]).every(e=>{const f=a[e],g=b[e];return f!=null&&g!=null&&this.components[e].xk(f,g)})}equals(a){return this===a?!0:a instanceof Yib?Object.keys(this.components).length===Object.keys(a.components).length&&Object.keys(this.components).every(b=>b in a.components&&this.components[b].equals(a.components[b])):!1}constructor(a){super();this.components=a;this.id={}}};var Xib,jmb;Xib=class{get value(){return this.computed.get()}set value(a){this.computed.set(a)}constructor(a){this.computed=a}};
__c.imb=class extends Wp{TU(){const a=this.Tea,b=this.Mnb,c=this.GTa,d={};for(const e in a)d[e]=this.values[e];for(const e in b)d[e]=b[e].fc(this.Sb[e]);for(const e in c)d[e]=c[e].fc(this.attributes[e]);return d}destroy(a){const b=this.Tea,c=this.Mnb,d=this.GTa,e=this.G1c;for(const f in b)yib(b[f],this.values[f],a[f]);for(const f in c)Co(c[f],a[f],this.Nsd[f],this.Sb[f]);for(const f in d)Co(d[f],a[f],this.NTc[f],this.attributes[f]);if(e)try{e()}catch(f){Promise.reject(f)}}ij(a){const b=this.Tea,c=
this.Mnb,d=this.GTa;for(const e in b)if(!b[e].tx(this.values[e],a[e]))return!1;for(const e in c)if(!c[e].ij(this.Sb[e],a[e]))return!1;for(const e in d)if(!d[e].ij(this.attributes[e],a[e]))return!1;return!0}n0(a){for(const b in a)a[b]!=null&&(b in this.Mnb?this.Nsd[b].next(a[b]):b in this.GTa&&this.NTc[b].next(a[b]))}getAttribute(a){return this.attributes[a].value}setAttribute(a,b){this.attributes[a].value=b}constructor(a,b,c,d,e,f){super();this.domain=a;this.Tea=b;this.Mnb=c;this.GTa=d;this.G1c=void 0;
this.values=uo(b,(g,h)=>xib(g,f[h]));a=uo(c,(g,h)=>{const k=ajb(this,h),{Ox:l,mutable:n}=Bo(g,f[h],k);return{ref:n,dRa:l,Seb:k}});this.Sb=uo(a,g=>g.ref);this.Nsd=uo(a,g=>g.dRa);uo(a,g=>g.Seb);d=uo(d,(g,h)=>{const k=bjb(this,h),{Ox:l,mutable:n}=Bo(g,f[h],k);return{ref:n,dRa:l,Seb:k}});this.attributes=uo(d,g=>g.ref);this.NTc=uo(d,g=>g.dRa);uo(d,g=>g.Seb);if(e){const {Sb:g,attributes:h,Jca:k}=e.create({...this.values,...this.Sb,...this.attributes});this.SYc=uo(e.Sb,(l,n)=>g[n]);this.b8b=uo(e.attributes,
(l,n)=>h[n]);this.G1c=k}else this.SYc={},this.b8b={}}};__c.imb.prototype.pQ=da(102);rq=__c.rq=Symbol("$impl");jmb=class extends Vp{};
__c.kmb=class extends jmb{nA(a){a=new __c.imb(this.domain,this.values,this.Sb,this.attributes,this.computed,a);const b={...a.values,...a.Sb,...a.SYc};Object.defineProperties(b,this.BUe);Object.defineProperty(b,rq,{enumerable:!1,writable:!1,value:a});return b}connect(a,b){return a[rq].connect(b)}fc(a){return a[rq].fc()}destroy(a,b){a[rq].destroy(b)}ij(a,b){return a[rq].ij(b)}Fi({values:a={},Sb:b={},attributes:c={},computed:d}){return new __c.kmb({...this.values,...a},{...this.Sb,...b},{...this.attributes,
...c},cjb(this.computed,d))}constructor(a,b,c,d){super(Up,Up);this.values=a;this.Sb=b;this.attributes=c;this.computed=d;this.domain=Zib(uo(this.values,e=>new ulb((f,g)=>e.tx(f,g))),uo(this.Sb,e=>e.domain),uo(this.attributes,e=>e.domain));$ib(a,{...b,...(d===null||d===void 0?void 0:d.Sb)},{...c,...(d===null||d===void 0?void 0:d.attributes)});a=uo(c,(e,f)=>({enumerable:!0,get(){return this[rq].getAttribute(f)},set(g){this[rq].setAttribute(f,g)}}));d=uo((d===null||d===void 0?void 0:d.attributes)||{},
(e,f)=>({enumerable:!0,get(){return this[rq].b8b[f].value},set(g){this[rq].b8b[f].value=g}}));this.BUe={...a,...d}}};__c.kmb.prototype.pQ=da(101);var djb=new __c.kmb({},{},{});var lmb=class extends Tp{qL(a){return a}isIdentity(a){return a===0}compose(a,b){return a+b}transform(a,b){return ko(b,a)}xk(a,b){return a===b}identity(){return 0}apply(a,b){return a+b}Vl(a,b){return a-b}zi(a,b){return a===b}},mmb=class extends lmb{Jl(a){return 0-a}equals(a){return this===a||a instanceof mmb}},nmb=class extends lmb{qL(a){ja(a>=0);return super.qL(a)}compose(a,b){ja(a>=0);ja(b>=0);return super.compose(a,b)}transform(a,b){ja(a>=0);ja(b>=0);return super.transform(a,b)}Jl(a){ja(a>=0);return 0}apply(a,
b){ja(b>=0);return super.apply(a,b)}Vl(a,b){ja(b>=0);return super.Vl(a,b)}equals(a){return this===a||a instanceof nmb}},omb=new mmb,pmb=new nmb;var qmb=class extends Wp{n0(a){this._value.set(this.domain.apply(this._value.get(),a))}get value(){return this._value.get()}qL(a){this.Er(this.domain.qL(a))}TU(){return this.value}constructor(a,b){super();this.domain=a;this._value=new Xp(b)}},rmb=class extends Vp{nA(a){return new qmb(this.domain,a)}connect(a,b){return a.connect(b)}fc(a){return a.fc()}destroy(a,b){io(this.domain,a.value,b)}ij(a,b){a.qL(b-a.value);return!0}},smb=class extends rmb{constructor(){super(yo,yo);this.domain=omb}},tmb=class extends rmb{ij(a,
b){return b<a.value?!1:super.ij(a,b)}constructor(){super(yo,yo);this.domain=pmb}};new smb;new tmb;__c.sq=class{static F(a){hb(a,{empty:Ro})}get empty(){return this.first()==null}count(){return this.reduce(a=>a+1,0)}toArray(){return this.base.filter(this.predicate)}[Symbol.iterator](){return this.toArray()[Symbol.iterator]()}first(a){const b=this.predicate;return this.base.first(c=>b(c)&&(!a||a(c)))}last(a){const b=this.predicate;return this.base.last(c=>b(c)&&(!a||a(c)))}next(a,b){ja(this.has(a));const c=this.predicate;return this.base.next(a,d=>c(d)&&(!b||b(d)))}ik(a,b){ja(this.has(a));const c=
this.predicate;return this.base.ik(a,d=>c(d)&&(!b||b(d)))}Ir(a,b){const c=this.predicate;ja(c(a));ja(c(b));return this.base.Ir(a,b)}has(a){const b=this.predicate;return b(a)&&this.base.has(a)}map(a){const b=this.predicate,c=[];this.base.forEach((d,e)=>{b(d)&&c.push(a(d,e))});return c}flatMap(a){const b=this.predicate,c=[];this.base.forEach((d,e)=>{b(d)&&c.push(...a(d,e))});return c}filter(a){const b=this.predicate;return this.base.filter((c,d)=>b(c)&&a(c,d))}forEach(a){const b=this.predicate;this.base.forEach((c,
d)=>b(c)&&a(c,d))}reduce(a,b){const c=this.predicate;return this.base.reduce((d,e)=>c(e)?a(d,e):d,b)}some(a){const b=this.predicate;return this.base.some(c=>b(c)&&a(c))}every(a){const b=this.predicate;return this.base.every(c=>b(c)&&a(c))}constructor(a,b){this.base=a;this.predicate=b;__c.sq.F(this)}};__c.sq.prototype.R6=da(110);__c.sq.prototype.oZ=da(106);__c.sq.prototype.YF=da(99);__c.tq=class{get values(){return this.list.get()}get empty(){return this.values.empty}count(){return this.values.count()}toArray(){return this.values.toArray()}[Symbol.iterator](){return this.toArray()[Symbol.iterator]()}first(a){return this.values.first(a)}last(a){return this.values.last(a)}next(a,b){return this.values.next(a,b)}ik(a,b){return this.values.ik(a,b)}Ir(a,b){return this.values.Ir(a,b)}has(a){return this.values.has(a)}set(a,b){return this.values.set(a,b)}replace(a,b){return this.values.replace(a,
b)}append(a){return this.values.append(a)}prepend(a){return this.values.prepend(a)}XKa(a,b){return this.values.XKa(a,b)}insertBefore(a,b){return this.values.insertBefore(a,b)}delete(a){return this.values.delete(a)}map(a){return this.values.map(a)}flatMap(a){return this.values.flatMap(a)}filter(a){return this.values.filter(a)}forEach(a){return this.values.forEach(a)}reduce(a,b){return this.values.reduce(a,b)}some(a){return this.values.some(a)}every(a){return this.values.every(a)}constructor(a){this.list=
a}};__c.aa=__c.tq.prototype;__c.aa.CL=da(119);__c.aa.o6=da(114);__c.aa.R6=da(109);__c.aa.oZ=da(105);__c.aa.YF=da(98);__c.uq=class extends Wp{static F(a){hb(a,{zP:Ro,Yq:Ro,empty:Ro,sJa:Ro,MLa:Ro})}NMa(a){const b=Ao(this,e=>Uo(this).retain(this.XG(c)).update(e).build()),{mutable:c,Ox:d}=Bo(this.type,a,b);return{id:String(this.$Lb++),value:c,to:d,from:b}}F$b(a,b){Co(this.type,a,b.to,b.value)}get zP(){const a=new Map;this.bL.forEach((b,c)=>b&&a.set(b.value,c));return a}get Yq(){return this.bL.filter(__c.Ta)}get(a){return(a=this.bL[a])&&a.value}lgc(a){return(a=this.Yq[a])&&a.value}XG(a){return m(this.zP.get(a),"ref not found")}n0(a){const b=
this.bL,c=new Map,d=new Map;var e=0;b.length<a.pre&&(b.length=a.pre);for(var f of a.ops)switch(f.type){case 0:case 2:e+=f.length;break;case 1:b.spliceWithArray(e,0,Array(f.length));e+=f.length;break;case 3:var g=f.state,h=f.shift;b.splice(e,0,g!=null?this.NMa(g):void 0);h&&(d.set(h.ei,b[e]),c.set(h.Fm,e));e++;break;case 4:var k=f.delta;g=f.shift;if(k)switch(k.type){case 0:h=k.delta;h!=null&&m(b[e]).to.next(h);break;case 1:h=k.oldState;k=k.newState;h==null?la(b[e]==null):this.F$b(h,m(b[e]));b[e]=k!=
null?this.NMa(k):void 0;break;default:throw new r(k);}g&&(d.set(g.ei,b[e]),c.set(g.Fm,e));e++;break;default:throw new r(f);}la(d.size===a.MOa);la(c.size===a.MOa);for(e=0;e<a.MOa;e++)la(d.has(e)),f=m(c.get(e)),b[f]=d.get(e);for(;b.length&&b[b.length-1]==null;)b.length--}TU(){const a=[];this.bL.forEach((b,c)=>{b!=null&&(a[c]=this.type.fc(b.value))});return a}destroy(a){let b=0;this.bL.forEach((d,e)=>{d!=null&&(ja(e in a),this.type.destroy(d.value,a[e]),b++)});const c=a.reduce(d=>d+1,0);ja(b===c)}ij(a){const b=
this.bL,c=Uo(this);for(let e=0;e<b.length;e++){const f=b[e];f!=null&&a[e]!=null&&this.type.ij(f.value,a[e])||f==null&&a[e]==null?c.retain():c.change(f&&this.type.fc(f.value),a[e])}let d=b.length;a.forEach((e,f)=>{f>=b.length&&(c.retain(f-d),c.insert(e),d=f+1)});a=c.build();this.domain.isIdentity(a)||this.Er(c.build());return!0}get empty(){return!this.Yq.length}count(){return this.Yq.length}toArray(){return this.Yq.map(a=>a.value)}[Symbol.iterator](){return this.toArray()[Symbol.iterator]()}get sJa(){const a=
this.Yq[0];return a&&a.value}get MLa(){const a=this.Yq[this.Yq.length-1];return a&&a.value}first(a){if(!a)return this.sJa;const b=this.Yq.find(c=>a(c.value));return b&&b.value}last(a){if(!a)return this.MLa;const b=this.Yq;for(let c=b.length-1;c>=0;c--){const d=b[c];if(a(d.value))return d.value}}next(a,b){const c=this.bL;for(a=this.XG(a)+1;a<c.length;a++){const d=c[a];if(d&&(!b||b(d.value)))return d.value}}ik(a,b){const c=this.bL;for(a=this.XG(a)-1;a>=0;a--){const d=c[a];if(d&&(!b||b(d.value)))return d.value}}Ir(a,
b){a=this.zP.get(a);b=this.zP.get(b);ja(a!=null);ja(b!=null);return a<b?-1:a>b?1:0}has(a){return this.zP.has(a)}insertAt(a,b){this.Er(Uo(this).retain(a).insert(b).build());return this.bL[a].value}set(a,b){var c;ja(a>=0);a>=this.bL.length&&(this.bL.length=a+1);const d=(c=this.bL[a])===null||c===void 0?void 0:c.value;c=d!=null?this.type.fc(d):void 0;this.Er(Uo(this).retain(a).change(c,b).build());return this.bL[a].value}replace(a,b){a=this.XG(a);return this.set(a,b)}append(a){return this.insertBefore(void 0,
a)}prepend(a){return this.XKa(void 0,a)}XKa(a,b){return this.insertAt(a?this.XG(a)+1:0,b)}insertBefore(a,b){return this.insertAt(a?this.XG(a):this.bL.length,b)}delete(a){a=Uo(this).retain(this.XG(a)).RY(this.type.fc(a)).build();this.Er(a)}moveTo(a,b){const c=this.XG(b);if(c===a)return b;this.Er(c<a?Uo(this).retain(c).retain({ei:0,Fm:1}).retain(a-c-1).expand({ei:1,Fm:0}).build():Uo(this).retain(a).expand({ei:0,Fm:1}).retain(c-a).retain({ei:1,Fm:0}).build());return b}map(a){return this.Yq.map(({value:b,
id:c})=>a(b,c))}flatMap(a){return this.Yq.flatMap(({value:b,id:c})=>a(b,c))}filter(a){return this.Yq.filter(b=>a(b.value,b.id)).map(b=>b.value)}forEach(a){this.Yq.forEach(b=>b!=null&&a(b.value,b.id))}reduce(a,b){return this.Yq.reduce((c,d)=>a(c,d.value,d.id),b)}some(a){return this.Yq.some(b=>a(b.value,b.id))}every(a){return this.Yq.every(b=>a(b.value,b.id))}constructor(a,b,c){super();this.type=a;this.domain=b;this.bL=(__c.uq.F(this),void 0);this.$Lb=0;ja(!c.length||c[c.length-1]!=null);this.bL=Sp.array([...c.map(d=>
this.NMa(d))],{deep:!1})}};__c.aa=__c.uq.prototype;__c.aa.CL=da(118);__c.aa.o6=da(113);__c.aa.R6=da(108);__c.aa.oZ=da(104);__c.aa.YF=da(97);__c.ejb=class extends Vp{Pg(){return this.domain.Pg()}Dn(a){return a}nA(a){return new __c.uq(this.type,this.domain,a)}connect(a,b){return this.Dn(a).connect(b)}fc(a){return this.Dn(a).fc()}destroy(a,b){this.Dn(a).destroy(b)}ij(a,b){return this.Dn(a).ij(b)}constructor(a,b){super(Up,b);this.type=a;this.domain=new Glb(this.type.domain)}};__c.ejb.prototype.kB=da(121);__c.vq=class{get empty(){return this.list.empty}count(){return this.list.count()}toArray(){return this.list.toArray()}first(a){return this.list.first(a)}last(a){return this.list.last(a)}next(a,b){return this.list.next(a,b)}ik(a,b){return this.list.ik(a,b)}Ir(a,b){return this.list.Ir(a,b)}has(a){return this.list.has(a)}map(a){return this.list.map(a)}flatMap(a){return this.list.flatMap(a)}filter(a){return this.list.filter(a)}forEach(a){this.list.forEach(a)}reduce(a,b){return this.list.reduce(a,b)}some(a){return this.list.some(a)}every(a){return this.list.every(a)}[Symbol.iterator](){return this.list[Symbol.iterator]()}set(){return Wo()}replace(){return Wo()}XKa(){return Wo()}insertBefore(){return Wo()}append(){return Wo()}prepend(){return Wo()}delete(){return Wo()}constructor(a){this.list=
a}};__c.aa=__c.vq.prototype;__c.aa.CL=da(117);__c.aa.o6=da(112);__c.aa.R6=da(107);__c.aa.oZ=da(103);__c.aa.YF=da(96);var umb;umb=class extends Tp{isIdentity(a){throw new r(a);}compose(a){throw new r(a);}transform(a){throw new r(a);}Jl(a){throw new r(a);}xk(a){throw new r(a);}identity(a){throw new r(a);}apply(a){throw new r(a);}Vl(a){throw new r(a);}zi(a){throw new r(a);}equals(a){return this===a||a instanceof umb}};__c.vmb=new umb;var wmb,xmb,Bmb,Cmb,Dmb,Emb,zq,Gmb,Hmb,Fmb;wmb=class{};wq=__c.wq=class extends wmb{get length(){return this.state.length}gXb(a){fjb(this,a);return this.state.charAt(a)}TT(a){gjb(this,a);return[new wq(this.state.substring(0,a)),new wq(this.state.substring(a))]}RJ(){return this}toString(){return this.state}constructor(a){super();this.state=a;this.type=0;ja(!!a)}};
$o=__c.$o=class extends wmb{get length(){return 1}gXb(a){fjb(this,a);return this.state}TT(a){gjb(this,a);throw Error();}RJ(a){return new $o(a(this.state))}toString(){return`[${this.state}]`}constructor(a){super();this.state=a;this.type=1}};
xq=__c.xq=class extends wmb{get length(){return this.state}gXb(a){fjb(this,a)}TT(a){gjb(this,a);return[new xq(a),new xq(this.state-a)]}RJ(){return this}toString(){return this.state<=7?"\u00b7".repeat(this.state):`\u00b7\u00b7(${this.state})\u00b7\u00b7`}constructor(a){super();this.state=a;this.type=2;ja(!!a)}};
__c.yq=class{get length(){return this.sna+this.Or+this.nGc}Cd(a){return new xmb(this,a)}cursor(a,b){return new __c.ymb(this,a,b)}RJ(a){const b=this.Zx.map(c=>c.RJ(a));return new __c.yq(b,this.sna,this.Or,this.nGc)}jb(){return this.Zx.map(a=>a.type===0?a.state:"").join("")}forEach(a,b){for(const c of this.Zx)switch(c.type){case 0:b.jb&&b.jb(c.state);break;case 1:b.item(c.state);break;case 2:b.dk&&b.dk(c.state);break;default:throw new r(c);}(a=Math.max(0,a-this.length))&&b.dk&&b.dk(a)}map(a,b){const c=
this.Zx.map(d=>{switch(d.type){case 0:return b.jb(d.state);case 1:return b.item(d.state);case 2:return b.dk(d.state);default:throw new r(d);}});(a=Math.max(0,a-this.length))&&c.push(b.dk(a));return c}reduce(a,b){return this.Zx.reduce((c,d)=>{switch(d.type){case 0:return a.jb(c,d.state);case 1:return a.item(c,d.state);case 2:return a.dk?a.dk(c,d.state):c;default:throw new r(d);}},b)}slice(a,b){ja(0<=a&&a<=b,"invalid range: [{}, {})",a,b);var c=this.length;if(0===a&&b>=c)return this;if(a===b||a>=c)return __c.zmb;
const d=new __c.Amb;c=this.cursor(b);c.VS(a);c.VS(b-a,{item:e=>d.item(e),jb:e=>d.uf(e),dk:e=>d.M9(e)});return d.build()}toString(){return this.Zx.join("")}constructor(a,b,c,d){this.Zx=a;this.sna=b;this.Or=c;this.nGc=d;a=a.length?a[a.length-1]:void 0;ja(!a||a.type!==2)}};__c.yq.prototype.jJb=da(122);__c.zmb=new __c.yq([],0,0,0);
__c.Amb=class{Rka(a){this.mode!==a&&(this.flush(),this.mode=a)}flush(){if(this.mode!=null){switch(this.mode){case 0:this.Zx.push(new wq(this.Rnb));this.Pyb+=this.Rnb.length;this.Rnb="";break;case 2:this.Zx.push(new xq(this.Snb));this.KVb+=this.Snb;this.Snb=0;break;default:throw new r(this.mode);}this.mode=void 0}}region(a){switch(a.type){case 0:return this.uf(a.state);case 1:return this.item(a.state);case 2:return this.M9(a.state);default:throw new r(a);}}uf(a){a&&(this.Rka(0),this.Rnb+=a);return this}item(a){this.flush();
this.Zx.push(new $o(a));this.smc++;return this}M9(a){a>0&&(this.Rka(2),this.Snb+=a);return this}append(a,b=0){a.forEach(b,{jb:c=>this.uf(c),item:c=>this.item(c),dk:c=>this.M9(c)});return this}get length(){return this.Pyb+this.smc+this.KVb}build(){this.mode!==2&&this.flush();return this.length?new __c.yq(this.Zx,this.Pyb,this.smc,this.KVb):__c.zmb}constructor(){this.Zx=[];this.mode=void 0;this.Rnb="";this.KVb=this.smc=this.Pyb=this.Snb=0}};
xmb=class{get head(){return this.Hm}get prevValue(){return this.Ymb&&this.Ymb.gXb(this.Ymb.length-1)}Go(a){const b=m(this.Hm),c=b.length;ja(0<a&&a<=c,"{} \u2209 (0, {}]",a,c);if(a<c)return a=b.TT(a),this.Hm=a[1],this.Ymb=a[0];this.Hm=this.Zx[this.i++];return this.Ymb=b}finish(){la(this.Hm==null,"unconsumed reader head: {}",this.Hm)}constructor(a,b=0){this.i=0;this.Ymb=void 0;this.Zx=(b=Math.max(0,b-a.length))?[...a.Zx,new xq(b)]:a.Zx;this.Hm=this.Zx.length?this.Zx[this.i++]:void 0}};
__c.ymb=class{get prevValue(){return this.Cd.prevValue}move(a,b,c){for(c=__c.hjb(this.tjb,c);a;){var d=this.Cd.head;if(d)switch(d=this.Cd.Go(b||d.type!==2?Math.min(d.length,a):d.length),d.type){case 0:c&&c.jb&&c.jb(d.state);a-=d.length;break;case 1:c&&c.item&&c.item(d.state);a-=d.length;break;case 2:c&&c.dk&&c.dk(d.state);b&&(a-=d.length);break;default:throw new r(d);}else ja(b,"not enough characters or items: {}",a),c&&c.dk&&c.dk(a),a-=a}}VS(a,b){this.move(a,!0,b)}ho(a,b){this.move(a,!1,b)}finish(){this.Cd.finish()}constructor(a,
b,c){this.tjb=c;this.Cd=a.Cd(b)}};__c.ymb.prototype.CMa=da(123);__c.ymb.prototype.CL=da(116);Bmb=class{};Cmb=class extends Bmb{get Gca(){return this.length}get t3(){return this.length}RTb(a){ijb(this,a);return this.TT(a)}QTb(a){jjb(this,a);return this.TT(a)}TT(a){return[new Cmb(a),new Cmb(this.length-a)]}map(){return this}toString(){return`R${this.length}`}constructor(a){super();this.length=a;this.type=0}};
Dmb=class extends Bmb{get Gca(){return 1}get t3(){return 1}RTb(a){ijb(this,a);throw Error();}QTb(a){jjb(this,a);throw Error();}map(a){return new Dmb(a(this.delta))}toString(){return`U[${this.delta}]`}constructor(a){super();this.delta=a;this.type=1}};
Emb=class extends Bmb{get Gca(){return 0}get t3(){return this.state.length}RTb(a){ijb(this,a);throw Error();}QTb(a){jjb(this,a);const [b,c]=this.state.TT(a);return[new Emb(b),new Emb(c)]}map(a,b){return new Emb(this.state.RJ(b))}toString(){switch(this.state.type){case 0:case 1:return`I${this.state}`;case 2:return`X${this.state.length}`;default:throw new r(this.state);}}constructor(a){super();this.state=a;this.type=2}};
zq=class extends Bmb{get Gca(){return this.oldState.length}get t3(){return this.newState.length}RTb(a){ijb(this,a);return this.TT(a)}QTb(a){jjb(this,a);return this.TT(a)}TT(a){const [b,c]=this.oldState.TT(a),[d,e]=this.newState.TT(a);return[new zq(b,d),new zq(c,e)]}map(a,b){return new zq(this.oldState.RJ(b),this.newState.RJ(b))}toString(){return this.oldState.type===2?this.newState.type===2?`\u25e0${this.oldState.state}`:`\u2191${this.newState}`:this.newState.type===2?`\u2193${this.oldState}`:`\u25e1[${this.oldState}|${this.newState}]`}constructor(a,
b){super();this.oldState=a;this.newState=b;this.type=3;ma(a.length,b.length)}};
Gmb=class{Cd(a,b){return new Fmb(this,a,b)}forEach(a,b=this.pre,c=this.post){for(const d of this.ops)switch(d.type){case 0:a.retain&&a.retain(d.length);break;case 1:a.update&&a.update(d.delta);break;case 2:a.insert&&a.insert(d.state);break;case 3:a.change&&a.change(d.oldState,d.newState);break;default:throw new r(d);}(b=Math.max(0,b-this.pre,c-this.post))&&a.retain&&a.retain(b)}map(a){return this.ops.map(b=>{switch(b.type){case 0:return a.retain(b.length);case 1:return a.update(b.delta);case 2:return a.insert(b.state);
case 3:return a.change(b.oldState,b.newState);default:throw new r(b);}})}RJ(a,b){const c=this.ops.map(d=>d.map(a,b));return new Gmb(c,this.pre,this.post)}toString(){return`[${this.ops.toString()}]`}constructor(a,b,c){this.ops=a;this.pre=b;this.post=c}};Hmb=new Gmb([],0,0);
__c.Imb=class{Rka(a,b,c){if(this.F3!==a||this.frc!==b||this.yqc!==c)switch(this.flush(),this.F3=a,this.frc=b,this.yqc=c,a){case 0:break;case 2:c===0&&(this.NZ="");break;case 3:b===0&&(this.zAa="");c===0&&(this.NZ="");break;default:throw new r(a);}}flush(){if(this.F3!=null){switch(this.F3){case 0:this.push(new Cmb(this.acc));this.acc=0;break;case 2:var a=this.NZ!=null?new wq(this.NZ):new xq(this.acc);this.push(new Emb(a));this.NZ=void 0;this.acc=0;break;case 3:a=this.zAa!=null?new wq(this.zAa):new xq(this.acc);
const b=this.NZ!=null?new wq(this.NZ):new xq(this.acc);this.push(new zq(a,b));this.NZ=this.zAa=void 0;this.acc=0;break;default:throw new r(this.F3);}this.yqc=this.frc=this.F3=void 0}}push(a){this.ops.push(a);this.pre+=a.Gca;this.post+=a.t3}op(a){switch(a.type){case 0:return this.retain(a.length);case 1:return this.update(a.delta);case 2:return this.Pya(a.state);case 3:return Yo(this,a.oldState,a.newState);default:throw new r(a);}}Pya(a){switch(a.type){case 0:return this.insert(a.state);case 1:return this.insert(a.state);
case 2:return this.expand(a.state);default:throw new r(a);}}retain(a){ja(a>=0);a&&(this.Rka(0),this.acc+=a);return this}update(a){if(this.isIdentity(a))return this.retain(1);this.flush();this.ops.push(new Dmb(a));this.pre++;this.post++;return this}expand(a){ja(a>=0);a&&(this.Rka(2,void 0,2),this.acc+=a);return this}insert(a){typeof a==="string"?a&&(this.Rka(2,void 0,0),this.NZ+=a):(this.flush(),this.push(new Emb(new $o(a))));return this}Lsa(a){ja(a>=0);a&&(this.Rka(3,2,2),this.acc+=a);return this}i6a(a){typeof a===
"string"?a&&(this.Rka(3,2,0),this.acc+=a.length,this.NZ+=a):(this.flush(),this.push(new zq(new xq(1),new $o(a))));return this}RY(a){typeof a==="string"?a&&(this.Rka(3,0,2),this.acc+=a.length,this.zAa+=a):(this.flush(),this.push(new zq(new $o(a),new xq(1))));return this}change(a,b){typeof a==="string"?typeof b==="string"?(ma(a.length,b.length),a&&(this.Rka(3,0,0),this.zAa+=a,this.NZ+=b)):(ma(a.length,1),this.flush(),this.push(new zq(new wq(a),new $o(b)))):typeof b==="string"?(ma(1,b.length),this.flush(),
this.push(new zq(new $o(a),new wq(b)))):(this.flush(),this.push(new zq(new $o(a),new $o(b))));return this}build(){this.F3!==0&&this.flush();return new Gmb(this.ops,this.pre,this.post)}constructor(a){this.isIdentity=a;this.ops=[];this.post=this.pre=0;this.yqc=this.frc=this.F3=void 0;this.acc=0;this.NZ=this.zAa=void 0}};__c.Imb.prototype.Qya=da(126);
Fmb=class{get head(){return this.Hm}finish(){la(this.Hm==null)}constructor(a,b=0,c=0){this.ops=(b=Math.max(0,b-a.pre,c-a.post))?[...a.ops,new Cmb(b)]:a.ops;this.i=0;this.Hm=this.ops[this.i++]}};
__c.Jmb=class extends Tp{Pg(){return new __c.Imb(a=>this.component.isIdentity(a))}Yg(){return new __c.Amb}id(){return Hmb}pP(){return __c.zmb}isIdentity(a){return!a.ops.length||a.ops.every(b=>b.type===0)}compose(a,b){if(!a.ops.length)return b;if(!b.ops.length)return a;const c=a.Cd(0,b.pre),d=b.Cd(a.post,0),e=this.Pg();for(;;){let g=c.head;var f=d.head;if(!f)break;f.type===2?(g=void 0,f=Zo(d)):g&&(f=Math.min(g.t3,f.Gca),g=ljb(c,f),f=__c.kjb(d,f));if(f.type===2)e.Pya(f.state);else if(g)g.type===2?e.Pya(njb(this,
g.state,f)):f.type===0?e.op(g):g.type===0?e.op(f):g.type===1?f.type===1?e.update(this.component.compose(g.delta,f.delta)):Yo(e,ojb(this,f.oldState,g),f.newState):Yo(e,g.oldState,njb(this,g.newState,f));else throw Error(`length mismatch: ${a} ; ${b}`);}c.finish();d.finish();return e.build()}transform(a,b){if(!a.ops.length||!b.ops.length)return ko(b,a);const c=this.Pg(),d=this.Pg(),e=a.Cd(b.pre,0),f=b.Cd(a.pre,0),g=jo.vs();for(;;){var h=e.head,k=f.head;if(!h&&!k)break;h&&h.type===2?(h=Zo(e),k=void 0):
k&&k.type===2?(h=void 0,k=Zo(f)):h&&k&&(k=Math.min(h.Gca,k.Gca),h=__c.kjb(e,k),k=__c.kjb(f,k));if(h&&h.type===2)d.retain(h.t3),c.op(h);else if(k&&k.type===2)d.op(k),c.retain(k.t3);else if(h&&k)h.type===0||k.type===0?(d.op(k),c.op(h)):h.type===3?(d.retain(h.t3),Yo(c,njb(this,h.oldState,k),h.newState),Khb(g,k.type===3?!ap(this,h.newState,k.newState):!this.component.isIdentity(k.delta))):k.type===3?(Yo(d,njb(this,k.oldState,h),k.newState),c.retain(k.t3),Lhb(g,!this.component.isIdentity(h.delta))):(h=
mo(g,this.component.transform(h.delta,k.delta)),d.update(h.Fu),c.update(h.cv));else throw Error(`length mismatch (${a} x ${b})`);}e.finish();f.finish();return g.build(d.build(),c.build())}Jl(a){if(!a.ops.length)return a;const b=this.Pg();for(const c of a.ops)switch(c.type){case 0:b.retain(c.length);break;case 1:b.update(this.component.Jl(c.delta));break;case 2:a=c.state;a.type===2?b.retain(a.length):b.RY(a.state);break;case 3:a=c.oldState;const d=c.newState;a.type===2&&d.type===2?b.retain(a.length):
Yo(b,d,a);break;default:throw new r(c);}return b.build()}xk(a,b){if(a===b)return!0;if(a.ops.length!==b.ops.length)return!1;for(let c=0;c<a.ops.length;c++)if(!this.muc(a.ops[c],b.ops[c]))return!1;return!0}muc(a,b){switch(a.type){case 0:return b.type===0&&a.length===b.length;case 1:return b.type===1&&this.component.xk(a.delta,b.delta);case 2:return b.type===2&&ap(this,a.state,b.state);case 3:return b.type===3&&ap(this,a.oldState,b.oldState)&&ap(this,a.newState,b.newState);default:throw new r(a);}}identity(){return Hmb}apply(a,
b){const c=this.Yg(),d=a.Cd(b.pre);for(a=b.Cd(a.length,0);;){b=d.head;var e=a.head;if(!e)break;e.type===2?(b=void 0,e=Zo(a)):b&&(e=Math.min(b.length,e.Gca),b=d.Go(e),e=__c.kjb(a,e));if(e.type===2)c.region(e.state);else if(b)c.region(njb(this,b,e));else break}d.finish();a.finish();return c.build()}Vl(a,b){const c=this.Yg(),d=a.Cd(b.post);for(a=b.Cd(0,a.length);;){b=d.head;var e=a.head;if(!b||!e)break;e.type===2?(b=d.Go(e.t3),e=Zo(a)):(e=Math.min(b.length,e.t3),b=d.Go(e),e=ljb(a,e));if(e.type===2)__c.mjb(this,
b,e.state);else if(b)c.region(ojb(this,b,e));else break}d.finish();a.finish();return c.build()}zi(a,b){if(a===b)return!0;if(a.length!==b.length)return!1;a=a.Cd();b=b.Cd();let c=a.head,d=b.head;for(;c||d;){if(!c||!d||!ap(this,c,d))return!1;a.Go(c.length);b.Go(d.length);c=a.head;d=b.head}return!0}equals(a){return this===a||a instanceof __c.Jmb&&this.component.equals(a.component)}constructor(a){super();this.component=a}};__c.Jmb.prototype.aF=da(131);__c.bp=new __c.Jmb(__c.vmb);
cp=__c.cp={item:a=>{throw new r(a);}};var Kmb;Kmb=class{forEach(a,b=this.pre,c=this.post){this.ops.forEach(d=>{switch(d.type){case 0:a.retain&&a.retain(d.jb);break;case 2:a.insert&&a.insert(d.jb);break;case 1:a.delete&&a.delete(d.jb);break;default:throw new r(d);}});(b=Math.max(0,b-this.pre,c-this.post))&&a.retain&&a.retain(b)}static vs(){return new dp}constructor(a,b,c){this.pre=a;this.post=b;this.ops=c}};
dp=__c.dp=class{static insert(a,b){return(new dp).retain(a).insert(b).build()}static delete(a,b){return(new dp).retain(a).delete(b).build()}retain(a){ja(a>=0);a>0&&(this.E9(0),this.D3a+=a);return this}insert(a){a.length>0&&(this.E9(2),this.vhb+=a);return this}delete(a){a>0&&(this.E9(1),this.KVa+=a);return this}E9(a){if(this.mode!==a){switch(this.mode){case 0:var b=this.ops,c=b.push,d=this.D3a;ja(d>0);c.call(b,{type:0,jb:d});this.pre+=this.D3a;this.post+=this.D3a;this.D3a=0;break;case 2:b=this.ops;
c=b.push;d=this.vhb;ja(d.length>0);c.call(b,{type:2,jb:d});this.post+=this.vhb.length;this.vhb="";break;case 1:b=this.ops;c=b.push;d=this.KVa;ja(d>0);c.call(b,{type:1,jb:d});this.pre+=this.KVa;this.post+=this.KVa;this.KVa=0;break;case void 0:break;default:throw new r(this.mode);}this.mode=a}}build(){this.mode!==0&&this.E9();return new Kmb(this.pre,this.post,this.ops)}constructor(){this.ops=[];this.post=this.pre=0;this.mode=void 0;this.D3a=0;this.vhb="";this.KVa=0}};__c.Lmb=class extends Wp{static F(a){hb(a,{jb:Ro})}get jb(){return this.state.get().jb()}insert(a,b){this.Er(__c.pjb(this.state.get(),dp.insert(a,b)))}delete(a,b){this.Er(__c.pjb(this.state.get(),dp.delete(a,b)))}n0(a){const b=qjb(this.state.get(),a);this.state.set(__c.bp.apply(this.state.get(),a));this.subject.next(b)}TU(){return this.state.get()}destroy(a){ja(__c.bp.zi(this.state.get(),a))}ij(a){return __c.bp.zi(this.state.get(),a)}constructor(a,b){super();this.domain=a;this.state=(__c.Lmb.F(this),
void 0);this.subject=new __c.flb;this.state=new Xp(b)}};__c.Lmb.prototype.bP=da(136);var Mmb=class extends Jlb{Dn(a){return a}nA(a){return new __c.Lmb(this.domain,a)}connect(a,b){return this.Dn(a).connect(b)}fc(a){return this.Dn(a).fc()}destroy(a,b){this.Dn(a).destroy(b)}ij(a,b){return this.Dn(a).ij(b)}constructor(){super();this.domain=__c.bp}};new Mmb;__c.Nmb=class extends Tp{get target(){return m(this.g2b)}isIdentity(a){return this.target.isIdentity(a)}compose(a,b){return this.target.compose(a,b)}transform(a,b){return this.target.transform(a,b)}Jl(a){return this.target.Jl(a)}xk(a,b){return this.target.xk(a,b)}identity(a){return this.target.identity(a)}apply(a,b){return this.target.apply(a,b)}Vl(a,b){return this.target.Vl(a,b)}zi(a,b){return this.target.zi(a,b)}equals(a){return this===a||a instanceof __c.Nmb&&this.target.equals(a.target)}constructor(){super();
this.g2b=void 0}};__c.Nmb.prototype.Gka=da(138);__c.Aq=class extends Vp{get type(){return m(this.i2b)}nA(a){return this.type.nA(a)}connect(a,b){return this.type.connect(a,b)}fc(a){return this.type.fc(a)}destroy(a,b){this.type.destroy(a,b)}ij(a,b){return this.type.ij(a,b)}constructor(){super(new Hlb(()=>this.type.w$b),new Hlb(()=>this.type.wta));this.i2b=void 0;this.domain=new __c.Nmb}};__c.Aq.prototype.Gka=da(137);var Omb,Umb,Pmb,Qmb;Omb=sjb({},{});
__c.Tmb=class{Cd(a){return new Pmb(this,a)}cursor(a,b){return new Qmb(this,a,b)}forEach(a,{grad:b,Lc:c}){for(const d of this.items)switch(d.type){case 0:b&&b(d.rG,d.bI);break;case 1:c&&c(d.length);break;default:throw new r(d);}(a=Math.max(0,a-this.length))&&c&&c(a)}map(a,{grad:b,Lc:c}){const d=this.items.map(e=>{switch(e.type){case 0:return b(e.rG,e.bI);case 1:return c(e.length);default:throw new r(e);}});(a=Math.max(0,a-this.length))&&d.push(c(a));return d}reduce({grad:a,Lc:b},c){return this.items.reduce((d,
e)=>{switch(e.type){case 0:return a?a(d,e.rG,e.bI):d;case 1:return b?b(d,e.length):d;default:throw new r(e);}},c)}slice(a,b){ja(0<=a&&a<=b,"invalid range: [{}, {})",a,b);var c=this.length;if(0===a&&b>=c)return this;if(a===b||a>=c)return __c.Rmb;const d=new __c.Smb;c=this.cursor(b);c.move(a);d.attrs(c.wQ,c.Nja);c.move(b-a,{cells:(e,f,g,h)=>d.attrs(f,h).Lc(e)});return d.build()}toString(){return`${this.items.map(a=>{switch(a.type){case 0:const b=[];for(const [c,d]of Object.entries(a.bI))b.push(`${c}:${d!=
null?`<${d}|`:""}`);return`G{${b.join(",")}}`;case 1:return`R${a.length}`;default:throw new r(a);}}).join("")}`}constructor(a,b,c={}){this.items=a;this.length=b;this.attributes=c;a=a.length?a[a.length-1]:void 0;ja(!a||a.type!==1)}};__c.Tmb.prototype.CKb=da(139);__c.Rmb=new __c.Tmb([],0);
__c.Vmb=class{Cd(a,b){return new Umb(this,a,b)}forEach(a){for(const b of this.ops)switch(b.type){case 0:a.retain(b.length,b.changes);break;case 1:a.insert(b.length,b.changes);break;default:throw new r(b);}}map(a){return this.ops.map(b=>{switch(b.type){case 0:return a.retain(b.length,b.changes);case 1:return a.insert(b.length,b.changes);default:throw new r(b);}})}equals(a){if(this===a)return!0;if(this.pre!==a.pre||this.post!==a.post||this.ops.length!==a.ops.length)return!1;for(let b=0;b<this.ops.length;b++){const c=
this.ops[b],d=a.ops[b];if(c!==d)switch(c.type){case 0:case 1:if(c.type!==d.type||c.length!==d.length||!wjb(c.changes,d.changes))return!1;break;default:throw new r(c);}}return!0}toString(){return`[${this.ops.map(a=>{let b;switch(a.type){case 0:b="R";break;case 1:b="I";break;default:throw new r(a);}const c=[];__c.vjb(a.changes,({r:e},f)=>{e?c.push(`+"${f.toString()}":${e.so!=null?`"${e.so}"`:"null"}=>${e.sn!=null?`"${e.sn}"`:"null"}`):c.push(`-"${f.toString()}"`)});const d=c.length?`{${c.join(",")}}`:
"";return`${b}${a.length}${d}`}).toString()}]`}constructor(a,b,c){this.ops=a;this.pre=b;this.post=c}};__c.Wmb=new __c.Vmb([],0,0);
Umb=class{get cO(){return this.kwb}get next(){return this._next}Hu(a,b){const c=m(this._next);la(c.type===a,"{} != {}",c.type,a);ja(0<b&&b<=c.length,"{} \u2209 ({}, {}]",b,0,c.length);for(const [d,e]of Object.entries(c.changes)){const f=e&&e.r;f?this.kwb[d]=f:delete this.kwb[d]}b<c.length?this._next={type:a,length:c.length-b,changes:{}}:(this._next=this.i<this.input.length?this.input[this.i++]:void 0,!this._next&&this.d5a&&(this._next=xjb(this.d5a,go(this.kwb,()=>({r:void 0}))),this.d5a=0));return c.changes}lA(a){return this.Hu(0,
a)}pga(a){return this.Hu(1,a)}finish(){la(!this._next)}constructor(a,b=0,c=0){this.i=0;this.kwb={};this.input=a.ops;this._next=this.i<this.input.length?this.input[this.i++]:void 0;this.d5a=Math.max(0,b-a.pre,c-a.post);!this._next&&this.d5a&&(this._next=xjb(this.d5a),this.d5a=0)}};
Pmb=class{get head(){return this.Hm}get wQ(){return this.eJ}get Nja(){return this.f2b}Go(a){var b=this.Hm;if(!b||b.type!==1)throw Error(`expected cell, found: ${b&&b.type}`);b=b.length;a=Math.min(a,b);this.Hm=a<b?tjb(b-a):this.input[this.i++];return a}apply(a){__c.fp(a.rG,a.bI,(b,c,d)=>{c!=null&&d!=null?(this.eJ[b]=c,this.f2b[b]=d):(delete this.eJ[b],delete this.f2b[b])})}ww(){const a=this.Hm;if(!a||a.type===1)return Omb;this.Hm=this.input[this.i++];this.apply(a);return a}finish(){la(!this.Hm)}constructor(a,
b=0){this.i=0;this.eJ={};this.f2b={};b=Math.max(0,b-a.length);this.length=a.length+b;this.input=b?[...a.items,tjb(b)]:a.items;this.Hm=this.input.length?this.input[this.i++]:void 0}};
Qmb=class{get RB(){return this.Cd.length-this.yfa}get wQ(){return this.Cd.wQ}get Nja(){return this.Cd.Nja}move(a,b){var c=this.tjb;b=c?b?{cells:__c.Xo(c.cells,b.cells)}:c:b;ja(a>=0,"{} < 0",a);a=this.yfa+a;for(ja(a<=this.Cd.length,"{} > {}",a,this.Cd.length);this.yfa<a;){c=this.Cd.ww();const d=this.Cd.Go(a-this.yfa);this.yfa+=d;b&&b.cells&&b.cells(d,c.rG,this.wQ,c.bI,this.Nja)}}finish(){this.Cd.ww();this.Cd.finish()}constructor(a,b,c){this.tjb=c;this.yfa=0;this.Cd=new Pmb(a,b)}};
__c.Smb=class{um(a,b,c){this.ss[a]!==c?(this.rG[a]=b,this.bI[a]=c):(delete this.rG[a],delete this.bI[a]);return this}attrs(a,b){__c.fp(a,b,(c,d,e)=>this.um(c,d,e));return this}Lc(a){a>0&&(Object.keys(this.rG).length&&(this.length&&(this.items.push(tjb(this.length)),this.length=0),this.items.push(sjb(this.rG,this.bI)),__c.fp(this.rG,this.bI,(b,c,d)=>{if(c!=null){this.as[b]=c;this.ss[b]=d;var e;((e=this.attributes[b])!==null&&e!==void 0?e:this.attributes[b]=new Set).add(c)}else delete this.as[b],delete this.ss[b]}),
this.rG={},this.bI={}),this.length+=a,this.P4+=a);return this}append(a,b=0){a.forEach(b,{grad:(c,d)=>this.attrs(c,d),Lc:c=>this.Lc(c)});return this}build(){for(const a of __c.ep(this.as))this.um(a);for(const a of __c.ep(this.rG))this.um(a);Object.keys(this.rG).length?(la(!!this.length,"attributes still open: {}",this.rG),this.items.push(tjb(this.length)),this.items.push(sjb(this.rG,this.bI)),this.length=0,this.rG={},this.bI={}):this.P4-=this.length;return new __c.Tmb(this.items,this.P4,this.attributes)}constructor(){this.items=
[];this.attributes={};this.as={};this.ss={};this.length=this.P4=0;this.rG={};this.bI={}}};var ip,Xmb,Ymb,Zmb,Bjb,anb,$mb,cnb,dnb,enb,bnb;ip=class{static from(a){if(a instanceof ip)return a;if(Array.isArray(a)){const [b,c]=a;return new ip(b,c)}return new ip(a.from,a.to)}toString(){return`[${this.from},${this.to}]`}constructor(a,b){this.from=a;this.to=b}};
Xmb=class{get isEmpty(){return!this.Xe.size}slice(a,b){ja(0<=a&&a<=b,"invalid range: [{}, {})",a,b);const c=new Map;for(const [e,f]of this.Xe){var d=b<f.from||f.to<a?void 0:new ip(Math.max(f.from,a)-a,Math.min(f.to,b)-a);d&&c.set(e,d)}return new Xmb(c)}toString(){return[...this.Xe].map(([a,b])=>`"${a}":${b}`).join(",")}constructor(a=new Map){this.Xe=a}};Ymb=new Xmb;
Zmb=class{range(a,b){b?this.z$.set(a,ip.from(b)):this.z$.delete(a);return this}Xe(a){a.forEach((b,c)=>this.z$.set(c,ip.from(b)));return this}build(){return this.z$.size?new Xmb(this.z$):Ymb}constructor(){this.z$=new Map}};Bjb=class{toString(){return`${this.Hca||"_"}->${this.Bca||"_"}`}constructor(a,b){this.Hca=a;this.Bca=b}};anb=class{toString(){return`${$mb[this.type]}${this.length}`}constructor(a,b){this.type=a;this.length=b}};$mb={[0]:"R",[1]:"I"};
cnb=class{Cd(a,b){return new bnb(this,a,b)}toString(){const a=this.ega.join(""),b=[...this.Xe].map(([c,d])=>`"${c}":${d}`).join(",");return`{${a}|${b}}`}constructor(a,b,c,d){this.ega=a;this.Xe=b;this.pre=c;this.post=d}};dnb=new cnb([],new Map,0,0);
enb=class{append(a,b){ja(b>=0,"{} < 0",b);if(!b)return this;this.F3===a?this.length+=b:(this.F3!=null&&this.ops.push(new anb(this.F3,this.length)),this.F3=a,this.length=b);switch(a){case 0:this.pre+=b;this.post+=b;break;case 1:this.post+=b;break;default:throw new r(a);}return this}retain(a){return this.append(0,a)}insert(a){return this.append(1,a)}createRange(a,b){return this.r3a(a,void 0,b)}r3a(a,b,c){b=new Bjb(b&&ip.from(b),c&&ip.from(c));this.Xe.set(a,b);return this}ROa(a){a.forEach((b,c)=>this.Xe.set(c,
b));return this}build(){const a=this.F3,b=this.length;a===0?(this.pre-=b,this.post-=b):a!=null&&this.ops.push(new anb(a,b));return this.ops.length||this.Xe.size?new cnb(this.ops,this.Xe,this.pre,this.post):dnb}constructor(){this.ops=[];this.F3=void 0;this.post=this.pre=this.length=0;this.Xe=new Map}};
bnb=class{get next(){return this._next}get pwc(){return this.jwb}get hPb(){return this.YSa}get YKa(){return this.YSa-this.jwb}Hu(a,b){const c=m(this._next);la(c.type===a,"{} != {}",c.type,a);ja(0<b&&b<=c.length,"{} \u2209 ({}, {}]",b,0,c.length);this._next=b<c.length?new anb(a,c.length-b):this.i<this.input.length?this.input[this.i++]:void 0}lA(a){this.Hu(0,a);this.jwb+=a;this.YSa+=a}pga(a){this.Hu(1,a);this.YSa+=a}finish(){la(!this._next)}constructor(a,b=0,c=0){this.YSa=this.jwb=this.i=0;this.input=
(b=Math.max(0,b-a.pre,c-a.post))?[...a.ega,new anb(0,b)]:a.ega;this._next=this.i<this.input.length?this.input[this.i++]:void 0}};
__c.fnb=class extends Tp{Yg(){return new Zmb}Pg(){return new enb}isIdentity(a){return!a.ega.length&&!a.Xe.size}compose(a,b){if(this.isIdentity(a))return b;if(this.isIdentity(b))return a;const c=new Map,d=new Map,e=new Map;for(var f of Cjb(a.Xe,b.Xe)){var g=a.Xe.get(f),h=b.Xe.get(f);g&&h?(ja(gp(g.Bca,h.Hca)),e.set(f,new Bjb(g.Hca,h.Bca))):g?c.set(f,g):h&&d.set(f,h)}f=this.Pg();g=a.Cd(0,b.pre);a=b.Cd(a.post,0);b=g.next;for(h=a.next;h;){if(h.type===1)b=h.length,jp(c,void 0,g.hPb+a.YKa,b),a.pga(b),f.insert(b);
else if(b)b.type===1?(b=Math.min(b.length,h.length),jp(d,a.pwc-g.YKa,void 0,-b),g.pga(b),a.lA(b),f.insert(b)):(b=Math.min(b.length,h.length),g.lA(b),a.lA(b),f.retain(b));else throw Error("length mismatch");b=g.next;h=a.next}g.finish();a.finish();f.ROa(e);f.ROa(c);f.ROa(d);return f.build()}transform(a,b){if(this.isIdentity(a)||this.isIdentity(b))return ko(b,a);var c=new Map,d=new Map;const e=new Map,f=jo.vs();for(var g of Cjb(a.Xe,b.Xe)){var h=a.Xe.get(g),k=b.Xe.get(g);h&&k?(ja(gp(h.Hca,k.Hca)),e.set(g,
new Bjb(k.Bca,h.Bca)),Khb(f)):h?c.set(g,h):k&&d.set(g,k)}h=a.Cd(b.pre,0);k=b.Cd(a.pre,0);g=this.Pg();const l=this.Pg();var n=h.next;let p=k.next;for(;n||p;){if(n&&n.type===1)n=n.length,jp(d,k.pwc+h.YKa,k.hPb+h.YKa,n),h.pga(n),l.retain(n),g.insert(n);else if(p&&p.type===1)n=p.length,jp(c,h.pwc+k.YKa,h.hPb+k.YKa,n),jp(e,void 0,h.hPb+k.YKa,n),k.pga(n),l.insert(n),g.retain(n);else if(n&&p)n=Math.min(n.length,p.length),h.lA(n),k.lA(n),l.retain(n),g.retain(n);else throw Error(`unreachable case: ${n} x ${p}`);
n=h.next;p=k.next}h.finish();k.finish();d=l.ROa(d).build();c=g.ROa(c).ROa(e).build();ma(d.post-d.pre,b.post-b.pre);ma(c.post-c.pre,a.post-a.pre);return f.build(d,c)}Jl(a){if(!a.Xe.size)return dnb;const b=new Map(a.Xe);yjb(a,{insert:(c,d,e)=>jp(b,e,void 0,c)});a=Vg(b,c=>new Bjb(c.Bca,c.Hca));return new cnb([],a,0,0)}xk(a,b){if(a===b)return!0;if(a.ega.length!==b.ega.length||a.Xe.size!==b.Xe.size)return!1;for(let e=0;e<a.ega.length;e++){var c=a.ega[e],d=b.ega[e];if(c.type!==d.type||c.length!==d.length)return!1}for(const e of a.Xe.keys())if(c=
a.Xe.get(e),d=b.Xe.get(e),c?!(d&&gp(c.Hca,d.Hca)&&gp(c.Bca,d.Bca)):d)return!1;return!0}id(){return dnb}identity(){return dnb}apply(a,b){if(this.isIdentity(b)||!a.Xe.size&&!b.Xe.size)return a;const c=this.Yg(),d=new Map(a.Xe);for(const [e,f]of b.Xe)ja(gp(a.Xe.get(e),f.Hca)),d.delete(e),c.range(e,f.Bca);yjb(b,{insert:(e,f,g)=>Ajb(d,g,e)});return c.Xe(d).build()}Vl(a,b){if(this.isIdentity(b)||!a.Xe.size&&!b.Xe.size)return a;const c=this.Yg(),d=new Map(a.Xe);for(const [e,f]of b.Xe)ja(gp(a.Xe.get(e),f.Bca)),
d.delete(e),c.range(e,f.Hca);yjb(b,{insert:(e,f)=>Ajb(d,f,-e)});return c.Xe(d).build()}zi(a,b){const c=a.Xe,d=b.Xe;return a===b||c===d?!0:c.size===d.size&&[...c.keys()].every(e=>gp(c.get(e),d.get(e)))}equals(a){return this===a||a instanceof __c.fnb}constructor(){super();this.pP=Ymb}};__c.fnb.prototype.aF=da(130);__c.gnb=new __c.fnb;var hnb=class extends Tp{isIdentity(a){return this.components[a.key].isIdentity(a.value)}compose(a,b){const c=Djb(a.key,b.key);return{key:c,value:this.components[c].compose(a.value,b.value)}}transform(a,b){const c=Djb(a.key,b.key);a=this.components[c].transform(a.value,b.value);return Jhb(a,d=>({key:c,value:d}))}Jl(a){return{key:a.key,value:this.components[a.key].Jl(a.value)}}xk(a,b){return a.key===b.key&&this.components[a.key].xk(a.value,b.value)}identity(a){return{key:a.key,value:this.components[a.key].identity(a.value)}}apply(a,
b){const c=Djb(a.key,b.key);return{key:c,value:this.components[c].apply(a.value,b.value)}}Vl(a,b){const c=Djb(a.key,b.key);return{key:c,value:this.components[c].Vl(a.value,b.value)}}zi(a,b){return a===b?!0:a.key===b.key&&this.components[a.key].zi(a.value,b.value)}equals(a){if(this===a)return!0;const b=this.components,c=a.components;a=Object.keys(b);const d=Object.keys(c);return a.length===d.length&&a.every(e=>e in c&&b[e].equals(c[e]))}constructor(a){super();this.components=a}};var inb=class extends Tp{isIdentity(a){return this.sum.isIdentity(a)}compose(a,b){return this.sum.compose(a,b)}transform(a,b){return this.sum.transform(a,b)}Jl(a){return this.sum.Jl(a)}xk(a,b){return this.sum.xk(a,b)}identity(a){return this.sum.identity(Ejb(this,a))}apply(a,b){return this.sum.apply(Ejb(this,a),b).value}Vl(a,b){return this.sum.Vl(Ejb(this,a),b).value}zi(a,b){return a===b||this.sum.zi(Ejb(this,a),Ejb(this,b))}equals(a){return this===a||a instanceof inb&&this.sum.equals(a.sum)}constructor(a,
b){super();this.components=a;this.bWa=b;this.sum=new hnb(this.components)}};var Fjb=class extends Vp{create(a,b,c){return super.create(a,b,c)}nA(a){const b=this.bWa(a);return this.KM[b].nA(a)}connect(a,b){const c=this.tBb(a),d=this.KM[c].connect(a,{next:e=>{b.next({key:c,value:e})},error:e=>b.error(e)});return{next:e=>{ja(e.key===c);d.next(e.value)},complete:()=>d.complete()}}fc(a){const b=this.tBb(a);return this.KM[b].fc(a)}destroy(a,b){const c=this.tBb(a),d=this.bWa(b);ja(c===d);this.KM[c].destroy(a,b)}ij(a,b){const c=this.tBb(a),d=this.bWa(b);return c===d&&this.KM[c].ij(a,
b)}constructor(a,b,c){super(Up,Up);this.KM=a;this.bWa=b;this.tBb=c;this.domain=new inb(go(this.KM,d=>d.domain),this.bWa)}};var jnb=class extends Tp{isIdentity(){return!0}compose(){return 1}transform(){return ko(1,1)}Jl(){return 1}xk(){return!0}identity(){return 1}apply(){return 1}Vl(){return 1}zi(){return!0}equals(a){return this===a||a instanceof jnb}constructor(){super();this.unit=1}},knb=new jnb;var lnb;lnb=class extends Vp{nA(a){return a}connect(){return{next:()=>{},complete:()=>{}}}fc(a){return a}destroy(){}ij(){return!0}constructor(){super(yo,yo);this.domain=knb}};__c.mnb=new lnb;var nnb=new Map,onb=class extends Tp{isIdentity(a){return!a.size||Array.from(a.values()).every(b=>b===0)}compose(a,b){return Hjb(a,b)}transform(a,b){return ko(b,a)}Jl(a){return a.size?Vg(a,b=>-b):a}xk(a,b){return Gjb(a,b)}identity(){return nnb}apply(a,b){return Hjb(a,b)}Vl(a,b){return Hjb(a,this.Jl(b))}zi(a,b){return Gjb(a,b)}equals(a){return this===a||a instanceof onb}};var pnb,qnb;
pnb=class extends Wp{static F(a){hb(a,{values:Ro.struct})}n0(a){for(const [b,c]of a)(a=(this.map.get(b)||0)+c)?this.map.set(b,a):this.map.delete(b)}TU(){return new Map(this.map)}ij(a){const b=this.map,c=new Map;for(const [d,e]of b){const f=a.get(d)||0;e!==f&&c.set(d,f-e)}for(const [d,e]of a)!b.has(d)&&e&&c.set(d,e);this.Er(c);return!0}add(a){const b=this.map.get(a)||0;b>0||this.Er(new Map([[a,-b+1]]))}delete(a){const b=this.map.get(a)||0;b&&this.Er(new Map([[a,-b]]))}has(a){return(this.map.get(a)||0)>
0}get values(){return[...Ijb(this.map,a=>a>0).keys()]}[Symbol.iterator](){return this.values[Symbol.iterator]()}constructor(a,b){super();this.domain=a;this.map=(pnb.F(this),void 0);this.map=new dlb(b)}};qnb=class extends Vp{nA(a){return new pnb(this.domain,a)}connect(a,b){return a.connect(b)}fc(a){return a.fc()}destroy(a,b){ja(this.domain.zi(a.fc(),b))}ij(a,b){return a.ij(b)}constructor(){super(Up,Up);this.domain=new onb}};__c.rnb=new qnb;var snb,vnb,wnb,znb,Bq,Inb,Rnb,Snb,Unb,Wnb,Xnb;snb=Go({id:Zp,version:$p});__c.tnb=To({values:{app:snb},attributes:{oY:Mo(__c.Fib(Zp,Zp))}});__c.unb=Jo(-1,1);vnb=Jo(0,100);wnb=Jo(-100,100);__c.xnb=Jo(0,1);__c.ynb=Jo(-180,180);znb=Mo(vnb);Bq=Mo(wnb);__c.Anb=Mo(__c.xnb);__c.Bnb=Mo(__c.ynb);Cq=__c.Cq=Io(__c.llb);__c.Cnb=Lo(Cq);__c.Dnb=Mo(__c.Cnb);__c.Enb=Io(/^100%$/);__c.Fnb=Io(/^[0-9]+(\.[0-9]+)?%$/);__c.Gnb=Io(/^[0-9]+(\.[0-9]+)?px/);__c.Hnb=__c.Po(Qo(Zp));__c.Po(__c.mnb);Inb=Jib(0,10);
__c.Jnb=Fo(Inb,a=>a.length<=10);__c.Knb=Mo(__c.Jnb);__c.Lnb=Io(Jjb("L"));__c.Mnb=Io(Jjb("T"));__c.Nnb=Mo(Eo(1,2,3));__c.Onb=Go({text:Zp,uaa:Yp});__c.Pnb=Eo(1,2);__c.Qnb=Go({top:bq,left:bq});Rnb=Go({width:cq,height:cq});Snb=Go({top:bq,left:bq,height:cq,width:cq});__c.Tnb=Mo(Snb);Unb=Go({pf:Fo($p)});__c.Vnb=Mo(Unb);Wnb=Go({text:Zp,user:Zp,brand:Zp});Xnb=Go({text:Zp,url:Zp});var Ynb,Znb,$nb,aob,bob,cob,dob,eob;Ynb=Go({type:Eo("google-sheets"),url:Zp,e3a:Lo(aq),OG:Zp,range:__c.gq});Znb={gQb:Io(/^([A-Z]+:[A-Z]+|[1-9]\d*:[1-9]\d*|[A-Z]+[1-9]\d*:[A-Z]+[1-9]\d*)$/)};$nb=Go(Znb);aob=Go({type:Eo("copy-sheets"),e3a:Lo(aq),dg:Zp,q9:Zp,Xe:Fo($nb)});bob=Go({...Znb});cob=Go({type:Eo("live-sheets"),e3a:Lo(aq),q9:Zp,Xe:Fo(bob)});dob=Go({app:snb,source:Zp,title:__c.gq});eob=Go({type:Eo("app"),PYd:dob,e3a:Lo(aq)});
__c.fob=__c.Ho({"google-sheets":Ynb,"copy-sheets":aob,"live-sheets":cob,app:eob},a=>a.type);var gob,hob,Dq,iob,job,kob,lob,mob,nob,oob,pob,qob,rob,sob,tob,uob;gob=To({attributes:{Kkc:Mo(Eo(1,2,3,4)),value:Mo(bq)}});hob=__c.Po($p,gob);Dq=To({attributes:{L4a:__c.lq,Wi:__c.lq},Sb:{z4:hob}});iob=Dq.Fi({values:{type:Eo("brightness")}});job=Dq.Fi({values:{type:Eo("contrast")}});kob=Dq.Fi({values:{type:Eo("highlights")}});lob=Dq.Fi({values:{type:Eo("shadows")}});mob=Dq.Fi({values:{type:Eo("whites")}});nob=Dq.Fi({values:{type:Eo("blacks")}});oob=Dq.Fi({values:{type:Eo("saturation")}});pob=Dq.Fi({values:{type:Eo("vibrance")}});
qob=Dq.Fi({values:{type:Eo("temperature")}});rob=Dq.Fi({values:{type:Eo("tint")}});sob=Go({id:Zp});tob=Dq.Fi({values:{type:Eo("lut"),c0a:sob}});uob=kp({brightness:iob,contrast:job,highlights:kob,shadows:lob,whites:mob,blacks:nob,saturation:oob,vibrance:pob,temperature:qob,tint:rob,lut:tob},a=>a.type,a=>a.type);__c.vob=Vo(uob);var wob,xob,zob,Bob,Cob,Eob,Fob,Gob,Hob,Iob,Job,Kob;wob=Go({top:bq,left:bq,width:cq,height:cq,rotation:__c.ynb});xob=Go({id:Zp,vg:bq});__c.yob=To({attributes:{mda:Oo(xob),brightness:Bq,contrast:Bq,saturation:Bq,d0:Bq,D5a:znb,blur:Bq,Cla:Bq,bEa:Bq,yna:znb,lua:znb,highlights:Bq,m9:Bq,w0:znb,zxa:znb}});zob=No(Lo(__c.yob));__c.Aob=To({values:{media:snb},Sb:{filter:zob},attributes:{cF:Oo(snb),wf:Oo(wob),aa:__c.Anb,Dg:Mo(__c.Fib(Cq,Cq)),altText:Oo(__c.Onb)}});Bob=No(Lo(__c.Aob));Cob=Go({$c:cq,Dw:cq});
__c.Dob=To({values:{video:Zp,id:__c.gq},Sb:{filter:zob,tu:__c.vob},attributes:{wf:Mo(wob),aa:__c.Anb,Dg:Mo(__c.Fib(Cq,Cq)),altText:Oo(__c.Onb),trim:Oo(Cob),ksa:Mo(__c.Pnb),autoplay:jq,playbackRate:Oo(Jo(.25,4)),volume:Mo(Jo(0,4))}});Eob=No(Lo(__c.Dob));Fob=Go({color:Cq,aa:__c.xnb,position:bq},a=>a.position>=-1&&a.position<=2);Gob=Fo(Fob,a=>a.length>=2&&a.every((b,c,d)=>c===0||d[c-1].position<=b.position));Hob=Mo(Gob);Iob=To({values:{type:Eo("linear")},attributes:{Wb:Hob,rotation:__c.Bnb}});
Job=To({values:{type:Eo("radial")},attributes:{Wb:Hob,center:Mo(__c.Qnb)}});__c.Eq=kp({linear:Iob,radial:Job},a=>a.type,a=>a.type);Kob=No(Lo(__c.Eq));__c.Fq=To({Sb:{image:Bob,video:Eob,gradient:Kob},attributes:{dropTarget:__c.dmb,color:__c.Dnb,aa:__c.Anb,locked:jq,KB:jq,PM:__c.oq,Fp:__c.oq,flipX:jq,flipY:jq}});__c.Gq=To({Sb:{fill:__c.Fq},attributes:{weight:__c.mq,color:__c.Dnb,Xo:__c.Knb,Pt:jq}});__c.Lob=class{encode(a){return String(a)}decode(a){switch(typeof this.defaultValue){case "string":return a;case "number":return Number(a);case "boolean":return a!=="false";default:throw Error();}}validate(a){ja(this.isValid(a),"invalid value: {}",a)}normalize(a){this.validate(a);return this.x2c(a)}x2c(a){return a}constructor(a,b,c){this.scope=a;this.defaultValue=b;this.aed=c}};__c.np=Object.keys({hw:0})[0];
__c.Vjb=class{getScope(a){return this.attributes[a].scope}tqa(a){if(typeof a==="function")return a;switch(a){case "all":return()=>!0;case "block":return this.kze;case "inline":return this.Vze;default:throw new r(a);}}copy(a,b,c){__c.op(this,b,a,(d,e)=>c[e]=d)}gR(a){for(const [b,c]of Object.entries(a))ja(this.KC(b)),c!=null&&this.attributes[b].validate(c)}validate(a,b){a=m(this.attributes[a]);b!=null&&a.validate(b)}normalize(a,b){a=m(this.attributes[a]);return b!=null?a.normalize(b):void 0}encode(a,
b){return __c.mp(this.attributes[a],b)}decode(a,b){return __c.lp(this.attributes[a],b)}constructor(a,b,c,d){this.attributes=a;this.jQa=b;this.nWa=c;this.i6e=d;this.Ui=go(this.attributes,e=>e.defaultValue);this.UAb={as:this.Ui,ss:go(this.Ui,(e,f)=>e!=null?this.encode(f,e):void 0)};this.KC=e=>e in this.attributes;this.kze=e=>this.getScope(e)==="block";this.Vze=e=>this.getScope(e)==="inline";this.sIb=e=>{e=Ljb(e);return!(!e||!this.nWa.has(e))};this.wLa=e=>typeof e!=="string"?!1:__c.Njb(this,e)!=null;
this.bed=e=>{const f=this.i6e;return typeof e==="string"&&f.has(e)};this.TDa=(e,f,g)=>f===g?!0:f!=null&&g!=null?this.attributes[e].TDa(f,g):f==null&&g==null}};__c.Vjb.prototype.X2=da(140);
var Qjb=class extends __c.Lob{ETa(){return new Qjb(this.scope,this,!0)}isValid(a){return Number.isInteger(a)&&this.min<=a&&a<=this.max}TDa(a,b){return a===b}encode(a){return`${a.toFixed(1)}${this.units}`}decode(a){if(!a.endsWith(this.units))return NaN;a=a.substring(0,a.length-this.units.length);return super.decode(a)}constructor(a,{min:b=-2147483648,max:c=2147483647,defaultValue:d=0,units:e=""}={},f=!1){super(a,d,f);ja(Number.isInteger(b)&&b>=-2147483648);ja(Number.isInteger(c)&&c<=2147483647);ja(Number.isInteger(d));
ja(b<=d&&d<=c);this.min=b;this.max=c;this.units=e;__c.Kjb(this)}},Sjb=class extends __c.Lob{ETa(){return new Sjb(this.scope,this,!0)}isValid(a){return Number.isFinite(a)&&this.min<=a&&a<=this.max}x2c(a){return a===0?a:Number(a.toPrecision(this.pzd))}TDa(a,b){return a===b}encode(a){return`${this.aza==="fixed"&&Number.isInteger(a)?a.toFixed(1):String(a)}${this.units}`}decode(a){if(!a.endsWith(this.units))return NaN;a=a.substring(0,a.length-this.units.length);return super.decode(a)}constructor(a,{min:b=
-Number.MAX_VALUE,max:c=Number.MAX_VALUE,pzd:d=6,aza:e="integer",defaultValue:f=0,units:g=""}={},h=!1){super(a,f,h);ja(Number.isFinite(b)&&b>=-Number.MAX_VALUE);ja(Number.isFinite(c)&&c<=Number.MAX_VALUE);ja(Number.isInteger(d)&&1<=d&&d<=15);this.min=b;this.max=c;this.units=g;this.pzd=d;this.aza=e;__c.Kjb(this)}},Tjb=class extends __c.Lob{isValid(a){return this.QBa.test(a)}ETa(){return new Tjb(this.scope,this.QBa,this.defaultValue,!0)}TDa(a,b){return a===b}constructor(a,b,c,d=!1){super(a,c,d);this.QBa=
b;__c.Kjb(this)}},Ujb=class extends __c.Lob{isValid(a){return this.CFd.has(a)}ETa(){return new Ujb(this.scope,this.CFd,this.defaultValue,!0)}TDa(a,b){return a===b}constructor(a,b,c,d=!1){super(a,c,d);this.CFd=new Set(b);__c.Kjb(this)}};var Qob,Rob,Sob;__c.Mob="normal thin extralight light medium semibold bold ultrabold heavy".split(" ");__c.Nob=/^Y[A-Za-z0-9_-]{10},\d+$/;__c.Oob=["normal","italic"];__c.Pob=["none","underline"];Qob=["start","center","end","justify"];
Hq=__c.Hq={fontFamily:sp("inline",__c.Nob,"YACgEZ1cb1Q,0"),fontSize:rp("inline",{min:0,defaultValue:16,units:"px"}),fontWeight:tp("inline",__c.Mob),fontStyle:tp("inline",__c.Oob),iS:sp("inline",__c.olb,"1"),verticalAlign:sp("inline",__c.qlb,"0%"),color:sp("inline",__c.llb,"#000000"),backgroundColor:sp("inline",mlb,"transparent"),I5:rp("inline",{min:0,max:.2,units:"em"}),H5:rp("inline",{min:0,max:.16,units:"em"}),Xn:tp("inline",__c.Pob),Tz:tp("inline",["none","strikethrough"]),link:sp("inline",__c.klb,
""),letterSpacing:rp("inline",{min:-.2,max:.8,units:"em"}),lineHeight:rp("block",{min:.5,max:2.5,defaultValue:1.4}),direction:tp("block",["ltr","rtl"]),textAlign:tp("block",Qob),BB:tp("block","none disc circle square decimal lower-alpha lower-roman checked unchecked".split(" ")),uL:__c.Rjb({min:0}),marginInlineStart:__c.Rjb({min:0,max:200,units:"px"}),textIndent:__c.Rjb({min:0,max:32,units:"px"}),j6a:sp("inline",/^$/,""),k6a:sp("inline",/^$/,""),Qsb:sp("inline",/^$/,"")};
Rob={Ep:sp("inline",/^(K[a-zA-Z0-9_-]{10}|)$/,"")};Sob={...go(Hq,a=>a.ETa()),$B:tp("inline",["add","delete"]).ETa()};__c.Iq=__c.Wjb({static:Hq,mWa:Rob,hw:Sob});__c.Tob=`${Object.keys({Ep:0})[0]}/`;__c.Uob=Object.keys({$B:0})[0];var Xob=class{E9(a){if(this.mode!==a){switch(this.mode){case void 0:break;case 0:this.ops.push(up(this.acc));this.pre+=this.acc;this.post+=this.acc;this.acc=0;break;case 1:this.ops.push(Xjb(this.acc));this.post+=this.acc;this.acc=0;break;default:throw new r(this.mode);}this.mode=a}}accumulate(a,b=1){ja(b>=0,"{} < 0",b);b&&(this.E9(a),this.acc+=b);return this}retain(a){return this.accumulate(0,a)}expand(a){return this.accumulate(1,a)}append(a){switch(a.type){case 0:return this.accumulate(0,a.length);
case 1:return this.accumulate(1,a.length);default:throw new r(a);}}build(){this.mode!==0&&this.E9();return this.ops?new Vob(this.ops,this.pre,this.post):Wob}constructor(){this.ops=[];this.acc=this.post=this.pre=0;this.mode=void 0}},Yob=class{static create(a,b,c,d=0,e=0){ja(d>=0,"{} < 0",d);ja(e>=0,"{} < 0",e);b=Math.max(0,d-b,e-c);return new Yob(b?[...a,up(b)]:a)}get head(){return this.Hm}lA(a){return this.LD(0,a).length}LD(a,b=1){const c=m(this.Hm);if(c.type!==a)throw Error();const d=c.length;ja(0<
b&&b<=d,"{} \u2209 (0, {}]",b,d);if(b<d)switch(a){case 0:return this.Hm=up(d-b),up(b);case 1:return this.Hm=Xjb(d-b),Xjb(b);default:throw new r(a);}else return this.Hm=this.ops[this.i++],c}finish(){la(this.Hm==null)}constructor(a){this.ops=a;this.i=0;this.Hm=a[this.i++]}},Vob=class{isEmpty(){return this.pre===0&&this.post===0&&this.ops.length===0}Cd(a,b){return Yob.create(this.ops,this.pre,this.post,a,b)}toString(){return this.ops.map(a=>{switch(a.type){case 0:return`R(${a.length})`;case 1:return`X(${a.length})`;
default:throw new r(a);}}).join("")}constructor(a,b,c){this.ops=a;this.pre=b;this.post=c}},Wob=new Vob([],0,0),Zob=class extends Tp{Pg(){return new Xob}isIdentity(a){return a.isEmpty()}compose(a,b){if(this.isIdentity(a))return b;if(this.isIdentity(b))return a;const c=this.Pg(),d=a.Cd(0,b.pre),e=b.Cd(a.post,0);let f=d.head,g=e.head;for(;f||g;){if(g)if(g.type===1)c.append(e.LD(g.type,g.length));else if(f)if(f.type===1){var h=Math.min(f.length,g.length);d.LD(f.type,h);e.LD(g.type,h);c.append(Xjb(h))}else h=
Math.min(f.length,g.length),d.LD(f.type,h),e.LD(g.type,h),c.append(up(h));else throw Error(`length mismatch: ${a} ; ${b}`);else throw Error(`length mismatch: ${a} ; ${b}`);f=d.head;g=e.head}d.finish();e.finish();return c.build()}transform(a,b){if(this.isIdentity(a)||this.isIdentity(b))return ko(b,a);const c=a.Cd(b.pre,0),d=b.Cd(a.pre,0),e=this.Pg(),f=this.Pg();for(var g=c.head,h=d.head;g||h;){if(g&&g.type===1)h=c.LD(g.type,g.length),f.append(up(h.length)),e.append(h);else if(h&&h.type===1){var k=
d.LD(h.type,h.length);f.append(k);e.append(up(h.length))}else if(g&&h)k=Math.min(g.length,h.length),g=c.LD(g.type,k),h=d.LD(h.type,k),f.append(h),e.append(g);else throw Error(`length mismatch (${a} x ${b})`);g=c.head;h=d.head}c.finish();d.finish();return ko(f.build(),e.build())}Jl(){return Wob}xk(a,b){if(a===b)return!0;if(!a||!b||a.pre!==b.pre||a.post!==b.post)return!1;a=a.Cd();b=b.Cd();let c=a.head,d=b.head;for(;c||d;){if(!c||!d)return!1;switch(c.type){case 0:if(d.type!==0||c.length!==d.length)return!1;
a.lA(c.length);b.lA(d.length);break;case 1:if(d.type!==1||c.length!==d.length)return!1;vp(a,c.length);vp(b,d.length);break;default:throw new r(c);}c=a.head;d=b.head}return!0}identity(){return Wob}apply(a){return a}Vl(a){return a}zi(a,b){return a===b}equals(a){return this===a||a instanceof Zob}},Yjb=new Map,zp=new Zob;var apb,cpb,bpb,$ob,epb,akb,fpb,gpb;
apb=class extends Tp{Yg(){return new akb(this.lC)}pP(){return $ob}He(a={}){return{x:a.x||zp.Pg().build(),y:a.y||zp.Pg().build(),attrs:a.attrs||xp(this).build()}}isIdentity(a){return zp.isIdentity(a.x)&&zp.isIdentity(a.y)&&a.attrs.items.isEmpty()}compose(a,b){const c=zp.compose(a.x,b.x),d=zp.compose(a.y,b.y);a=ekb(this,a.attrs,b.x,b.y);if(b.attrs.items.isEmpty())return this.He({x:c,y:d,attrs:a});const e=xp(this);ckb(a,b.attrs,e,(f,g,h)=>{g?h?(la(this.lC(f,g.n,h.o)),f={o:g.o,n:h.n}):f=g:f=h;return f});
return{x:c,y:d,attrs:e.build()}}YIa(a,b,c,d){return zp.isIdentity(c)&&zp.isIdentity(d)||b.items.isEmpty()?b:dkb(a,this.lC,b,c,d)}transform(a,b){const c=jo.vs(),{Fu:d,cv:e}=mo(c,zp.transform(a.x,b.x)),{Fu:f,cv:g}=mo(c,zp.transform(a.y,b.y));a=ekb(this,a.attrs,d,f);b=ekb(this,b.attrs,e,g);if(a.items.isEmpty()||b.items.isEmpty()){var h=this.He({x:d,y:f,attrs:b});a=this.He({x:e,y:g,attrs:a});return c.build(h,a)}var k=Math.max(a.Sq,b.Sq),l=Math.max(a.YA,b.YA);a=a.Cd(void 0,k,l);k=b.Cd(void 0,k,l);b=xp(this);
l=xp(this);for(var n=a.head,p=k.head;n||p;){if(n&&n.type===0||p&&p.type===0){n=a.Ux();p=k.Ux();const x=b.Ux(),z=l.Ux();for(var q=n.head,u=p.head;q||u;){if(q&&q.type===0||u&&u.type===0){q=n.ww();u=p.ww();for(h of bkb(q,u)){q=h;u=n.attrs[h];var w=p.attrs[h];u&&w?(la(this.lC(q,u.o,w.o)),q=lo({o:w.n,n:u.n})):q=ko(w,u);const {Fu:B,cv:C}=mo(c,q);x.um(h,C);z.um(h,B)}}else if(q&&u)q=Math.min(q.length,u.length),n.Go(q),p.Go(q),x.qC(q),z.qC(q);else if(q)q=q.length,n.Go(q),x.qC(q),z.qC(q);else if(u)q=u.length,
p.Go(q),x.qC(q),z.qC(q);else throw Error();q=n.head;u=p.head}n.finish();p.finish();x.finish();z.finish()}else if(n&&p)n=Math.min(n.length,p.length),yp(a,n),yp(k,n),b.rows(n),l.rows(n);else if(n)n=n.length,yp(a,n),b.rows(n),l.rows(n);else if(p)n=p.length,yp(k,n),b.rows(n),l.rows(n);else throw Error();n=a.head;p=k.head}a.finish();k.finish();h=this.He({x:d,y:f,attrs:l.build()});a=this.He({x:e,y:g,attrs:b.build()});return c.build(h,a)}Jl(a){a=a.attrs.Cd();const b=xp(this);for(var c=a.head;c;){if(c.type===
0){c=a.Ux();const e=b.Ux();for(var d=c.head;d;){if(d.type===0){d=c.ww();for(const f of Cp(d))d=c.attrs[f],e.um(f,d&&{o:d.n,n:d.o})}else d=d.length,c.Go(d),e.qC(d);d=c.head}c.finish();e.finish()}else c=c.length,yp(a,c),b.rows(c);c=a.head}return this.He({attrs:b.build()})}xk(a,b){return zp.xk(a.x,b.x)&&zp.xk(a.y,b.y)&&a.attrs.equals(b.attrs)}identity(){return{x:zp.Pg().build(),y:zp.Pg().build(),attrs:xp(this).build()}}apply(a,b){a=this.YIa("apply",a,b.x,b.y);if(b.attrs.items.isEmpty())return a;const c=
this.Yg();ckb(a,b.attrs,c,(d,e,f)=>this.cZd(d,e,f));return c.build()}Vl(a,b){if(b.attrs.items.isEmpty())return this.YIa("unapply",a,b.x,b.y);const c=this.Yg();ckb(a,b.attrs,c,(d,e,f)=>this.w$e(d,e,f));return this.YIa("unapply",c.build(),b.x,b.y)}zi(a,b){return a.equals(b)}equals(a){return this===a?!0:a instanceof apb?this.lC===a.lC:!1}constructor(a){super();this.lC=a;this.gCd=(b,c,d)=>{if(c===d)return!0;if(c&&d){const e=c.n,f=d.n;return this.lC(b,c.o,d.o)&&this.lC(b,e,f)}return!c&&!d};this.cZd=(b,
c,d)=>d!=null?(la(this.lC(b,c,d.o),"{}: {} != {}",b,c,d.o),d.n):c;this.w$e=(b,c,d)=>d!=null?(la(this.lC(b,c,d.n)),d.o):c}};
cpb=class{isEmpty(){return!this.items.length}Cd(a){return new bpb(this.items,this.length,a)}forEach(a,{grad:b,Lc:c}){for(const d of this.items)switch(d.type){case 0:b&&b(d.value);break;case 1:c&&c(d.length);break;default:throw new r(d);}(a=Math.max(0,a-this.length))&&c&&c(a)}equals(a,b){if(this===a)return!0;if(this.length!==a.length)return!1;const c=this.Cd();a=a.Cd();for(var d=c.head,e=a.head;d||e;){if(!d||!e)return!1;switch(d.type){case 0:if(e.type!==0)return!1;d=c.ww();e=a.ww();if(d!=null?e==null||
!b(d,e):e!=null)return!1;break;case 1:if(e.type!==1||d.length!==e.length)return!1;c.Go(d.length);a.Go(e.length);break;default:throw new r(d);}d=c.head;e=a.head}return!0}toString(a="C",b="G",c=JSON.stringify){return this.items.map(d=>{switch(d.type){case 1:return`${a}${d.length}`;case 0:return`${b}${c(d.value)}`;default:throw new r(d);}}).join()}constructor(a,b){this.items=a;this.length=b}};__c.dpb=new cpb([],0);
bpb=class{get head(){return this.Hm}Go(a){var b=this.Hm;if(!b||b.type!==1)throw Error(`expected cell, found: ${b&&b.type}`);b=b.length;a=Math.min(a,b);this.Hm=a<b?fkb(b-a):this.input[this.i++];return a}ww(){const a=this.Hm;if(a&&a.type!==1)return this.Hm=this.input[this.i++],a.value}finish(){la(this.Hm==null,"stream not empty: {}",this.Hm)}constructor(a,b,c=0){this.i=0;c=Math.max(0,c-b);this.length=b+c;this.input=c?[...a,fkb(c)]:a;this.Hm=this.input.length?this.input[this.i++]:void 0}};
Ap=__c.Ap=class{grad(a){if(a==null)return this;la(this.bra==null,"nextGrad already set: {}",this.bra);this.bra=a;return this}Lc(a){if(a<=0)return this;this.bra!=null&&(this.ara&&(this.items.push(fkb(this.ara)),this.ara=0),this.items.push({type:0,value:this.bra}),this.bra=void 0);this.ara+=a;this.P4+=a;return this}build(){this.bra!=null?(la(this.ara!==0),this.items.push(fkb(this.ara)),this.items.push({type:0,value:this.bra}),this.ara=0,this.bra=void 0):this.P4-=this.ara;return new cpb(this.items,this.P4)}constructor(){this.items=
[];this.ara=this.P4=0;this.bra=void 0}};
Bp=__c.Bp=class{static of(a,b,c,d){return b.isEmpty()?$ob:new Bp(a,b,c,d)}Cd(a=()=>!0,b=0,c=0){b=Math.max(this.Sq,b);c=Math.max(this.YA,c);const d=this.items.Cd(c);return new epb(this.lC,d,a,b,c)}forEach(a,b,c=0,d=0){a=this.Cd(a,c,d);c=a.head;let e=0;for(;c;)e=c.type!==0&&a.iJe?e+yp(a,c.length):e+a.o8b((f,g)=>b(e,f,g)),c=a.head;a.finish()}serialize(a){const b=a.Ux;this.items.forEach(this.items.length,{Lc:a.rows,grad:c=>{const {qC:d,grad:e,veb:f}=b();c.forEach(c.length,{Lc:d,grad:e});f()}})}equals(a){return this===
a?!0:a instanceof Bp&&this.YA===a.YA&&this.Sq===a.Sq?this.items.equals(a.items,(b,c)=>b.equals(c,(d,e)=>kkb(this.lC,d,e))):!1}toString(){return this.items.toString("R","G",a=>a.toString("C","G",$jb))}constructor(a,b,c,d){this.lC=a;this.items=b;this.Sq=c;this.YA=d}};$ob=new Bp((a,b,c)=>b===c,__c.dpb,0,0);
epb=class{get head(){return this.lWa.head}o8b(a){la(this.FX==null);const b=this.Ux();var c=b.head;let d=0;for(;c;){if(c.type===0)b.ww();else{c=b.Go(c.length);if(!Dp(b.attrs)){const e={...b.attrs};for(let f=0;f<c;f++)a(d+f,e)}d+=c}c=b.head}b.finish();return this.head?yp(this,1):0}get iJe(){la(this.head!=null);la(this.FX==null);return this.head.type===1&&this.JB.isEmpty()}Ux(){la(this.FX==null);var a=this.lWa.ww();if(a){a=a.Cd(this.Sq);for(var b=this.JB.Cd(this.Sq),c=new Ap,d=a.head,e=b.head;d||e;){if(d&&
d.type===0||e&&e.type===0){const g=a.ww(),h=b.ww();b:{d=this.XGa;e=this.tqa;if(!g){d=h;break b}const k={...h};for(f in g){if(e&&!e(f))continue;const l=g[f];ja(gkb(d,f,h===null||h===void 0?void 0:h[f],l.t));l.b?k[f]=l.b:delete k[f]}d=Dp(k)?void 0:k}c.grad(d)}else if(d&&e)d=Math.min(d.length,e.length),a.Go(d),b.Go(d),c.Lc(d);else throw Error("length mismatch");d=a.head;e=b.head}var f=c.build()}else f=this.JB;this.FX=f;return new fpb(this.XGa,this.tqa,this.FX.Cd(this.Sq),this.ktc)}finish(){la(this.FX==
null);this.lWa.finish()}constructor(a,b,c,d,e){this.XGa=a;this.lWa=b;this.tqa=c;this.Sq=d;this.YA=e;this.JB=__c.dpb;this.FX=void 0;this.ktc=()=>{la(this.FX!=null);this.JB=this.FX;this.FX=void 0}}};
akb=class{Ux(){la(this.Crb==null);return this.Crb=new gpb(this.lC,this.k6d)}rows(a){this.Jac.Lc(a);return this}build(){la(this.Crb==null);la(this.JB.isEmpty(),"prevDxs not empty: {}",this.JB);const a=this.Jac.build();return Bp.of(this.lC,a,this.Sq,a.length)}constructor(a){this.lC=a;this.Jac=new Ap;this.Sq=0;this.JB=__c.dpb;this.Crb=void 0;this.k6d=b=>{la(this.Crb!=null);this.Sq=Math.max(this.Sq,b.length);var c=this.JB.Cd(this.Sq);const d=b.Cd(this.Sq),e=new Ap;for(var f=c.head,g=d.head;f||g;){if(f&&
f.type===0||g&&g.type===0)f=c.ww(),g=d.ww(),f=__c.jkb(this.lC,f,g),e.grad(f);else if(f&&g)f=Math.min(f.length,g.length),c.Go(f),d.Go(f),e.Lc(f);else throw Error("length mismatch");f=c.head;g=d.head}c=e.build();c.isEmpty()||this.Jac.grad(c);this.JB=b;this.Crb=void 0}}};
fpb=class{get attrs(){return this.eJ}get head(){return this.UBb.head}Go(a){return this.UBb.Go(a)}ww(){const a=this.UBb.ww();this.Hma(a);return a}finish(){this.UBb.finish();this.Sl()}Hma(a){if(a)for(const b in a){if(!this.tqa(b))continue;const c=__c.hkb(this.XGa,b,this.eJ[b],a[b]);c==null?delete this.eJ[b]:this.eJ[b]=c}}constructor(a,b,c,d){this.XGa=a;this.tqa=b;this.UBb=c;this.Sl=d;this.eJ={}}};
gpb=class{um(a,b){var c=this.XGa,d=this.eJ[a];(b=c(a,d,b)?void 0:{rc:d,r:b})?(this.cK||(this.cK={}),this.cK[a]=b):this.cK&&(delete this.cK[a],Dp(this.cK)&&(this.cK=void 0));return this}attrs(a){for(const b of Cp(a))this.um(b,a[b]);return this}qC(a){if(a<=0)return this;this.Hma();this.axa.Lc(a);return this}Hma(){if(this.cK){var a=this.cK;this.cK=void 0;for(const b in a){const c=__c.hkb(this.XGa,b,this.eJ[b],a[b]);c==null?delete this.eJ[b]:this.eJ[b]=c}this.axa.grad(a)}}finish(){this.Hma();la(Dp(this.eJ));
const a=this.axa.build();this.Sl(a)}constructor(a,b){this.XGa=a;this.Sl=b;this.eJ={};this.cK=void 0;this.axa=new Ap}};var hpb=class extends Wp{get Sq(){return this.grid.Sq}get YA(){return this.grid.YA}set(a,b,c){const {F4e:d,r4e:e,YCb:f=d,rke:g=e}=b;b=new Set;const h=xp(this.domain);h.rows(d);for(let n=d;n<=f;n++){const p=h.Ux();p.qC(e);for(let q=e;q<=g;q++){var k=this.grid.get(n,q);k=lkb(this,a,k,c);for(const u of b)p.um(u);p.attrs(k);for(const u of Object.keys(k))b.add(u);p.qC(1)}for(const q of b)p.um(q);p.finish();h.rows(1)}a=h.Ux();a.qC(e);for(c=e;c<=g;c++){for(var l of b)a.um(l);a.qC(1)}for(const n of b)a.um(n);
a.finish();l=this.domain.He({attrs:h.build()});this.Er(l)}write(a,b,c){c==null||Object.keys(c).length===0?this.grid.delete(a,b):this.grid.set(a,b,c)}get(a,b,c){b=this.grid.get(b,c);if(b!=null&&(a=__c.pp(this.wh,a,b),Object.keys(a).length!==0))return a}TU(){const a=this.domain.Yg();for(let b=0;b<=this.YA;b++){const c=a.Ux();let d={};for(let e=0;e<=this.Sq;e++){const f=this.grid.get(b,e);for(const g of okb(d,f))c.um(g,f&&f[g]);d=f;c.qC(1)}c.finish();a.rows(1)}return a.build()}destroy(a){const b=this.fc();
la(this.domain.zi(b,a))}ij(a){const b=this.fc(),c=xp(this.domain);ckb(b,a,c,(d,e,f)=>e==null&&f==null?void 0:{o:e,n:f});this.Er(this.domain.He({attrs:c.build()}));return!0}n0(a){this.P3b(a.x);this.Q3b(a.y);nkb(this,a.attrs)}P3b(a){if(a.pre!==0||a.post!==0){var b=0;a=a.Cd();for(var c=a.head;c;)c.type===0?b+=a.lA(c.length):(c=vp(a,c.length),vib(this.grid,b,c),b+=c),c=a.head}}Q3b(a){let b=0;a=a.Cd();for(var c=a.head;c;)c.type===0?b+=a.lA(c.length):(c=vp(a,c.length),wib(this.grid,b,c),b+=c),c=a.head}constructor(a,
b,c){super();this.wh=a;this.domain=b;this.grid=new Llb;c.forEach(a.KC,(d,e,f)=>{Object.keys(f).length===0||this.grid.set(d,e,f)});la(this.domain.zi(c,this.TU()))}},ipb=class extends Jlb{Yg(){return this.domain.Yg()}nA(a){return new hpb(this.wh,this.domain,a)}Dn(a){return a}connect(a,b){return this.Dn(a).connect(b)}fc(a){return this.Dn(a).fc()}destroy(a,b){this.Dn(a).destroy(b)}ij(a,b){return this.Dn(a).ij(b)}constructor(){var a=__c.Jq;super();this.wh=a;this.domain=new apb(a.TDa)}};__c.kpb=class{get Sq(){return this.grid.Sq}get YA(){return this.grid.YA}get rows(){return this.grid.rows}forEach(a){this.grid.forEach((b,c,d)=>{a(d.state,Ep(b,c,d.right,d.bottom))})}map(a){const b=new jpb;this.forEach((c,d)=>{b.add(d,a(c,d))});return b.build()}get(a,b){var c=this.grid.rows[b];if(c!=null&&(c=c.cells[a],c!=null))return __c.pkb(Ep(a,b,c.right,c.bottom),c.state)}values(){const a=[];this.forEach((b,c)=>{a.push(__c.pkb(c,b))});return a}Cd(){return this.grid.Cd()}constructor(a){this.grid=
a}};__c.kpb.prototype.Mkc=da(141);
var jpb=class{add(a,b){Akb(this.N5d,a);this.$ud.add(a.left,a.top,a.right,a.bottom,{right:a.right,bottom:a.bottom,state:b});return this}build(){const a=this.$ud.build();return a.isEmpty?lpb:new __c.kpb(a)}constructor(){this.$ud=new mpb;this.N5d=new npb}},opb=class{constructor(a,b){this.type=0;this.o=a&&{right:a.right,bottom:a.bottom,state:a.state};this.n=b&&{right:b.right,bottom:b.bottom,state:b.state}}},ppb=class{constructor(a,b){this.bounds=a;this.delta=b;this.type=1}},Gp=class{add(a,b,c){if(c==
null)return this;switch(c.type){case 1:var d=a,e=b;if(c.bounds&&c.bounds.o){var f=Ep(a,b,c.bounds.o.right,c.bounds.o.bottom);Akb(this.tld,f);d=Math.max(d,c.bounds.o.right);e=Math.max(e,c.bounds.o.bottom)}c.bounds&&c.bounds.n&&(f=Ep(a,b,c.bounds.n.right,c.bounds.n.bottom),Akb(this.Ckd,f),d=Math.max(d,c.bounds.n.right),e=Math.max(e,c.bounds.n.bottom));this.UYa.add(a,b,d,e,c);return this;case 0:return d=a,e=b,c.o&&(f=Ep(a,b,c.o.right,c.o.bottom),Akb(this.tld,f),d=Math.max(d,c.o.right),e=Math.max(e,c.o.bottom)),
c.n&&(f=Ep(a,b,c.n.right,c.n.bottom),Akb(this.Ckd,f),d=Math.max(d,c.n.right),e=Math.max(e,c.n.bottom)),this.UYa.add(a,b,d,e,c),this;default:throw new r(c);}}build(){return this.UYa.build()}constructor(){this.UYa=new mpb;this.tld=new npb;this.Ckd=new npb}},rpb=class{get isEmpty(){return this.rows.length===0}forEach(a){this.rows.forEach(({cells:b},c)=>{b.forEach((d,e)=>{a(e,c,d)})})}values(){const a=[];this.forEach((b,c,d)=>a.push([b,c,d]));return a}Cd(){return new qpb(this.rows)}constructor(a,b,c){this.rows=
a;this.Sq=b;this.YA=c}},qpb=class{get head(){const a=this.rows[this.y];return a&&a.cells[this.x]&&{x:this.x,y:this.y,value:a.cells[this.x]}}Hu(){const a=m(this.head),b=m(this.rows[this.y]);this.x++;qkb(this);b.cells[this.x]==null&&(this.y++,this.x=0,rkb(this),qkb(this));return a}finish(){la(this.head==null)}constructor(a){this.rows=a;this.x=this.y=0;rkb(this);qkb(this)}},mpb=class{add(a,b,c,d,e){ja(a<=c);ja(b<=d);this.x8==null||this.x8.y<b?(this.flush(),this.rows.length&&la(this.rows.length<=b),this.x8=
{y:b,Moc:d,cells:[]},this.x8.cells[a]=e):this.x8.y===b?(la(this.x8.cells.length<=a),this.x8.Moc=Math.max(this.x8.Moc,d),this.x8.cells[a]=e):la(this.x8.y>b);this.Sq=Math.max(this.Sq,c+1);this.YA=Math.max(this.YA,d+1);return this}flush(){if(this.x8){const {y:a,...b}=this.x8;this.rows[a]=b;this.x8=void 0}}build(){this.flush();return new rpb(this.rows,this.Sq,this.YA)}constructor(){this.rows=[];this.YA=this.Sq=0}},lpb=new __c.kpb(new rpb([],0,0)),spb=class extends Tp{Yg(){return new jpb}pP(){return lpb}replace(a,
b){return new opb(a,b)}update(a,b){a=a==null||Fp(a.o,a.n)?void 0:a;b=b==null||this.component.isIdentity(b)?void 0:b;return a!=null||b!=null?new ppb(a,b):void 0}He(a={}){const b=a.cells||(new Gp).build();return{x:a.x||zp.Pg().build(),y:a.y||zp.Pg().build(),cells:b,Q1:a.Q1||Kq.project(b)}}isIdentity(a){return zp.isIdentity(a.x)&&zp.isIdentity(a.y)&&a.cells.isEmpty&&Kq.isIdentity(a.Q1)}compose(a,b){const c=skb(this,a.cells,b.x,b.y),d=Kq.expand(a.Q1,b.x,b.y);return{x:zp.compose(a.x,b.x),y:zp.compose(a.y,
b.y),cells:vkb(this,c,b.cells),Q1:Kq.compose(d,b.Q1)}}transform(a,b){const c=jo.vs(),{Fu:d,cv:e}=mo(c,zp.transform(a.x,b.x)),{Fu:f,cv:g}=mo(c,zp.transform(a.y,b.y)),h=skb(this,a.cells,d,f),k=skb(this,b.cells,e,g);a=Kq.expand(a.Q1,d,f);b=Kq.expand(b.Q1,e,g);const {Fu:l,cv:n}=mo(c,Kq.transform(a,b)),p=new npb,q=Kq.cursor(a,Math.max(h.Sq,k.Sq),Math.max(h.YA,k.YA)),u=new Gp,w=new Gp;tkb(h.Cd(),k.Cd(),(x,z,B,C)=>{if(B!=null||C!=null){a:if(B==null||C==null)var E=ko(C,B);else switch(B.type){case 1:b:{switch(C.type){case 1:E=
jo.vs();const {Fu:N,cv:M}=B.delta&&C.delta?mo(E,this.component.transform(B.delta,C.delta)):ko(C.delta,B.delta);if(B.bounds&&C.bounds){B=B.bounds;C=C.bounds;la(Fp(B.o,C.o));const V={right:Math.min(B.n.right,C.n.right),bottom:Math.min(B.n.bottom,C.n.bottom)},Y=jo.vs();Khb(Y,!Fp(C.n,V));Lhb(Y,!Fp(B.n,V));B=Y.build({o:C.n,n:V},{o:B.n,n:V});B=mo(E,B)}else B=ko(C.bounds,B.bounds);const {Fu:T,cv:U}=B;E=E.build(this.update(T,N),this.update(U,M));break b;case 0:la(C.o!=null);B.bounds&&la(Fp(B.bounds.o,C.o));
E=new jo(this.replace({...(B.bounds?B.bounds.n:C.o),state:B.delta?this.component.apply(C.o.state,B.delta):C.o.state},C.n),void 0,!1,!0);break b;default:throw new r(C);}E=void 0}break a;case 0:b:switch(C.type){case 1:la(B.o!=null);C.bounds&&la(Fp(B.o,C.bounds.o));E=lo(this.replace({...(C.bounds?C.bounds.n:B.o),state:C.delta?this.component.apply(B.o.state,C.delta):B.o.state},B.n));break b;case 0:la(Hp(this,B.o,C.o));E=lo(this.replace(C.n,B.n));break b;default:throw new r(C);}break a;default:throw new r(B);
}var {Fu:H,cv:I}=mo(c,E);H&&(E=ykb(this,x,z,H,p,q))&&(H=ukb(this,H,E),I=ukb(this,I,E),Khb(c));H&&w.add(x,z,H);I&&u.add(x,z,I)}});q.finish();return c.build({x:d,y:f,cells:w.build(),Q1:l},{x:e,y:g,cells:u.build(),Q1:n})}Jl(a){const b=new Gp;a.cells.forEach((d,e,f)=>{if(f!=null)switch(f.type){case 1:f=this.update(f.bounds&&{o:f.bounds.n,n:f.bounds.o},f.delta&&this.component.Jl(f.delta));b.add(d,e,f);break;case 0:b.add(d,e,this.replace(f.n,f.o));break;default:throw new r(f);}});const c=b.build();return{x:zp.Jl(a.x),
y:zp.Jl(a.y),cells:c,Q1:Kq.project(c)}}xk(a,b){var c;if(c=zp.xk(a.x,b.x)&&zp.xk(a.y,b.y))a:{c=a.cells;var d=b.cells;if(c.Sq!==d.Sq||c.YA!==d.YA)c=!1;else{c=c.Cd();d=d.Cd();for(var e=c.head,f=d.head;e||f;){var g;(g=e==null)||(g=f==null)||(g=e.x!==f.x||e.y!==f.y)||(e=e.value,f=f.value,g=!(e===f||(e==null||f==null?e===f:e.type===0&&f.type===0?Hp(this,e.o,f.o)&&Hp(this,e.n,f.n):e.type===1&&f.type===1&&(e.bounds&&f.bounds?Fp(e.bounds.o,f.bounds.o)&&Fp(e.bounds.n,f.bounds.n):e.bounds===f.bounds)&&(e.delta&&
f.delta?this.component.xk(e.delta,f.delta):e.delta===f.delta))));if(g){c=!1;break a}c.Hu();d.Hu();e=c.head;f=d.head}c=!0}}return c&&Kq.xk(a.Q1,b.Q1)}identity(){return this.He()}apply(a,b){a=this.YIa(a,b.x,b.y);const c=this.Yg();tkb(a.Cd(),b.cells.Cd(),(d,e,f,g)=>{if(f!=null||g!=null)if(g==null)la(f!=null),c.add(Ep(d,e,f.right,f.bottom),f.state);else switch(g.type){case 1:la(f!=null);g.bounds&&la(Fp(g.bounds.o,f));c.add({...(g.bounds?g.bounds.n:f),left:d,top:e},g.delta?this.component.apply(f.state,
g.delta):f.state);break;case 0:g.o&&(la(f!=null),la(Hp(this,f,g.o)));g.n&&c.add({left:d,top:e,right:g.n.right,bottom:g.n.bottom},g.n.state);break;default:throw new r(g);}});return c.build()}YIa(a,b,c){if(zp.isIdentity(b)&&zp.isIdentity(c))return a;const d=new Set,e=new Set;a.forEach((k,l)=>{d.add(l.left);d.add(l.right);e.add(l.top);e.add(l.bottom)});const f=wp(b,d),g=wp(c,e),h=new jpb;a.forEach((k,l)=>{l={left:m(f.get(l.left)),right:m(f.get(l.right)),top:m(g.get(l.top)),bottom:m(g.get(l.bottom))};
h.add(l,k)});return h.build()}Vl(a,b){const c=this.Yg();tkb(a.Cd(),b.cells.Cd(),(d,e,f,g)=>{if(f!=null||g!=null)if(g==null)la(f!=null),c.add(Ep(d,e,f.right,f.bottom),f.state);else switch(g.type){case 1:la(f!=null);g.bounds&&la(Fp(g.bounds.n,f));c.add({...(g.bounds?g.bounds.o:f),left:d,top:e},g.delta?this.component.Vl(f.state,g.delta):f.state);break;case 0:g.n&&(la(f!=null),la(Hp(this,f,g.n)));g.o&&c.add({left:d,top:e,right:g.o.right,bottom:g.o.bottom},g.o.state);break;default:throw new r(g);}});return this.jWb(c.build(),
b.x,b.y)}jWb(a,b,c){if(zp.isIdentity(b)&&zp.isIdentity(c))return a;const d=new Set,e=new Set;a.forEach((k,l)=>{d.add(l.left);d.add(l.right);e.add(l.top);e.add(l.bottom)});const f=Zjb(b,d),g=Zjb(c,e),h=new jpb;a.forEach((k,l)=>{l={left:m(f.get(l.left)),right:m(f.get(l.right)),top:m(g.get(l.top)),bottom:m(g.get(l.bottom))};h.add(l,k)});return h.build()}zi(a,b){if(a===b)return!0;a=a.Cd();b=b.Cd();let c=a.head,d=b.head;for(;c||d;){if(c==null||d==null||c.x!==d.x||c.y!==d.y||c.value.bottom!==d.value.bottom||
c.value.right!==d.value.right||!this.component.zi(c.value.state,d.value.state))return!1;a.Hu();b.Hu();c=a.head;d=b.head}return!0}equals(a){return this===a||a instanceof spb&&this.component.equals(a.component)}constructor(a){super();this.component=a}},npb=class{append(a){for(let b=a.top;b<=a.bottom;b++)for(let c=a.left;c<=a.right;c++){la(!this.readBuffer(c,b));const {OGd:d,SGd:e}=Bkb(this,c,b);this.buffer[e]||(this.buffer[e]=[]);this.buffer[e][d]=!0}}readBuffer(a,b){const {OGd:c,SGd:d}=Bkb(this,a,
b);return this.buffer[d]&&this.buffer[d][c]}constructor(){this.buffer=[];this.Bua=this.dfa=0}},tpb=class extends Tp{isIdentity(a){return a.items.isEmpty()}compose(a,b){if(this.isIdentity(a))return b;if(this.isIdentity(b))return a;const c=this.Q9a.Yg();ckb(a,b,c,(d,e,f)=>e||f);return c.build()}transform(a,b){return ko(b,a)}Jl(a){return a}xk(a,b){return a.equals(b)}identity(){return this.id}apply(a){return a}Vl(a){return a}zi(a,b){return a===b}equals(a){return this===a||a instanceof tpb}Pg(){return new upb(()=>
this.Q9a.Yg(),a=>Ihb(this,a))}cursor(a,b,c){return new vpb(a,b,c)}project(a){const b=this.Pg();a.forEach((c,d,e)=>{switch(e.type){case 1:e.bounds&&b.add(Ep(c,d,e.bounds.n.right,e.bounds.n.bottom));break;case 0:e.n&&b.add(Ep(c,d,e.n.right,e.n.bottom));break;default:throw new r(e);}});return b.build()}expand(a,b,c){b=this.Q9a.He({x:Ckb(b),y:Ckb(c)});return this.Q9a.apply(a,b)}constructor(){super();this.Q9a=new apb((a,b,c)=>b===c);this.id=this.Q9a.Yg().build()}},upb=class{add(a){const b=this.UYa(),c=
a.left*2,d=a.top*2,e=a.right*2;a=a.bottom*2;b.rows(d);b.Ux().qC(c).attrs({value:!0}).qC(e-c+1).attrs({value:void 0}).finish();b.rows(a-d+1);b.Ux().qC(c).attrs({value:void 0}).qC(e-c+1).attrs({value:void 0}).finish();this.jV.push(b.build());return this}build(){return this.jV.length?this.reduce(this.jV):this.UYa().build()}constructor(a,b){this.UYa=a;this.reduce=b;this.jV=[]}},vpb=class{get yi(){la(this.ima%2===0);return this.ima/2}Ux(){la(this.oFa===0);this.IT=this.Cd.Ux();return this}get value(){la(this.IT!=
null);return this.IT.attrs.value}o8b(a){la(this.IT!=null);for(var b=this.IT.head;b!=null;){if(b.type===0)this.IT.ww();else if(b=this.IT.Go(b.length),this.ima%2===0&&this.IT.attrs.value)for(let c=0;c<b;c++)this.oFa%2===0&&a(this.oFa/2,this.ima/2),this.oFa++;else this.oFa+=b;b=this.IT.head}return this}veb(){for(la(this.IT!=null);this.IT.head;)this.IT.head.type===0?this.IT.ww():this.IT.Go(this.IT.head.length);this.IT.finish();this.IT=void 0;this.oFa=0;return this}finish(){wkb(this,this.Cd.YA);this.Cd.head&&
(this.Ux(),this.veb());this.Cd.finish()}constructor(a,b,c){this.oFa=this.ima=0;this.Cd=a.Cd(void 0,b*2,c*2)}},Kq=new tpb;var ypb=class extends Wp{get(a,b){a=this.grid.get(a,b);if(a!=null)return{span:a.span,ref:a.value}}forEach(a){this.grid.forEach((b,c,d)=>{b.fLa.left===d&&b.fLa.top===c&&a(b.value,b.span)})}set(a,b){b=(new Gp).add(a.left,a.top,this.domain.replace(void 0,{right:a.right,bottom:a.bottom,state:b})).build();this.Er(this.domain.compose(Dkb(this,a),this.domain.He({cells:b})));return m(this.get(a.top,a.left))}delete(a){this.Er(Dkb(this,a))}createRef(a,b){var c=this.grid;var d={left:uib(this.grid,b.left),top:tib(this.grid,
b.top),right:uib(this.grid,b.right),bottom:tib(this.grid,b.bottom)};c=new wpb(c,d);d=Ao(this,Ekb(this,c));const {mutable:e,Ox:f}=Bo(this.type,a,d);a=new xpb(e,f,d,c);for(c=b.top;c<=b.bottom;c++)for(d=b.left;d<=b.right;d++)this.grid.set(c,d,a);return a}G$b(a,b,c){la(a.span.left===c.left);la(a.span.top===c.top);la(a.span.right===c.right);la(a.span.bottom===c.bottom);for(let d=c.top;d<=c.bottom;d++)for(let e=c.left;e<=c.right;e++)la(this.grid.get(d,e)===a),this.grid.delete(d,e);Co(this.type,b,a.to,a.value)}n0(a){this.P3b(a.x);
this.Q3b(a.y);a.cells.forEach((b,c,d)=>{switch(d.type){case 1:var e=m(this.grid.get(c,b));d.delta&&e.to.next(d.delta);if(d.bounds){la(e.span.left===b&&e.span.top===c);const h=d.bounds.o;var f=d.bounds.n;la(e.span.right===h.right&&e.span.bottom===h.bottom);if(h.right!==f.right||h.bottom!==f.bottom){d=Math.min(h.right,f.right);f=Math.min(h.bottom,f.bottom);for(var g=f+1;g<=h.bottom;g++)for(let k=b;k<=h.right;k++)la(this.grid.get(g,k)===e),this.grid.delete(g,k);for(b=d+1;b<=h.right;b++)for(g=c;g<=f;g++)la(this.grid.get(g,
b)===e),this.grid.delete(g,b);e.fLa.right=uib(this.grid,d);e.fLa.bottom=tib(this.grid,f)}}break;case 0:d.o&&(e=m(this.grid.get(c,b)),la(e.span.left===b&&e.span.top===c),la(e.span.right===d.o.right&&e.span.bottom===d.o.bottom),this.G$b(e,d.o.state,{left:b,top:c,right:d.o.right,bottom:d.o.bottom}));break;default:throw new r(d);}});a.cells.forEach((b,c,d)=>{switch(d.type){case 1:if(d.bounds){const g=m(this.grid.get(c,b));var e=d.bounds.o;d=d.bounds.n;var f=Math.min(e.right,d.right);e=Math.min(e.bottom,
d.bottom);for(e+=1;e<=d.bottom;e++)for(let h=b;h<=d.right;h++)la(this.grid.get(e,h)==null),this.grid.set(e,h,g);for(b=f+1;b<=d.right;b++)for(f=c;f<=d.bottom;f++)la(this.grid.get(f,b)==null),this.grid.set(f,b,g);g.fLa.right=uib(this.grid,d.right);g.fLa.bottom=tib(this.grid,d.bottom)}break;case 0:d.n&&this.createRef(d.n.state,{left:b,top:c,right:d.n.right,bottom:d.n.bottom});break;default:throw new r(d);}})}P3b(a){if(a.pre!==0||a.post!==0){var b=0;a=a.Cd();for(var c=a.head;c;)c.type===0?b+=a.lA(c.length):
(c=vp(a,c.length),vib(this.grid,b,c,d=>d.span.right!==b-1),b+=c),c=a.head}}Q3b(a){let b=0;a=a.Cd();for(var c=a.head;c;)c.type===0?b+=a.lA(c.length):(c=vp(a,c.length),wib(this.grid,b,c,d=>d.span.bottom!==b-1),b+=c),c=a.head}TU(){const a=this.domain.Yg();for(let b=0;b<this.grid.YA;b++)for(let c=0;c<this.grid.Sq;c++){const d=this.grid.get(b,c);d!=null&&d.span.top===b&&d.span.left===c&&a.add(d.span,this.type.fc(d.value))}return a.build()}destroy(a){let b=0,c=0;a.forEach(()=>c++);for(let d=0;d<this.grid.YA;d++)for(let e=
0;e<this.grid.Sq;e++){const f=this.grid.get(d,e);if(f==null||f.span.top!==d||f.span.left!==e)continue;const g=m(a.get(f.span.left,f.span.top));la(g.span.right===f.span.right&&g.span.bottom===f.span.bottom);this.type.destroy(f.value,g.state);b++}la(c===b)}ij(a){const b=new Gp,c=new Gp;for(let d=0;d<this.grid.YA;d++)for(let e=0;e<this.grid.Sq;e++){const f=this.grid.get(d,e);f!=null&&f.span.top===d&&f.span.left===e&&b.add(f.span.left,f.span.top,this.domain.replace({right:f.span.right,bottom:f.span.bottom,
state:this.type.fc(f.value)},void 0))}a.forEach((d,e)=>c.add(e.left,e.top,this.domain.replace(void 0,{right:e.right,bottom:e.bottom,state:d})));this.Er(this.domain.compose(this.domain.He({cells:b.build()}),this.domain.He({cells:c.build()})));return!0}constructor(a,b,c){super();this.type=a;this.domain=b;this.grid=new Llb;c.forEach((d,e)=>{this.createRef(d,e)})}},xpb=class{get span(){return this.fLa.dod.get()}constructor(a,b,c,d){this.value=a;this.to=b;this.from=c;this.fLa=d}},wpb=class{get right(){return this.UQc.get()}set right(a){this.UQc.set(a)}get bottom(){return this.zQc.get()}set bottom(a){this.zQc.set(a)}constructor(a,
b){this.ZGb=a;this.dod=Ro(()=>({left:m(this.ZGb.D7b.get(this.left)),top:m(this.ZGb.Szc.get(this.top)),right:m(this.ZGb.D7b.get(this.right)),bottom:m(this.ZGb.Szc.get(this.bottom))}),{equals:__c.blb.structural});this.left=b.left;this.top=b.top;this.UQc=new Xp(b.right);this.zQc=new Xp(b.bottom)}},zpb=class extends Vp{nA(a){return new ypb(this.type,this.domain,a)}Dn(a){return a}connect(a,b){return this.Dn(a).connect(b)}fc(a){return this.Dn(a).fc()}destroy(a,b){return this.Dn(a).destroy(b)}ij(a,b){return this.Dn(a).ij(b)}constructor(a){super(Up,
Up);this.type=a;this.domain=new spb(this.type.domain)}};var Apb,Bpb,Ip,Fkb,Lq,Cpb,Dpb,Epb;Apb=new Map;Bpb=class{ordinal(a,b){b!=null?this.J8a.set(a,b):this.J8a.delete(a);return this}Ek(a){a.forEach((b,c)=>this.J8a.set(c,b));return this}build(){return this.J8a.size?this.J8a:Apb}constructor(){this.J8a=new Map}};Ip=class{toString(){var a,b;return`R(${(a=this.oldValue)!==null&&a!==void 0?a:"_"},${(b=this.newValue)!==null&&b!==void 0?b:"_"})`}constructor(a,b){this.oldValue=a;this.newValue=b;this.type=0}};
Fkb=class{toString(){return`U(${this.oldValue},${this.newValue})`}constructor(a,b){this.oldValue=a;this.newValue=b;this.type=1}};Lq=class{static create(a,b){const c=zp.isIdentity(a),d=b.size===0;return c&&d?Cpb:new Lq(c?Cpb.axis:a,d?Cpb.Ek:b)}toString(){const a=[...this.Ek].map(([b,c])=>`"${b}":${c}`).join(",");return`{${this.axis}|${a}}`}constructor(a,b){this.axis=a;this.Ek=b}};Cpb=new Lq(zp.Pg().build(),new Map);
Dpb=class{retain(a){this.axis.retain(a);return this}expand(a){this.axis.expand(a);return this}build(){return Lq.create(this.axis.build(),this.Ek)}constructor(){this.Ek=new Map;this.axis=zp.Pg()}};
Epb=class extends Tp{Yg(){return new Bpb}Pg(){return new Dpb}replace(a,b,c){return Jp(this.Pg(),a,b,c).build()}update(a,b,c){return Gkb(this.Pg(),a,b,c).build()}He(a,b){return Lq.create(a,b)}isIdentity(a){return zp.isIdentity(a.axis)&&!a.Ek.size}compose(a,b){if(this.isIdentity(a))return b;if(this.isIdentity(b))return a;const c=Ikb(a.Ek,b.axis),d=new Map;for(const h of Hkb(c,b.Ek)){var e=c.get(h);const k=b.Ek.get(h);if(e&&k){var f=d,g=f.set;a:{ma(e.newValue,k.oldValue);switch(e.type){case 0:e=new Ip(e.oldValue,
k.newValue);break a;case 1:switch(k.type){case 0:e=new Ip(e.oldValue,k.newValue);break a;case 1:e=new Fkb(e.oldValue,k.newValue);break a;default:throw new r(k);}default:throw new r(e);}e=void 0}g.call(f,h,e)}else e?d.set(h,e):k&&d.set(h,k)}return Lq.create(zp.compose(a.axis,b.axis),d)}transform(a,b){if(this.isIdentity(a)||this.isIdentity(b))return ko(b,a);const c=jo.vs(),{Fu:d,cv:e}=mo(c,zp.transform(a.axis,b.axis));a=Ikb(a.Ek,d);const f=Ikb(b.Ek,e);b=new Map;const g=new Map;for(var h of Hkb(a,f)){var k=
a.get(h);const l=f.get(h);if(k&&l){a:{ma(k.oldValue,l.oldValue);switch(k.type){case 0:k=lo(new Ip(l.newValue,k.newValue));break a;case 1:switch(l.type){case 0:k=new jo(new Ip(k.newValue,l.newValue),void 0,!1,!0);break a;case 1:k=lo(new Fkb(l.newValue,k.newValue));break a;default:throw new r(l);}default:throw new r(k);}k=void 0}const {Fu:n,cv:p}=mo(c,k);p&&b.set(h,p);n&&g.set(h,n)}else k?b.set(h,k):l&&g.set(h,l)}h=Lq.create(d,g);a=Lq.create(e,b);return c.build(h,a)}Jl(a){const b=a.Ek.size===0?a.Ek:
Vg(a.Ek,c=>{switch(c.type){case 0:return new Ip(c.newValue,c.oldValue);case 1:return new Fkb(c.newValue,c.oldValue);default:throw new r(c);}});return Lq.create(zp.Jl(a.axis),b)}xk(a,b){if(a===b)return!0;if(!zp.xk(a.axis,b.axis)||a.Ek.size!==b.Ek.size)return!1;for(const e of a.Ek.keys()){var c=a.Ek.get(e),d=b.Ek.get(e);if(c!==d&&(c==null||d==null||c.type!==d.type||c.oldValue!==d.oldValue||c.newValue!==d.newValue))return!1}return!0}identity(){return Cpb}apply(a,b){if(this.isIdentity(b)||!a.size&&!b.Ek.size)return a;
a=this.YIa(a,b.axis);if(!b.Ek.size)return a;const c=new Map(a);for(const [d,e]of b.Ek)b=a.get(d),ma(b,e.oldValue),e.newValue!=null?c.set(d,e.newValue):c.delete(d);return c}YIa(a,b){if(zp.isIdentity(b))return a;const c=new Set(a.values()),d=wp(b,c);return Vg(a,e=>m(d.get(e)))}Vl(a,b){if(this.isIdentity(b)||!a.size&&!b.Ek.size)return a;if(!b.Ek.size)return this.jWb(a,b.axis);const c=new Map(a);for(const [d,e]of b.Ek){const f=a.get(d);ma(f,e.newValue);e.oldValue!=null?c.set(d,e.oldValue):c.delete(d)}return this.jWb(c,
b.axis)}jWb(a,b){if(zp.isIdentity(b))return a;const c=new Set(a.values()),d=Zjb(b,c);return Vg(a,e=>m(d.get(e)))}zi(a,b){return a===b?!0:a.size===b.size&&[...a.keys()].every(c=>a.get(c)===b.get(c))}equals(a){return this===a||a instanceof Epb}constructor(){super();this.pP=Apb}};Mp=__c.Mp=new Epb;var Fpb=new Map,Lp=class{static from(a){if(a instanceof Lp)return a;if(Array.isArray(a)){const [b,c]=a;return new Lp(b,c)}return new Lp(a.start,a.end)}toString(){return`[${this.start},${this.end}]`}constructor(a,b){this.start=a;this.end=b}},Gpb=class{range(a,b){b?this.z$.set(a,Lp.from(b)):this.z$.delete(a);return this}Xe(a){a.forEach((b,c)=>this.z$.set(c,Lp.from(b)));return this}build(){return this.z$.size?this.z$:Fpb}constructor(){this.z$=new Map}},Nkb=class{toString(){var a,b;return`R(${(a=this.oldValue)!==
null&&a!==void 0?a:"_"},${(b=this.newValue)!==null&&b!==void 0?b:"_"})`}constructor(a,b){this.oldValue=a;this.newValue=b;this.type="replace"}},Np=class{static from(a){if(a instanceof Np)return a;if(Array.isArray(a)){const [b,c]=a;return new Np(b,c)}return new Np(a.oldValue,a.newValue)}toString(){return`[${this.oldValue},${this.newValue}]`}constructor(a,b){this.oldValue=a;this.newValue=b}},Okb=class{toString(){var a,b;return`U(${(a=this.start)!==null&&a!==void 0?a:"_"},${(b=this.end)!==null&&b!==void 0?
b:"_"})`}constructor(a,b){this.start=a;this.end=b;this.type="update"}},Pkb=class{static create(a,b){const c=zp.isIdentity(a),d=b.size===0;return c&&d?Hpb:new Pkb(c?Hpb.axis:a,d?Hpb.Xe:b)}toString(){return`{${this.axis}|${[...this.Xe].map(([a,b])=>`"${a}":${b}`).join(",")}}`}constructor(a,b){this.axis=a;this.Xe=b}},Hpb=new Pkb(zp.Pg().build(),new Map),Ipb=class{retain(a){this.axis.retain(a);return this}expand(a){this.axis.expand(a);return this}r3a(a,b,c){this.Xe.set(a,new Nkb(b&&Lp.from(b),c&&Lp.from(c)));
return this}createRange(a,b){return this.r3a(a,void 0,b)}build(){return Pkb.create(this.axis.build(),this.Xe)}constructor(){this.Xe=new Map;this.axis=zp.Pg()}},Mq,Jpb;la(!0);Mq=Mp.map(Qkb,Mkb,Lkb,Kkb);
Jpb=class extends Tp{Yg(){return new Gpb}Pg(){return new Ipb}replace(a,b,c){return this.Pg().r3a(a,b,c).build()}update(a,b,c){var d=this.Pg();d.Xe.set(a,new Okb(b&&Np.from(b),c&&Np.from(c)));return d.build()}He(a,b){return Pkb.create(a,b)}isIdentity(a){return Mq.isIdentity(a)}compose(a,b){return Mq.compose(a,b)}transform(a,b){return Mq.transform(a,b)}Jl(a){return Mq.Jl(a)}xk(a,b){return Mq.xk(a,b)}identity(a){return Mq.identity(a)}apply(a,b){return Mq.apply(a,b)}Vl(a,b){return Mq.Vl(a,b)}zi(a,b){return Mq.zi(a,
b)}equals(a){return Mq.equals(a)}constructor(){super();this.pP=Fpb}};Nq=__c.Nq=new Jpb;var Kpb=class extends Tp{He(a){return{rows:a.rows||this.rows.Pg().build(),cols:a.cols||this.cols.Pg().build(),Qo:a.Qo||Nq.Pg().build().Xe,Po:a.Po||Mp.Pg().build().Ek,Eo:a.Eo||Nq.Pg().build().Xe,Un:a.Un||Mp.Pg().build().Ek,cells:a.cells||Pp(this.cells.He({}),this.cols.Pg().build(),this.rows.Pg().build()),attrs:a.attrs||Pp(this.attrs.He({}),this.cols.Pg().build(),this.rows.Pg().build())}}isIdentity(a){return this.rows.isIdentity(a.rows)&&this.cols.isIdentity(a.cols)&&a.Qo.size===0&&a.Po.size===0&&a.Eo.size===
0&&a.Un.size===0&&a.cells.cells.isEmpty&&Kq.isIdentity(a.cells.Q1)&&a.attrs.attrs.items.isEmpty()}compose(a,b){const c=Op(a.cols),d=Op(a.rows),e=Op(b.cols),f=Op(b.rows),g=this.rows.compose(a.rows,b.rows),h=this.cols.compose(a.cols,b.cols),k=Nq.compose(Nq.He(d,a.Qo),Nq.He(f,b.Qo)).Xe,l=Mp.compose(Mp.He(d,a.Po),Mp.He(f,b.Po)).Ek,n=Nq.compose(Nq.He(c,a.Eo),Nq.He(e,b.Eo)).Xe,p=Mp.compose(Mp.He(c,a.Un),Mp.He(e,b.Un)).Ek,q=this.cells.compose(this.cells.He({...a.cells,x:c,y:d}),this.cells.He({...b.cells,
x:e,y:f}));a=this.attrs.compose(this.attrs.He({...a.attrs,x:c,y:d}),this.attrs.He({...b.attrs,x:e,y:f}));return{rows:g,cols:h,Qo:k,Po:l,Eo:n,Un:p,cells:Pp(q,h,g),attrs:Pp(a,h,g)}}transform(a,b){const c=Op(a.cols),d=Op(a.rows),e=Op(b.cols),f=Op(b.rows),g=jo.vs(),{Fu:h,cv:k}=mo(g,this.rows.transform(a.rows,b.rows)),{Fu:l,cv:n}=mo(g,this.cols.transform(a.cols,b.cols)),{Fu:{Xe:p},cv:{Xe:q}}=mo(g,Nq.transform(Nq.He(d,a.Qo),Nq.He(f,b.Qo))),{Fu:{Ek:u},cv:{Ek:w}}=mo(g,Mp.transform(Mp.He(d,a.Po),Mp.He(f,b.Po))),
{Fu:{Xe:x},cv:{Xe:z}}=mo(g,Nq.transform(Nq.He(c,a.Eo),Nq.He(e,b.Eo))),{Fu:{Ek:B},cv:{Ek:C}}=mo(g,Mp.transform(Mp.He(c,a.Un),Mp.He(e,b.Un))),{Fu:E,cv:H}=mo(g,this.cells.transform(this.cells.He({...a.cells,x:c,y:d}),this.cells.He({...b.cells,x:e,y:f}))),{Fu:I,cv:N}=mo(g,this.attrs.transform(this.attrs.He({...a.attrs,x:c,y:d}),this.attrs.He({...b.attrs,x:e,y:f})));a={rows:h,cols:l,Qo:p,Po:u,Eo:x,Un:B,cells:Pp(E,l,h),attrs:Pp(I,l,h)};b={rows:k,cols:n,Qo:q,Po:w,Eo:z,Un:C,cells:Pp(H,n,k),attrs:Pp(N,n,k)};
return g.build(a,b)}Jl(a){const b=Op(a.cols),c=Op(a.rows),d=this.rows.Jl(a.rows),e=this.cols.Jl(a.cols),f=Nq.Jl(Nq.He(c,a.Qo)).Xe,g=Mp.Jl(Mp.He(c,a.Po)).Ek,h=Nq.Jl(Nq.He(b,a.Eo)).Xe,k=Mp.Jl(Mp.He(b,a.Un)).Ek,l=this.cells.Jl({...a.cells,x:b,y:c});a=this.attrs.Jl(this.attrs.He({...a.attrs,x:b,y:c}));return{rows:d,cols:e,Qo:f,Po:g,Eo:h,Un:k,cells:Pp(l,e,d),attrs:Pp(a,e,d)}}xk(a,b){return this.rows.xk(a.rows,b.rows)&&this.cols.xk(a.cols,b.cols)&&Nq.xk(Nq.He(zp.identity(),a.Qo),Nq.He(zp.identity(),b.Qo))&&
Mp.xk(Mp.He(zp.identity(),a.Po),Mp.He(zp.identity(),b.Po))&&Nq.xk(Nq.He(zp.identity(),a.Eo),Nq.He(zp.identity(),b.Eo))&&Mp.xk(Mp.He(zp.identity(),a.Un),Mp.He(zp.identity(),b.Un))&&this.cells.xk(this.cells.He(a.cells),this.cells.He(b.cells))&&this.attrs.xk(this.attrs.He(a.attrs),this.attrs.He(b.attrs))}identity(a){return{rows:this.rows.identity(a.rows),cols:this.cols.identity(a.cols),Qo:Nq.identity(a.Qo).Xe,Po:Mp.identity(a.Po).Ek,Eo:Nq.identity(a.Eo).Xe,Un:Mp.identity(a.Un).Ek,cells:this.cells.identity(a.cells),
attrs:this.attrs.identity(a.attrs)}}apply(a,b){if(this.isIdentity(b))return a;const c=Op(b.cols),d=Op(b.rows),e=this.rows.apply(a.rows,b.rows),f=this.cols.apply(a.cols,b.cols),g=Nq.apply(a.Qo,Nq.He(d,b.Qo)),h=Mp.apply(a.Po,Mp.He(d,b.Po)),k=Nq.apply(a.Eo,Nq.He(c,b.Eo)),l=Mp.apply(a.Un,Mp.He(c,b.Un)),n=this.cells.apply(a.cells,{...b.cells,x:c,y:d});a=this.attrs.apply(a.attrs,this.attrs.He({...b.attrs,x:c,y:d}));return{rows:e,cols:f,Qo:g,Po:h,Eo:k,Un:l,cells:n,attrs:a}}Vl(a,b){if(this.isIdentity(b))return a;
const c=Op(b.cols),d=Op(b.rows),e=this.rows.Vl(a.rows,b.rows),f=this.cols.Vl(a.cols,b.cols),g=Nq.Vl(a.Qo,Nq.He(d,b.Qo)),h=Mp.Vl(a.Po,Mp.He(d,b.Po)),k=Nq.Vl(a.Eo,Nq.He(c,b.Eo)),l=Mp.Vl(a.Un,Mp.He(c,b.Un)),n=this.cells.Vl(a.cells,{...b.cells,x:c,y:d});a=this.attrs.Vl(a.attrs,this.attrs.He({...b.attrs,x:c,y:d}));return{rows:e,cols:f,Qo:g,Po:h,Eo:k,Un:l,cells:n,attrs:a}}zi(a,b){return a===b?!0:this.rows.zi(a.rows,b.rows)&&Nq.zi(a.Qo,b.Qo)&&Mp.zi(a.Po,b.Po)&&Nq.zi(a.Eo,b.Eo)&&Mp.zi(a.Un,b.Un)&&this.cols.zi(a.cols,
b.cols)&&this.cells.zi(a.cells,b.cells)&&this.attrs.zi(a.attrs,b.attrs)}equals(a){return this===a?!0:a instanceof Kpb?this.rows.equals(a.rows)&&this.cols.equals(a.cols)&&this.cells.equals(a.cells)&&this.attrs.equals(a.attrs):!1}constructor(a,b,c,d){super();this.rows=a;this.cols=b;this.cells=c;this.attrs=d}};var Lpb=class extends Wp{static F(a){hb(a,{xed:Ro})}get xed(){const a=new Map;this.items.forEach((b,c)=>a.set(b,c));return a}get(a){return Qp(this,this.refs.get(a))}forEach(a){for(const [b,c]of this.refs)a(Qp(this,c),b)}create(a,b){a=this.domain.replace(a,this.get(a),b);this.Er(a)}update(a,b){const c=m(Qp(this,this.refs.get(a)));a=this.domain.update(a,c,b);this.Er(a)}delete(a){const b=Qp(this,this.refs.get(a));b!=null&&(a=this.domain.replace(a,b,void 0),this.Er(a))}TU(){const a=this.domain.Yg();for(const [b,
c]of this.refs)a.ordinal(b,Qp(this,c));return a.build()}destroy(a){la(this.refs.size===a.size);for(const [b,c]of this.refs)la(a.has(b)),la(Qp(this,c)===a.get(b))}ij(a){const b=this.domain.Pg();for(const [c,d]of this.refs){const e=Qp(this,d),f=a.get(c);Jp(b,c,e,f)}for(const [c,d]of a)this.refs.has(c)||Jp(b,c,void 0,d);this.Er(b.build());return!0}n0(a){if(!this.domain.isIdentity(a)){var b=a.axis;if(!b.isEmpty()){var c=0;this.items.length<b.pre&&(this.items.length=b.pre);b=b.Cd();for(var d=b.head;d;)d.type===
0?c+=b.lA(d.length):(d=vp(b,d.length),this.items.spliceWithArray(c,0,Array(d)),c+=d),d=b.head}for(const [e,f]of a.Ek)switch(f.type){case 0:f.oldValue!=null?(a=m(this.refs.get(e)),c=Rkb(this,f.oldValue),ja(a===c)):ja(!this.refs.has(e));f.newValue!=null?this.refs.set(e,Rkb(this,f.newValue)):this.refs.delete(e);break;case 1:a=m(this.refs.get(e));c=Rkb(this,f.oldValue);ja(a===c);this.refs.set(e,Rkb(this,f.newValue));break;default:throw new r(f);}}}constructor(a){super();this.domain=(Lpb.F(this),Mp);this.items=
Sp.array([],{deep:!1});this.refs=Sp.map(new Map,{deep:!1});for(const [b,c]of a)this.refs.set(b,Rkb(this,c))}},Mpb=class extends Vp{nA(a){return new Lpb(a)}Dn(a){return a}connect(a,b){return this.Dn(a).connect(b)}fc(a){return this.Dn(a).fc()}destroy(a,b){return this.Dn(a).destroy(b)}ij(a,b){return this.Dn(a).ij(b)}constructor(){super(Up,yo);this.domain=__c.Mp}},Oq=new Mpb;var Npb=class{create(a,b){a=Kp(a);var c=this.base.get(a.start);const d=this.base.get(a.end);if(c==null&&d==null){c=this.base;b=new Map([[a.start,b.start],[a.end,b.end]]);a=c.domain.Pg();for(const [e,f]of b)Jp(a,e,c.get(e),f);c.Er(a.build())}}get(a){var b=Kp(a);a=this.base.get(b.start);b=this.base.get(b.end);if(a!=null&&b!=null)return{start:a,end:Math.max(a,b)}}forEach(a){const b=new Set;this.base.forEach((c,d)=>{c=Jkb(d);b.has(c)||(b.add(c),d=m(this.get(c)),a(d,c))})}delete(a){var b=Kp(a);a=this.base;
var c=new Set([b.start,b.end]);b=a.domain.Pg();for(const d of c)c=a.get(d),c!=null&&Jp(b,d,c);a.Er(b.build())}constructor(a){this.base=a}},Opb=Oq.map(Qkb,Mkb,Lkb,Kkb,a=>new Npb(a),a=>a.base),Ppb=class extends Jlb{nA(a){a=Oq.nA(Kkb(a));return new Npb(a)}connect(a,b){return Opb.connect(a,b)}fc(a){return Opb.fc(a)}destroy(a,b){return Opb.destroy(a,b)}ij(a,b){return Opb.ij(a,b)}constructor(){super();this.domain=__c.Nq}},Pq=new Ppb;var Upb,Spb,Tpb,Qpb,Rpb;
Upb=class extends Wp{TU(){return{rows:this.wRb.fc(this.rows),cols:this.uzb.fc(this.cols),Qo:Pq.fc(this.Qo.Xe),Po:Oq.fc(this.Po.Ek),Eo:Pq.fc(this.Eo.Xe),Un:Oq.fc(this.Un.Ek),cells:this.Oyb.fc(this.cells.grid),attrs:this.rxb.fc(this.attrs.grid)}}destroy(a){Co(this.wRb,a.rows,this.xCd,this.rows);Co(this.uzb,a.cols,this.nCd,this.cols);Co(Pq,a.Qo,this.gGc,this.Qo.Xe);Co(Oq,a.Po,this.fGc,this.Po.Ek);Co(Pq,a.Eo,this.dGc,this.Eo.Xe);Co(Oq,a.Un,this.cGc,this.Un.Ek);Co(this.Oyb,a.cells,this.vVb,this.cells.grid);
Co(this.rxb,a.attrs,this.uVb,this.attrs.grid)}ij(a){return this.wRb.ij(this.rows,a.rows)&&this.uzb.ij(this.cols,a.cols)&&Pq.ij(this.Qo.Xe,a.Qo)&&Oq.ij(this.Po.Ek,a.Po)&&Pq.ij(this.Eo.Xe,a.Eo)&&Oq.ij(this.Un.Ek,a.Un)&&this.Oyb.ij(this.cells.grid,a.cells)&&this.rxb.ij(this.attrs.grid,a.attrs)}n0(a){const b=Op(a.rows),c=Op(a.cols);this.xCd.next(a.rows);this.nCd.next(a.cols);this.gGc.next(Nq.He(b,a.Qo));this.fGc.next(Mp.He(b,a.Po));this.dGc.next(Nq.He(c,a.Eo));this.cGc.next(Mp.He(c,a.Un));this.vVb.next(this.domain.cells.He({...a.cells,
y:b,x:c}));this.uVb.next(this.domain.attrs.He({...a.attrs,y:b,x:c}))}constructor(a,b,c,d,e,f){super();this.wRb=a;this.uzb=b;this.Oyb=c;this.rxb=d;this.domain=e;this.e4=g=>this.rows.has(g)?this.rows.XG(g):void 0;this.j1=g=>this.cols.has(g)?this.cols.XG(g):void 0;this.yya=g=>this.rows.get(g);this.xya=g=>this.cols.get(g);this.SFb=()=>{var g=this.rows.last();if(g==null)return 0;g=this.e4(g);return g!=null?g+1:0};this.nFb=()=>{var g=this.cols.last();if(g==null)return 0;g=this.j1(g);return g!=null?g+1:
0};this.Cpe=Ao(this,g=>{const h=Op(g);zp.isIdentity(h)||(this.vVb.next(this.domain.cells.He({y:h})),this.uVb.next(this.domain.attrs.He({y:h})),this.fGc.next(Mp.He(h,new Map)),this.gGc.next(Nq.He(h,new Map)));return this.domain.He({rows:g})});a=Bo(this.wRb,f.rows,this.Cpe);this.rows=a.mutable;this.xCd=a.Ox;this.xpe=Ao(this,g=>{const h=Op(g);zp.isIdentity(h)||(this.vVb.next(this.domain.cells.He({x:h})),this.uVb.next(this.domain.attrs.He({x:h})),this.cGc.next(Mp.He(h,new Map)),this.dGc.next(Nq.He(h,
new Map)));return this.domain.He({cols:g})});a=Bo(this.uzb,f.cols,this.xpe);this.cols=a.mutable;this.nCd=a.Ox;this.Ape=Ao(this,g=>{ja(zp.isIdentity(g.axis));return this.domain.He({Po:g.Ek})});a=Bo(Oq,f.Po,this.Ape);this.Po=new Qpb(a.mutable,this.e4,this.yya);this.fGc=a.Ox;this.Bpe=Ao(this,g=>{ja(zp.isIdentity(g.axis));return this.domain.He({Qo:g.Xe})});a=Bo(Pq,f.Qo,this.Bpe);this.Qo=new Rpb(a.mutable,this.e4,this.yya);this.gGc=a.Ox;this.vpe=Ao(this,g=>{ja(zp.isIdentity(g.axis));return this.domain.He({Un:g.Ek})});
a=Bo(Oq,f.Un,this.vpe);this.Un=new Qpb(a.mutable,this.j1,this.xya);this.cGc=a.Ox;this.wpe=Ao(this,g=>{ja(zp.isIdentity(g.axis));return this.domain.He({Eo:g.Xe})});a=Bo(Pq,f.Eo,this.wpe);this.Eo=new Rpb(a.mutable,this.j1,this.xya);this.dGc=a.Ox;this.upe=Ao(this,g=>{ja(zp.isIdentity(g.x));ja(zp.isIdentity(g.y));return this.domain.He({cells:g})});a=Bo(this.Oyb,f.cells,this.upe);this.cells=new Spb(a.mutable,this.e4,this.j1,this.yya,this.xya,this.SFb,this.nFb);this.vVb=a.Ox;this.spe=Ao(this,g=>{ja(zp.isIdentity(g.x));
ja(zp.isIdentity(g.y));return this.domain.He({attrs:g})});f=Bo(this.rxb,f.attrs,this.spe);this.attrs=new Tpb(f.mutable,this.e4,this.j1,this.yya,this.xya,this.SFb,this.nFb);this.uVb=f.Ox}};
Spb=class{get(a,b){a=this.e4(a);b=this.j1(b);if(a!=null&&b!=null&&(b=this.grid.get(a,b),b!=null))return{span:{Sg:m(Skb(this,b.span)),Mg:m(Tkb(this,b.span)),Al:m(Ukb(this,b.span)),yk:m(Vkb(this,b.span))},ref:b.ref}}forEach(a){this.grid.forEach((b,c)=>{const d=Skb(this,c),e=Tkb(this,c);d!=null&&e!=null&&a(b,{Sg:d,Mg:e,Al:m(Ukb(this,c)),yk:m(Vkb(this,c))})})}map(a){const b=[];this.forEach((c,d)=>b.push(a(c,d)));return b}set(a,b){this.grid.set(Wkb(this,a),b);return m(this.get(a.Sg,a.Mg))}delete(a){this.grid.delete(Wkb(this,
a))}constructor(a,b,c,d,e,f,g){this.grid=a;this.e4=b;this.j1=c;this.yya=d;this.xya=e;this.SFb=f;this.nFb=g}};Tpb=class{get(a,b,c){b=this.e4(b);c=this.j1(c);if(b!=null&&c!=null)return this.grid.get(a,b,c)}set(a,b,c){const d=this.e4(b.Sg),e=this.j1(b.Mg),f=this.e4(b.Al||b.Sg);b=this.j1(b.yk||b.Mg);d!=null&&e!=null&&f!=null&&b!=null&&this.grid.set(a,{F4e:d,r4e:e,YCb:f,rke:b},c)}constructor(a,b,c,d,e,f,g){this.grid=a;this.e4=b;this.j1=c;this.yya=d;this.xya=e;this.SFb=f;this.nFb=g}};
Qpb=class{get(a){a=this.Ek.get(a);if(a!=null)for(;a>=0;a--){const b=this.$Gb(a);if(b)return b}}forEach(a){this.Ek.forEach((b,c)=>{(b=this.get(c))&&a(b,c)})}create(a,b){b=m(this.pJb(b));this.Ek.create(a,b)}delete(a){this.Ek.delete(a)}constructor(a,b,c){this.Ek=a;this.pJb=b;this.$Gb=c}};
Rpb=class{get(a){a=this.Xe.get(a);if(a!=null){var b;a:{for(b=a.start;b<=a.end;b++){var c=this.$Gb(b);if(c){b=c;break a}}b=void 0}a:{for(c=a.end;c>=a.start;c--){const d=this.$Gb(c);if(d){a=d;break a}}a=void 0}if(b!=null&&a!=null)return{start:b,end:a}}}forEach(a){this.Xe.forEach((b,c)=>{(b=this.get(c))&&a(b,c)})}create(a,b){const c=m(this.pJb(b.start));b=m(this.pJb(b.end));this.Xe.create(a,{start:c,end:b})}delete(a){this.Xe.delete(a)}constructor(a,b,c){this.Xe=a;this.pJb=b;this.$Gb=c}};
__c.Ypb=class extends Vp{nA(a){return new Upb(this.rows,this.cols,this.cells,this.attrs,this.domain,a)}Dn(a){return a}connect(a,b){return this.Dn(a).connect(b)}fc(a){return this.Dn(a).fc()}destroy(a,b){this.Dn(a).destroy(b)}ij(a,b){return this.Dn(a).ij(b)}constructor(a){var b=Vpb,c=Wpb,d=__c.Xpb;super(Up,Up);this.rows=b;this.cols=c;this.cells=a;this.attrs=d;this.domain=new Kpb(b.domain,c.domain,a.domain,d.domain)}};__c.Ypb.prototype.kB=da(120);__c.Zpb=class{static parse(a){a==="dd mmm yyyy"&&(a="dd MMM yyyy");const b=new __c.Zpb;if((a=b.A6e(a))&&a.s===""&&b.isValid())return a.value}isValid(){return this.e$b<=1&&this.Fpc<=1&&this.oMc<=1&&this.e$b+this.Fpc+this.oMc!==0}Hu(a){return b=>{var c=a.exec(b);if(c&&c.index===0)return[c]=c,{s:b.substring(c.length),value:[{type:0,value:c}]}}}compose(a,...b){return c=>{const d=[];for(const e of b){const f=e(c);if(!f)return;c=f.s;d.push(...f.value)}return{s:c,value:a(...d)}}}constructor(){this.oMc=this.Fpc=
this.e$b=0;this.yce=this.compose(a=>{a=a.value;this.e$b++;la(a==="d"||a==="dd");return[{type:1,value:a}]},this.Hu(/^d{1,2}(?!d)/));this.hIe=this.compose(a=>{a=a.value;this.Fpc++;switch(a){case "M":case "MM":case "MMM":case "MMMM":return[{type:1,value:a}];default:la(!1)}},this.Hu(/^M{1,4}(?!M)/));this.Jef=this.compose(a=>{a=a.value;this.oMc++;la(a==="yyyy"||a==="yy");return[{type:1,value:a}]},this.Hu(/^(yyyy|yy)(?!y)/));this.y0c=this.Hu(/^"/);this.MRe=this.Hu(/^[^\\"]+/);this.separator=this.Hu(/^[^a-zA-Z\\"]+/);
this.symbol=Xkb(this.yce,this.hIe,this.Jef);this.wJe=Ykb(Xkb(this.symbol,this.separator));this.A6e=Ykb(Xkb(this.compose((a,b)=>[b],this.y0c,this.MRe,this.y0c),this.wJe))}};var $pb,aqb,bqb,cqb,dqb,eqb,fqb,gqb,hqb,iqb,jqb,kqb,lqb,mqb,nqb,rqb,sqb,tqb,uqb,vqb,xqb,zqb,Aqb,Bqb,Cqb,Dqb,Eqb,Fqb,Gqb,Hqb,Iqb,Jqb,Kqb,Mqb,Nqb,Oqb,Pqb,Qqb,Rqb,Sqb,Uqb,Vqb,Wqb,Yqb,Zqb,$qb,brb,crb,Vpb,Wpb,drb,erb,frb,grb,hrb,irb,jrb,krb,lrb,mrb,nrb,srb,trb,urb,vrb,wrb,yrb,Arb;$pb=Go({pf:Fo($p)});aqb=Io(/^([A-Z]+|[1-9]\d*)$/);bqb=Io(/^([A-Z]+:[A-Z]+|[1-9]\d*:[1-9]\d*)$/);cqb=Go({type:Eo("single-row"),kka:Zp,Nnb:aqb});dqb=Go({type:Eo("single-column"),SGa:Zp,Nnb:aqb});
eqb=Go({type:Eo("range-row"),gPa:Zp,Nnb:bqb});fqb=Go({type:Eo("range-column"),TGa:Zp,Nnb:bqb});gqb=Fo(__c.Ho({"single-row":cqb,"single-column":dqb,"range-row":eqb,"range-column":fqb},a=>a.type));hqb=Go({type:Eo("canonical"),R$a:Zp,Sb:gqb});iqb=Go({type:Eo("invalid"),Rxc:Zp});jqb=Qo(Go({type:Eo("formula"),value:__c.Ho({canonical:hqb,invalid:iqb},a=>a.type)}));kqb=Qo(Go({type:Eo("boolean"),value:Yp}));lqb=Do(a=>a.length<=20&&__c.Zpb.parse(a)!=null);
mqb=Qo(Go({type:Eo("number"),value:Do(a=>Number.isFinite(a)&&(Math.abs(a)>=2.2250738585072014E-308||Object.is(a,0)))}));nqb=Qo(Go({type:Eo("plaintext"),value:Zp}));__c.oqb=To({attributes:{kaa:Oo(Rnb)},Sb:{fill:__c.Fq}});__c.pqb=Vo(__c.oqb);__c.qqb=To({values:{type:Eo("media")},Sb:{value:__c.pqb}});rqb=Vo(Qo(Wnb));sqb=To({values:{type:Eo("mention")},Sb:{value:rqb}});tqb=Go({embed:Xnb});uqb=Vo(Qo(tqb));vqb=To({values:{type:Eo("embed")},Sb:{value:uqb}});__c.wqb=new __c.Aq;
xqb=To({values:{type:Eo("text2")},attributes:{kd:Mo($pb)},Sb:{value:__c.wqb}});__c.yqb=new __c.Aq;zqb=To({values:{type:Eo("text3")},Sb:{value:__c.yqb}});Aqb={formula:jqb,boolean:kqb,number:mqb,plaintext:nqb,media:__c.qqb,mention:sqb,embed:vqb};Bqb=kp(Aqb,a=>a.type,a=>a.type);Cqb=kp({...Aqb,text2:xqb},a=>a.type,a=>a.type);Dqb=kp({...Aqb,text3:zqb},a=>a.type,a=>a.type);Eqb=kp({...Aqb,text2:xqb},a=>a.type,a=>a.type);Fqb=Go({type:Eo("plain"),format:Zp});Gqb=Go({type:Eo("currency"),format:Zp});
Hqb=Go({type:Eo("percentage"),format:Zp});Iqb=Go({type:Eo("date"),format:lqb});Jqb=__c.Ho({plain:Fqb,currency:Gqb,percentage:Hqb,date:Iqb},a=>a.type);Kqb=Qo(Go({type:Eo("plain_number"),fk:Fqb}));__c.Lqb=Qo(Go({type:Eo("currency"),fk:Gqb}));Mqb=Qo(Go({type:Eo("percentage"),fk:Hqb}));Nqb=Qo(Go({type:Eo("date"),fk:Iqb}));Oqb=To({attributes:{label:__c.iq},Sb:{fill:__c.Fq}});Pqb=Vo(Oqb);Qqb=To({values:{type:Eo("select")},attributes:{fk:Oo(Jqb)},Sb:{options:Pqb}});Rqb=Qo(Go({type:Eo("mention")}));Sqb=Qo(Go({type:Eo("embed")}));
__c.Tqb=kp({plain_number:Kqb,currency:__c.Lqb,percentage:Mqb,date:Nqb,select:Qqb,mention:Rqb,embed:Sqb},a=>a.type,a=>a.type);Uqb=a=>To({attributes:{zl:__c.nq},Sb:{content:No(Lo(a)),Wc:No(Lo(__c.Tqb))}});Vqb=Uqb(Bqb);
Wqb={static:{fontFamily:Hq.fontFamily,fontSize:Hq.fontSize,fontWeight:Hq.fontWeight,fontStyle:Hq.fontStyle,iS:Hq.iS,verticalAlign:Hq.verticalAlign,color:Hq.color,Xn:Hq.Xn,Tz:Hq.Tz,link:Hq.link,letterSpacing:Hq.letterSpacing,lineHeight:Hq.lineHeight,direction:Hq.direction,BB:Hq.BB,uL:Hq.uL},mWa:{},hw:{}};__c.Xqb=__c.Wjb(Wqb);
Yqb={dna:sp("block",plb,"inherit"),cna:sp("block",plb,"inherit"),fna:sp("block",plb,"inherit"),ena:sp("block",plb,"inherit"),Zma:sp("block",nlb,"inherit"),Yma:sp("block",nlb,"inherit"),ana:sp("block",nlb,"inherit"),$ma:sp("block",nlb,"inherit"),p$a:sp("block",rlb,"inherit"),o$a:sp("block",rlb,"inherit"),r$a:sp("block",rlb,"inherit"),q$a:sp("block",rlb,"inherit")};Zqb=["auto",...Qob];
$qb={static:{...Wqb.static,yY:sp("block",mlb,"#ffffff"),...Yqb,textAlign:tp("block",Zqb),sz:tp("block",["overflow","wrap","clip"]),Ll:tp("block",["middle","start","end"])},mWa:{},hw:{}};__c.Jq=__c.Wjb($qb);__c.Xpb=new ipb;__c.arb=__c.Xpb.domain.pP();brb=To({values:{id:Zp},attributes:{height:bmb,minHeight:__c.mq}});crb=To({values:{id:Zp},attributes:{width:bmb}});Vo(brb);Vo(crb);Vpb=new __c.ejb(brb,oib(brb.wta));Wpb=new __c.ejb(crb,oib(crb.wta));drb=To({values:{kka:Zp,SGa:Zp,Pfe:Yp}});erb=__c.Po(drb);
frb=To({values:{type:Eo("replace")},attributes:{Zk:Mo(eob),gPa:__c.iq,TGa:__c.iq}});grb=kp({replace:frb},a=>a.type,a=>a.type);hrb=Vo(grb);irb=Uqb(Cqb);jrb=Uqb(Dqb);krb=Uqb(Eqb);lrb=new zpb(irb);mrb=new zpb(jrb);nrb=new zpb(krb);__c.orb=(new zpb(Vqb)).domain.pP();__c.prb=new __c.Ypb(lrb);__c.qrb=new __c.Ypb(mrb);__c.rrb=new __c.Ypb(nrb);srb=To({attributes:{cwa:__c.oq,L3a:__c.oq}});trb=To({Sb:{freeze:srb}});
urb=a=>To({Sb:{pR:a,Yk:erb,ft:__c.Gq,view:trb,m6:hrb},attributes:{direction:Mo(Eo("ltr","rtl")),sN:jq}});vrb=a=>a.Fi({computed:{attributes:{width:void 0,height:void 0},Sb:{layout:void 0,rows:void 0,cols:void 0,yob:void 0,qab:void 0,K3a:void 0,LUa:void 0,d4:void 0,i1:void 0,Kc:void 0,Nc:void 0},create:b=>$kb(b)}});wrb=urb(__c.prb);__c.xrb=vrb(wrb);yrb=urb(__c.qrb);__c.zrb=vrb(yrb);Arb=urb(__c.rrb);__c.Brb=vrb(Arb);
}).call(self, self._5880d4398c473aa67256e87589eaef11);}

}])
//# sourceMappingURL=sourcemaps/e0023ff4b43a2044.js.map